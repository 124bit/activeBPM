{"version":3,"file":"bpmn-viewer.min.js","sources":["bpmn-viewer.js"],"names":["e","exports","module","define","amd","f","window","global","self","BpmnJS","t","n","r","s","o","u","a","require","i","Error","call","length",1,"_dereq_","initListeners","diagram","listeners","events","get","forEach","l","on","event","handler","checkValidationError","err","pattern","match","exec","message","Viewer","options","this","parent","container","$","addClass","css","position","appendTo","_","logoData","bottom","right","zIndex","attr","Diagram","BpmnModdle","Importer","prototype","importXML","xml","done","moddle","createModdle","fromXML","definitions","importDefinitions","saveXML","toXML","saveSVG","canvas","contentNode","getLayer","defsNode","_paper","select","contents","innerSVG","defs","outerSVG","bbox","getBBox","svg","width","height","x","y","name","invoke","fn","clear","_createDiagram","_init","importBpmnDiagram","__listeners","modules","concat","getModules","additionalModules","unshift","bpmnjs","omit","extend","_modules","destroy","push","./core","./draw","./import/Importer","bpmn-moddle","diagram-js","diagram-js/lib/features/overlays","diagram-js/lib/features/selection",2,"elementData","semantic","attrs","id","type","$type","businessObject","collectWaypoints","waypoints","collect","p","BpmnImporter","eventBus","elementFactory","elementRegistry","_eventBus","_canvas","_elementFactory","_elementRegistry","LabelUtil","hasExternalLabel","getExternalLabelBounds","isExpanded","$inject","add","parentElement","element","di","$instanceOf","createRoot","collapsed","hidden","bounds","createShape","addShape","source","_getSource","target","_getTarget","createConnection","waypoint","addConnection","addLabel","fire","label","createLabel","labelTarget","elementSemantic","sourceRef","isArray","$parent","_getElement","targetRef","getById","../util/Di","../util/Label",3,"bpmnImporter","./BpmnImporter",4,"BpmnRenderer","styles","pathMap","addMarker","markers","marker","initMarkers","paper","createMarker","fill","strokeWidth","strokeLinecap","strokeDasharray","ref","scale","markerWidth","markerHeight","path","circle","stroke","computeStyle","custom","traits","defaultStyles","style","drawCircle","offset","isObject","cx","cy","Math","round","drawRect","rect","drawDiamond","x_2","y_2","points","polygon","drawLine","createLine","drawPath","d","as","handlers","renderer","renderEventContent","getSemantic","isThrowing","isThrowEvent","isTypedEvent","parallelMultiple","renderLabel","textUtil","createText","renderEmbeddedLabel","align","box","padding","renderExternalLabel","fontSize","renderLaneLabel","text","textBox","top","transform","createPathFromConnection","connection","pathData","attachTaskMarkers","taskMarkers","obj","subprocess","contains","seq","parallel","compensation","loop","adhoc","loopCharacteristics","undefined","isSequential","isForCompensation","drawShape","h","DefaultRenderer","apply","drawConnection","renderDataItemCollection","yPosition","getScaledPath","xScaleFactor","yScaleFactor","containerWidth","containerHeight","mx","my","isCollection","elementObjectRef","getDi","eventDefinitionType","filter","matches","definition","all","val","key","any","eventDefinitions","TASK_BORDER_RADIUS","INNER_OUTER_DIST","LABEL_STYLE","fontFamily","TextUtil","size","bpmn:Event","bpmn:StartEvent","isInterrupting","bpmn:MessageEventDefinition","messagePath","bpmn:TimerEventDefinition","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:LinkEventDefinition","bpmn:ErrorEventDefinition","bpmn:CancelEventDefinition","bpmn:CompensateEventDefinition","bpmn:SignalEventDefinition","bpmn:MultipleEventDefinition","bpmn:ParallelMultipleEventDefinition","bpmn:EndEvent","bpmn:TerminateEventDefinition","bpmn:IntermediateEvent","outer","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:Activity","bpmn:Task","bpmn:ServiceTask","task","pathDataBG","abspos","fillPathData","bpmn:UserTask","pathData2","pathData3","bpmn:ManualTask","bpmn:SendTask","bpmn:ReceiveTask","instantiate","bpmn:ScriptTask","bpmn:BusinessRuleTask","headerPathData","businessHeaderPath","headerData","businessPath","bpmn:SubProcess","expanded","DiUtil","isEventSubProcess","triggeredByEvent","bpmn:AdHocSubProcess","bpmn:Transaction","innerAttrs","bpmn:CallActivity","bpmn:Participant","lane","expandedPool","isExpandedPool","text2","participantMultiplicity","bpmn:Lane","bpmn:InclusiveGateway","diamond","bpmn:ExclusiveGateway","bpmn:ComplexGateway","bpmn:ParallelGateway","bpmn:EventBasedGateway","drawEvent","eventGatewayType","parallelPath","innerCircle","bpmn:Gateway","bpmn:SequenceFlow","markerEnd","sequenceFlow","conditionExpression","markerStart","default","bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:MessageFlow","messageVisibleKind","midPoint","getPointAtLength","getTotalLength","markerPathData","messageAttrs","bpmn:DataObject","elementObject","bpmn:DataObjectReference","bpmn:DataInput","arrowPathData","getRawPath","bpmn:DataOutput","bpmn:DataStoreReference","DATA_STORE_PATH","elementStore","bpmn:BoundaryEvent","cancel","cancelActivity","bpmn:Group","pointerEvents","bpmn:TextAnnotation","textElement","textPathData","ParticipantMultiplicityMarker","subProcessPath","SubProcessMarker","markerRect","ParallelMarker","SequentialMarker","sequentialPath","CompensationMarker","compensationPath","LoopMarker","loopPath","strokeMiterlimit","AdhocMarker","Object","create","diagram-js/lib/draw/Renderer","diagram-js/lib/util/Text",5,"PathMap","Snap","EVENT_MESSAGE","heightElements","widthElements","EVENT_SIGNAL","EVENT_ESCALATION","EVENT_CONDITIONAL","EVENT_LINK","EVENT_ERROR","EVENT_CANCEL_45","EVENT_COMPENSATION","EVENT_TIMER_WH","EVENT_MULTIPLE","EVENT_PARALLEL_MULTIPLE","GATEWAY_EXCLUSIVE","GATEWAY_PARALLEL","GATEWAY_EVENT_BASED","GATEWAY_COMPLEX","DATA_OBJECT_PATH","DATA_OBJECT_COLLECTION_PATH","DATA_ARROW","DATA_STORE","TEXT_ANNOTATION","MARKER_SUB_PROCESS","MARKER_PARALLEL","MARKER_SEQUENTIAL","MARKER_COMPENSATION","MARKER_LOOP","MARKER_ADHOC","TASK_TYPE_SEND","TASK_TYPE_SCRIPT","TASK_TYPE_USER_1","TASK_TYPE_USER_2","TASK_TYPE_USER_3","TASK_TYPE_MANUAL","TASK_TYPE_INSTANTIATING_SEND","TASK_TYPE_SERVICE","TASK_TYPE_SERVICE_FILL","TASK_TYPE_BUSINESS_RULE_HEADER","TASK_TYPE_BUSINESS_RULE_MAIN","MESSAGE_FLOW_MARKER","pathId","param","rawPath","coordinates","heightRatio","widthRatio","heightIndex","widthIndex","format",6,"__depends__","../core","./BpmnRenderer","./PathMap",7,"BpmnTreeWalker","contextual","ctx","is","visit","gfx","visitRoot","root","visitIfDi","logError","error","context","registerDi","bpmnElement","diRefs","bind","handleDiagram","handlePlane","plane","planeElement","handlePlaneElement","handleDefinitions","diagrams","indexOf","rootElement","handleProcess","handleCollaboration","handleUnhandledProcesses","rootElements","handleDeferred","deferred","process","handleFlowElementsContainer","handleIoSpecification","ioSpecification","handleArtifacts","artifacts","handledProcesses","processes","laneSets","handleMessageFlow","messageFlow","handleMessageFlows","messageFlows","handleDataAssociation","association","handleDataInput","dataInput","handleDataOutput","dataOutput","handleArtifact","artifact","dataInputs","dataOutputs","handleSubProcess","subProcess","handleFlowNode","flowNode","childCtx","handleSequenceFlow","handleDataElement","dataObject","handleBoundaryEvent","handleLane","newContext","childLaneSet","handleLaneSet","filterList","flowNodeRef","handleFlowElements","laneSet","lanes","handleLaneSets","handleNonFlowNodes","flowElements","dataInputAssociations","dataOutputAssociations","handleParticipant","participant","newCtx","processRef","collaboration","participants","Refs","enumerable","object-refs",8,"parse","visitor","importer","parentShape","warnings","walker","./BpmnTreeWalker",9,10,"DEFAULT_LABEL_SIZE","getWaypointsMid","mid","first","floor","second","ceil","getExternalLabelMid","max",11,"./lib/simple",12,"packages","Moddle","ModdleXml","xmlStr","typeName","isString","isFunction","reader","Reader","rootHandler","writer","Writer","result","moddle-xml",13,"bpmn","bpmndi","dc","../resources/bpmn/json/bpmn.json","../resources/bpmn/json/bpmndi.json","../resources/bpmn/json/dc.json","../resources/bpmn/json/di.json","./bpmn-moddle",14,"./lib/Reader","./lib/Writer",15,"parseNodeAttributes","node","nodeAttrs","attributes","reduce","v","ns","local","parseNameNs","prefix","value","normalizeNamespaces","model","defaultNsUri","uri","pkg","getPackage","Context","parseRoot","elementsById","references","addReference","reference","addElement","addWarning","w","BaseHandler","BodyHandler","ReferenceHandler","property","ValueHandler","propertyDesc","BaseElementHandler","ElementHandler","getType","GenericElementHandler","XMLReader","sax","common","Types","types","Stack","parseName","aliasToName","handleEnd","handleText","handleNode","body","createReference","coerceType","isMany","set","parser","handleChild","createElement","descriptor","$descriptor","bodyProperty","Type","instance","prop","propertiesByName","isReference","getPropertyForElement","nameNs","propertyName","localName","$pkg","elementType","find","properties","isVirtual","isAttribute","hasType","effectiveType","toString","valueHandler","referenceHandler","childHandler","isSimple","newElement","createAny","children","$children","$body","resolveReferences","collection","idx","splice","handleClose","stack","pop","handleOpen","peek","line","column","xmlns","trim","onopentag","oncdata","ontext","onclosetag","onend","defer","write","close","./common","tiny-stack",16,"nsName","getElementNs","isGeneric","nameToAlias","getPropertyNs","getSerializableProperties","hasOwnProperty","escapeAttr","str","escapeMap","\n","\n\r","\"","replace","filterAttributes","props","isAttr","filterContained","ReferenceSerializer","BodySerializer","ValueSerializer","ElementSerializer","TypeSerializer","SavingWriter","FormatingWriter","out","indent","append","appendNewLine","appendIndent","join","unindent","XMLWriter","tree","internalWriter","formatingWriter","preamble","XML_PREAMBLE","build","serializeTo","CDATA_ESCAPE","DEFAULT_NS_MAP","serializeValue","escape","test","otherAttrs","parseNsAttributes","nsTagName","parseGeneric","parseAttributes","parseContainments","parseGenericAttributes","effectiveNs","logNamespaceUsed","nsPropertyTagName","isLocalNs","nsAttributeName","child","genericAttrs","$attrs","logNamespace","addAttribute","console","warn","isBody","asType","serialize","serializer","getNamespaces","namespaces","prefixMap","uriMap","used","existing","$model","serializeAttributes","collectNsAttrs","hasBody","b","typeNs",17,"capitalize","string","charAt","toUpperCase","slice","lower","toLowerCase","hasLowerCaseAlias","alias","xsi",18,"TinyStack","data","factory","arg",19,"./lib/moddle","./lib/ns","./lib/types",20,"Base",21,"DescriptorBuilder","allTypes","pick","addProperty","addNamedProperty","replaceProperty","oldProperty","newProperty","oldNameNs","setBodyProperty","redefineProperty","nsPrefix","parts","redefines","split","attrName","redefinedProperty","validate","propsByName","assertNotDefined","removeNamedProperty","addIdProperty","definedProperty","definedBy","hasProperty","addTrait","defineProperty","./ns",22,"Factory","createType","ModdleElement","writable","defineModel","defineDescriptor","./base",23,"Properties","registry","Registry","typeCache","cache","getEffectiveDescriptor","nsUri","uriOrPrefix","getPackages","getElementDescriptor","getPropertyDescriptor","./factory","./properties","./registry","./types",24,"defaultPrefix",25,26,"generateId","packageMap","typeMap","registerPackage","registerType","propertyNs","isBuiltIn","definePackage","mapTypes","iterator","superClass","cls","parentNs","builder","./descriptor-builder",27,"BUILTINS","String","Boolean","Integer","Real","Element","TYPE_CONVERTERS","parseInt","parseFloat","converter",28,"associations","isAbstract","emumerations","literalValues",29,30,31,"isReadOnly","isUnique","subsettedProperty",32,"./lib/Diagram",33,"bootstrap","bootstrapModules","hasModule","m","addModule","__init__","c","components","injector","Injector","createInjector","configModule","config","coreModule","didi",34,"number","resolution","ensurePx","isNumber","createContainer","document","setAttribute","appendChild","createGroup","group","class","Canvas","graphicsFactory","snap","_snap","_graphicsFactory","setCTM","mstr","remove","BASE_LAYER","_container","createPaper","_root","_layers","parentNode","removeChild","_ensureValidId","getRoot","layer","getContainer","_updateMarker","getGraphics","removeMarker","shape","updateShape","updateConnection","_removeElement","removeShape","removeConnection","sendToFront","bubble","gfxParent","getGraphicsByElement","_fireViewboxChange","viewbox","innerBox","matrix","outerBox","getSize","Matrix","translate","localMatrix","inner","scroll","delta","getCTM","dx","dy","createSVGMatrix","multiply","zoom","newScale","center","vbox","min","_setZoom","centerPoint","originalPoint","currentMatrix","scaleMatrix","newMatrix","viewport","point","createSVGPoint","currentScale","matrixTransform","inverse","clientWidth","clientHeight","getAbsoluteBBox","transformBBox","../util/Collections",35,"ElementFactory","_uid","Model","../model",36,"ElementRegistry","_elementMap","_graphicsMap","getByGraphics",37,"Event","extendEvent","eventType","EventBus","_listeners","DEFAULT_PRIORITY","stopPropagation","propagationStopped","preventDefault","defaultPrevented","isPropagationStopped","isDefaultPrevented","priority","callback","listener","_addListener","once","wrappedCallback","arguments","off","_getListeners","args","Array","shift","handleError",38,"gfxContainer","clearVisual","oldVisual","newVisual","after","createContainerFactory","GraphicsFactory","_renderer","createSnapAt","gfxGroup",39,"../draw","./Canvas","./ElementFactory","./ElementRegistry","./EventBus","./GraphicsFactory",40,"Renderer","CONNECTION_STYLE","SHAPE_STYLE","toSVGPoints","updateLine","./Snap",41,"snapsvg","./snapsvg-extensions",42,"Styles","defaultTraits","no-fill","no-border","strokeOpacity","no-events","className","additionalAttrs","inject",43,"./Renderer","./Styles",44,"plugin","array","getClasses","setClasses","classes","current","hasClass","removeClass","wrap","createElementNS",45,"InteractionEvents","baseEvent","eventName","registerEvents","click","hit","visual","GraphicsUtil","getVisual","HIT_STYLE","hover","dblclick","../../draw/Renderer","../../util/GraphicsUtil",46,"interactionEvents","./InteractionEvents",47,"Outline","createOutline","OUTLINE_STYLE","prependTo","updateOutline","outline","OUTLINE_OFFSET",48,"./Outline",49,"Overlays","_ids","ids","_overlayDefaults","show","trigger","minZoom","maxZoom","_overlays","_overlayContainers","_overlayRoot","_getOverlayContainer","overlays","clone","overlay","html","next","_addOverlay","htmlContainer","hide","_updateOverlayContainer","left","_updateOverlay","_createOverlayContainer","_updateRoot","raw","_updateOverlayVisibilty","updateViewbox","deferUpdate","debounce","../../util/IdGenerator",50,"./Overlays",51,"Selection","_selectedElements","deselect","selectedElements","oldSelection","newSelection","isSelected","elements",52,"originalEvent","srcEvent","SelectionVisuals","selection","shiftKey","MARKER_HOVER","MARKER_SELECTED","srcElement",53,"selectionVisuals","../interaction-events","../outline","./Selection","./SelectionVisuals",54,"parentRefs","labelRefs","outgoingRefs","incomingRefs","Shape","Root","Label","Connection",55,56,57,"IdGenerator","_counter","_prefix","random",58,"parseAlign","horizontal","vertical","parsePadding","Text","_config","DEFAULT_BOX_PADDING","layoutNext","lines","fit","fitLine","originalLine","nextLine","remainder","textBBox","getTextBBox","fakeText","textContent","semanticShorten","maxLength","part","shortenedParts","shortenLine","maxWidth","shortenedLine","merge","layouted","ownerSVGElement","totalHeight","sum","tspan",59,"annotate","FN_ARGS","FN_ARG","map",60,"Module","./annotation","./injector","./module",61,"autoAnnotate","currentlyResolving","providers","_providers","instances","_instances","msg","pivot","returned","dependencies","dep","createPrivateInjectorFactory","privateChildInjector","createChild","forceNewInstances","provider","cacheIdx","privateChildInjectorFactory","fromParentModule","matchedScopes","privateInjectorsCache","privateChildInjectors","privateChildFactories","$scope","scope","factoryMap","arrayUnwrap","__exports__","clonedModule","keys","substring","privateInjector","__modules__","getFromPrivateInjector",62,63,"Collection","./lib/collection","./lib/refs",64,"refs","inverseProperty","unset",65,"defineCollectionProperty","_value","old","ensureBound","./collection"],"mappings":"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","sourcesContent":["!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.BpmnJS=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n'use strict';\n\nvar Diagram = _dereq_('diagram-js'),\n    BpmnModdle = _dereq_('bpmn-moddle'),\n    $ = (window.$),\n    _ = (window._);\n\nvar Importer = _dereq_('./import/Importer');\n\n\nfunction initListeners(diagram, listeners) {\n  var events = diagram.get('eventBus');\n\n  listeners.forEach(function(l) {\n    events.on(l.event, l.handler);\n  });\n}\n\nfunction checkValidationError(err) {\n\n  // check if we can help the user by indicating wrong BPMN 2.0 xml\n  // (in case he or the exporting tool did not get that right)\n\n  var pattern = /unparsable content <([^>]+)> detected([\\s\\S]*)$/;\n  var match = pattern.exec(err.message);\n\n  if (match) {\n    err.message =\n      'unparsable content <' + match[1] + '> detected; ' +\n      'this may indicate an invalid BPMN 2.0 diagram file' + match[2];\n  }\n\n  return err;\n}\n\n/**\n * A viewer for BPMN 2.0 diagrams\n *\n * @class\n *\n * @param {Object} [options] configuration options to pass to the viewer\n * @param {DOMElement} [options.container] the container to render the viewer in, defaults to body.\n * @param {String|Number} [options.width] the width of the viewer\n * @param {String|Number} [options.height] the height of the viewer\n * @param {Array<didi.Module>} [options.modules] a list of modules to override the default modules\n * @param {Array<didi.Module>} [options.additionalModules] a list of modules to use with the default modules\n */\nfunction Viewer(options) {\n  this.options = options = options || {};\n\n  var parent = options.container || $('body');\n\n  var container = $('<div></div>').addClass('bjs-container').css({\n    position: 'relative'\n  }).appendTo(parent);\n\n  _.forEach([ 'width', 'height' ], function(a) {\n    if (options[a]) {\n      container.css(a, options[a]);\n    }\n  });\n\n  // unwrap jquery\n  this.container = container.get(0);\n\n\n  /**\n   * The code in the <project-logo></project-logo> area\n   * must not be changed, see http://bpmn.io/license for more information\n   *\n   * <project-logo>\n   */\n\n  /* jshint -W101 */\n\n  // inlined ../resources/bpmnjs.png\n  var logoData = 'iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADBQTFRFiMte9PrwldFwfcZPqtqN0+zEyOe1XLgjvuKncsJAZ70y6fXh3vDT////UrQV////G2zN+AAAABB0Uk5T////////////////////AOAjXRkAAAHDSURBVHjavJZJkoUgDEBJmAX8979tM8u3E6x20VlYJfFFMoL4vBDxATxZcakIOJTWSmxvKWVIkJ8jHvlRv1F2LFrVISCZI+tCtQx+XfewgVTfyY3plPiQEAzI3zWy+kR6NBhFBYeBuscJLOUuA2WVLpCjVIaFzrNQZArxAZKUQm6gsj37L9Cb7dnIBUKxENaaMJQqMpDXvSL+ktxdGRm2IsKgJGGPg7atwUG5CcFUEuSv+CwQqizTrvDTNXdMU2bMiDWZd8d7QIySWVRsb2vBBioxOFt4OinPBapL+neAb5KL5IJ8szOza2/DYoipUCx+CjO0Bpsv0V6mktNZ+k8rlABlWG0FrOpKYVo8DT3dBeLEjUBAj7moDogVii7nSS9QzZnFcOVBp1g2PyBQ3Vr5aIapN91VJy33HTJLC1iX2FY6F8gRdaAeIEfVONgtFCzZTmoLEdOjBDfsIOA6128gw3eu1shAajdZNAORxuQDJN5A5PbEG6gNIu24QJD5iNyRMZIr6bsHbCtCU/OaOaSvgkUyDMdDa1BXGf5HJ1To+/Ym6mCKT02Y+/Sa126ZKyd3jxhzpc1r8zVL6YM1Qy/kR4ABAFJ6iQUnivhAAAAAAElFTkSuQmCC';\n\n  /* jshint +W101 */\n\n  var a = $('<a href=\"http://bpmn.io\" target=\"_blank\" class=\"bjs-powered-by\" title=\"Powered by bpmn.io\" />').css({\n    position: 'absolute',\n    bottom: 15,\n    right: 15,\n    zIndex: 100\n  });\n\n  var logo = $('<img/>').attr('src', 'data:image/png;base64,' + logoData).appendTo(a);\n\n  a.appendTo(container);\n\n  /* </project-logo> */\n}\n\nViewer.prototype.importXML = function(xml, done) {\n\n  var self = this;\n\n  this.moddle = this.createModdle();\n\n  this.moddle.fromXML(xml, 'bpmn:Definitions', function(err, definitions) {\n\n    if (err) {\n      err = checkValidationError(err);\n      return done(err);\n    }\n\n    self.importDefinitions(definitions, done);\n  });\n};\n\nViewer.prototype.saveXML = function(options, done) {\n\n  if (!done) {\n    done = options;\n    options = {};\n  }\n\n  var definitions = this.definitions;\n\n  if (!definitions) {\n    return done(new Error('no definitions loaded'));\n  }\n\n  this.moddle.toXML(definitions, options, done);\n};\n\nViewer.prototype.createModdle = function() {\n  return new BpmnModdle();\n};\n\nViewer.prototype.saveSVG = function(options, done) {\n\n  if (!done) {\n    done = options;\n    options = {};\n  }\n\n  var canvas = this.get('canvas');\n\n  var contentNode = canvas.getLayer('base'),\n      defsNode = canvas._paper.select('defs');\n\n  var contents = contentNode.innerSVG(),\n      defs = (defsNode && defsNode.outerSVG()) || '';\n\n  var bbox = contentNode.getBBox();\n\n  var svg =\n    '<?xml version=\"1.0\" encoding=\"utf-8\"?>\\n' +\n    '<!-- created with bpmn-js / http://bpmn.io -->\\n' +\n    '<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\\n' +\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" ' +\n         'width=\"' + bbox.width + '\" height=\"' + bbox.height + '\" ' +\n         'viewBox=\"' + bbox.x + ' ' + bbox.y + ' ' + bbox.width + ' ' + bbox.height + '\" version=\"1.1\">' +\n      defs + contents +\n    '</svg>';\n\n  done(null, svg);\n};\n\nViewer.prototype.get = function(name) {\n\n  if (!this.diagram) {\n    throw new Error('no diagram loaded');\n  }\n\n  return this.diagram.get(name);\n};\n\nViewer.prototype.invoke = function(fn) {\n\n  if (!this.diagram) {\n    throw new Error('no diagram loaded');\n  }\n\n  return this.diagram.invoke(fn);\n};\n\nViewer.prototype.importDefinitions = function(definitions, done) {\n\n  // use try/catch to not swallow synchronous exceptions\n  // that may be raised during model parsing\n  try {\n    if (this.diagram) {\n      this.clear();\n    }\n\n    this.definitions = definitions;\n    this.diagram = this._createDiagram(this.options);\n\n    this._init(this.diagram);\n\n    Importer.importBpmnDiagram(this.diagram, definitions, done);\n  } catch (e) {\n    done(e);\n  }\n};\n\nViewer.prototype._init = function(diagram) {\n  initListeners(diagram, this.__listeners || []);\n};\n\nViewer.prototype._createDiagram = function(options) {\n\n  var modules = [].concat(options.modules || this.getModules(), options.additionalModules || []);\n\n  // add self as an available service\n  modules.unshift({\n    bpmnjs: [ 'value', this ],\n    moddle: [ 'value', this.moddle ]\n  });\n\n  options = _.omit(options, 'additionalModules');\n\n  options = _.extend(options, {\n    canvas: { container: this.container },\n    modules: modules\n  });\n\n  return new Diagram(options);\n};\n\n\nViewer.prototype.getModules = function() {\n  return this._modules;\n};\n\n/**\n * Remove all drawn elements from the viewer\n */\nViewer.prototype.clear = function() {\n  var diagram = this.diagram;\n\n  if (diagram) {\n    diagram.destroy();\n  }\n};\n\n/**\n * Register an event listener on the viewer\n *\n * @param {String} event\n * @param {Function} handler\n */\nViewer.prototype.on = function(event, handler) {\n  var diagram = this.diagram,\n      listeners = this.__listeners = this.__listeners || [];\n\n  listeners = this.__listeners || [];\n  listeners.push({ event: event, handler: handler });\n\n  if (diagram) {\n    diagram.get('eventBus').on(event, handler);\n  }\n};\n\n// modules the viewer is composed of\nViewer.prototype._modules = [\n  _dereq_('./core'),\n  _dereq_('./draw'),\n  _dereq_('diagram-js/lib/features/selection'),\n  _dereq_('diagram-js/lib/features/overlays')\n];\n\nmodule.exports = Viewer;\n\n},{\"./core\":3,\"./draw\":6,\"./import/Importer\":8,\"bpmn-moddle\":11,\"diagram-js\":32,\"diagram-js/lib/features/overlays\":50,\"diagram-js/lib/features/selection\":53}],2:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar LabelUtil = _dereq_('../util/Label');\n\nvar hasExternalLabel = LabelUtil.hasExternalLabel,\n    getExternalLabelBounds = LabelUtil.getExternalLabelBounds,\n    isExpanded = _dereq_('../util/Di').isExpanded;\n\n\nfunction elementData(semantic, attrs) {\n  return _.extend({\n    id: semantic.id,\n    type: semantic.$type,\n    businessObject: semantic\n  }, attrs);\n}\n\nfunction collectWaypoints(waypoints) {\n  return _.collect(waypoints, function(p) {\n    return { x: p.x, y: p.y };\n  });\n}\n\n\n/**\n * An importer that adds bpmn elements to the canvas\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {ElementFactory} elementFactory\n * @param {ElementRegistry} elementRegistry\n */\nfunction BpmnImporter(eventBus, canvas, elementFactory, elementRegistry) {\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n\n  this._elementFactory = elementFactory;\n  this._elementRegistry = elementRegistry;\n}\n\nBpmnImporter.$inject = [ 'eventBus', 'canvas', 'elementFactory', 'elementRegistry' ];\n\nmodule.exports = BpmnImporter;\n\n\n/**\n * Add bpmn element (semantic) to the canvas onto the\n * specified parent shape.\n */\nBpmnImporter.prototype.add = function(semantic, parentElement) {\n\n  var di = semantic.di,\n      element;\n\n  // ROOT ELEMENT\n  // handle the special case that we deal with a\n  // invisible root element (process or collaboration)\n  if (di.$instanceOf('bpmndi:BPMNPlane')) {\n\n    // add a virtual element (not being drawn)\n    element = this._elementFactory.createRoot(elementData(semantic));\n  }\n\n  // SHAPE\n  else if (di.$instanceOf('bpmndi:BPMNShape')) {\n\n    var collapsed = !isExpanded(semantic);\n    var hidden = parentElement && (parentElement.hidden || parentElement.collapsed);\n\n    var bounds = semantic.di.bounds;\n\n    element = this._elementFactory.createShape(elementData(semantic, {\n      collapsed: collapsed,\n      hidden: hidden,\n      x: bounds.x,\n      y: bounds.y,\n      width: bounds.width,\n      height: bounds.height\n    }));\n\n    this._canvas.addShape(element, parentElement);\n  }\n\n  // CONNECTION\n  else if (di.$instanceOf('bpmndi:BPMNEdge')) {\n\n    var source = this._getSource(semantic),\n        target = this._getTarget(semantic);\n\n    if (!source || !target) {\n      throw new Error('source or target not rendered for element <' + semantic.id + '>');\n    }\n\n    element = this._elementFactory.createConnection(elementData(semantic, {\n      source: source,\n      target: target,\n      waypoints: collectWaypoints(semantic.di.waypoint)\n    }));\n\n    this._canvas.addConnection(element, parentElement);\n  } else {\n    throw new Error('unknown di <' + di.$type + '> for element <' + semantic.id + '>');\n  }\n\n  // (optional) LABEL\n  if (hasExternalLabel(semantic)) {\n    this.addLabel(semantic, element);\n  }\n\n  this._eventBus.fire('bpmnElement.added', { element: element });\n\n  return element;\n};\n\n\n/**\n * add label for an element\n */\nBpmnImporter.prototype.addLabel = function (semantic, element) {\n  var bounds = getExternalLabelBounds(semantic, element);\n\n  var label = this._elementFactory.createLabel(elementData(semantic, {\n    id: semantic.id + '_label',\n    labelTarget: element,\n    type: 'label',\n    hidden: element.hidden,\n    x: bounds.x,\n    y: bounds.y,\n    width: bounds.width,\n    height: bounds.height\n  }));\n\n  return this._canvas.addShape(label, element.parent);\n};\n\n\nBpmnImporter.prototype._getSource = function(semantic) {\n\n  var element,\n      elementSemantic = semantic.sourceRef;\n\n  // handle mysterious isMany DataAssociation#sourceRef\n  if (_.isArray(elementSemantic)) {\n    elementSemantic = elementSemantic[0];\n  }\n\n  if (elementSemantic && elementSemantic.$instanceOf('bpmn:DataOutput')) {\n    elementSemantic = elementSemantic.$parent.$parent;\n  }\n\n  element = elementSemantic && this._getElement(elementSemantic);\n\n  if (element) {\n    return element;\n  }\n\n  throw new Error('element <' + elementSemantic.id + '> referenced by <' + semantic.id + '> not yet drawn');\n};\n\n\nBpmnImporter.prototype._getTarget = function(semantic) {\n\n  var element,\n      elementSemantic = semantic.targetRef;\n\n  if (elementSemantic && elementSemantic.$instanceOf('bpmn:DataInput')) {\n    elementSemantic = elementSemantic.$parent.$parent;\n  }\n\n  element = elementSemantic && this._getElement(elementSemantic);\n\n  if (element) {\n    return element;\n  }\n\n  throw new Error('element <' + elementSemantic.id + '> referenced by <' + semantic.id + '> not yet drawn');\n};\n\n\nBpmnImporter.prototype._getElement = function(semantic) {\n  return this._elementRegistry.getById(semantic.id);\n};\n},{\"../util/Di\":9,\"../util/Label\":10}],3:[function(_dereq_,module,exports){\nmodule.exports = {\n  bpmnImporter: [ 'type', _dereq_('./BpmnImporter') ]\n};\n},{\"./BpmnImporter\":2}],4:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar DefaultRenderer = _dereq_('diagram-js/lib/draw/Renderer');\nvar TextUtil = _dereq_('diagram-js/lib/util/Text');\n\nvar DiUtil = _dereq_('../util/Di');\n\nvar createLine = DefaultRenderer.createLine;\n\n\nfunction BpmnRenderer(events, styles, pathMap) {\n\n  DefaultRenderer.call(this, styles);\n\n  var TASK_BORDER_RADIUS = 10;\n  var INNER_OUTER_DIST = 3;\n\n  var LABEL_STYLE = {\n    fontFamily: 'Arial, sans-serif',\n    fontSize: '12px'\n  };\n\n  var textUtil = new TextUtil({\n    style: LABEL_STYLE,\n    size: { width: 100 }\n  });\n\n  var markers = {};\n\n  function addMarker(id, element) {\n    markers[id] = element;\n  }\n\n  function marker(id) {\n    return markers[id];\n  }\n\n  function initMarkers(paper) {\n\n    function createMarker(id, options) {\n      var attrs = _.extend({\n        fill: 'black',\n        strokeWidth: 1,\n        strokeLinecap: 'round',\n        strokeDasharray: 'none'\n      }, options.attrs);\n\n      var ref = options.ref || { x: 0, y: 0 };\n\n      var scale = options.scale || 1;\n\n      // fix for safari / chrome / firefox bug not correctly\n      // resetting stroke dash array\n      if (attrs.strokeDasharray === 'none') {\n        attrs.strokeDasharray = [10000, 1];\n      }\n\n      var marker = options.element\n                     .attr(attrs)\n                     .marker(0, 0, 20, 20, ref.x, ref.y)\n                     .attr({\n                       markerWidth: 20 * scale,\n                       markerHeight: 20 * scale\n                     });\n\n      return addMarker(id, marker);\n    }\n\n\n    createMarker('sequenceflow-end', {\n      element: paper.path('M 1 5 L 11 10 L 1 15 Z'),\n      ref: { x: 11, y: 10 },\n      scale: 0.5\n    });\n\n    createMarker('messageflow-start', {\n      element: paper.circle(6, 6, 5),\n      attrs: {\n        fill: 'white',\n        stroke: 'black'\n      },\n      ref: { x: 6, y: 6 }\n    });\n\n    createMarker('messageflow-end', {\n      element: paper.path('M 1 5 L 11 10 L 1 15 Z'),\n      attrs: {\n        fill: 'white',\n        stroke: 'black'\n      },\n      ref: { x: 11, y: 10 }\n    });\n\n    createMarker('data-association-end', {\n      element: paper.path('M 1 5 L 11 10 L 1 15'),\n      attrs: {\n        fill: 'white',\n        stroke: 'black'\n      },\n      ref: { x: 11, y: 10 },\n      scale: 0.5\n    });\n\n    createMarker('conditional-flow-marker', {\n      element: paper.path('M 0 10 L 8 6 L 16 10 L 8 14 Z'),\n      attrs: {\n        fill: 'white',\n        stroke: 'black'\n      },\n      ref: { x: -1, y: 10 },\n      scale: 0.5\n    });\n\n    createMarker('conditional-default-flow-marker', {\n      element: paper.path('M 1 4 L 5 16'),\n      attrs: {\n        stroke: 'black'\n      },\n      ref: { x: -5, y: 10 },\n      scale: 0.5\n    });\n  }\n\n  function computeStyle(custom, traits, defaultStyles) {\n    if (!_.isArray(traits)) {\n      defaultStyles = traits;\n      traits = [];\n    }\n\n    return styles.style(traits || [], _.extend(defaultStyles, custom || {}));\n  }\n\n  function drawCircle(p, width, height, offset, attrs) {\n\n    if (_.isObject(offset)) {\n      attrs = offset;\n      offset = 0;\n    }\n\n    offset = offset || 0;\n\n    attrs = computeStyle(attrs, {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'white'\n    });\n\n    var cx = width / 2,\n        cy = height / 2;\n\n    return p.circle(cx, cy, Math.round((width + height) / 4 - offset)).attr(attrs);\n  }\n\n  function drawRect(p, width, height, r, offset, attrs) {\n\n    if (_.isObject(offset)) {\n      attrs = offset;\n      offset = 0;\n    }\n\n    offset = offset || 0;\n\n    attrs = computeStyle(attrs, {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'white'\n    });\n\n    return p.rect(offset, offset, width - offset * 2, height - offset * 2, r).attr(attrs);\n  }\n\n  function drawDiamond(p, width, height, attrs) {\n\n    var x_2 = width / 2;\n    var y_2 = height / 2;\n\n    var points = [x_2, 0, width, y_2, x_2, height, 0, y_2 ];\n\n    attrs = computeStyle(attrs, {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'white'\n    });\n\n    return p.polygon(points).attr(attrs);\n  }\n\n  function drawLine(p, waypoints, attrs) {\n    attrs = computeStyle(attrs, [ 'no-fill' ], {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'none'\n    });\n\n    return createLine(waypoints, attrs).appendTo(p);\n  }\n\n  function drawPath(p, d, attrs) {\n\n    attrs = computeStyle(attrs, [ 'no-fill' ], {\n      strokeWidth: 2,\n      stroke: 'black'\n    });\n\n    return p.path(d).attr(attrs);\n  }\n\n  function as(type) {\n    return function(p, element) {\n      return handlers[type](p, element);\n    };\n  }\n\n  function renderer(type) {\n    return handlers[type];\n  }\n\n  function renderEventContent(element, p) {\n\n    var event = getSemantic(element);\n    var isThrowing = isThrowEvent(event);\n\n    if (isTypedEvent(event, 'bpmn:MessageEventDefinition')) {\n      return renderer('bpmn:MessageEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:TimerEventDefinition')) {\n      return renderer('bpmn:TimerEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:ConditionalEventDefinition')) {\n      return renderer('bpmn:ConditionalEventDefinition')(p, element);\n    }\n\n    if (isTypedEvent(event, 'bpmn:SignalEventDefinition')) {\n      return renderer('bpmn:SignalEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:CancelEventDefinition') &&\n      isTypedEvent(event, 'bpmn:TerminateEventDefinition', { parallelMultiple: false })) {\n      return renderer('bpmn:MultipleEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:CancelEventDefinition') &&\n      isTypedEvent(event, 'bpmn:TerminateEventDefinition', { parallelMultiple: true })) {\n      return renderer('bpmn:ParallelMultipleEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:EscalationEventDefinition')) {\n      return renderer('bpmn:EscalationEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:LinkEventDefinition')) {\n      return renderer('bpmn:LinkEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:ErrorEventDefinition')) {\n      return renderer('bpmn:ErrorEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:CancelEventDefinition')) {\n      return renderer('bpmn:CancelEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:CompensateEventDefinition')) {\n      return renderer('bpmn:CompensateEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:TerminateEventDefinition')) {\n      return renderer('bpmn:TerminateEventDefinition')(p, element, isThrowing);\n    }\n\n    return null;\n  }\n\n  function renderLabel(p, label, options) {\n    return textUtil.createText(p, label || '', options).addClass('djs-label');\n  }\n\n  function renderEmbeddedLabel(p, element, align) {\n    var semantic = getSemantic(element);\n    return renderLabel(p, semantic.name, { box: element, align: align, padding: 5 });\n  }\n\n  function renderExternalLabel(p, element, align) {\n    var semantic = getSemantic(element);\n\n    if (!semantic.name) {\n      element.hidden = true;\n    }\n\n    return renderLabel(p, semantic.name, { box: element, align: align, style: { fontSize: '11px' } });\n  }\n\n  function renderLaneLabel(p, text, element) {\n    var textBox = renderLabel(p, text, {\n      box: { height: 30, width: element.height },\n      align: 'center-middle'\n    });\n\n    var top = -1 * element.height;\n    textBox.transform(\n      'rotate(270) ' +\n      'translate(' + top + ',' + 0 + ')'\n    );\n  }\n\n  function createPathFromConnection(connection) {\n    var waypoints = connection.waypoints;\n\n    var pathData = 'm  ' + waypoints[0].x + ',' + waypoints[0].y;\n    for (var i = 1; i < waypoints.length; i++) {\n      pathData += 'L' + waypoints[i].x + ',' + waypoints[i].y + ' ';\n    }\n    return pathData;\n  }\n\n  var handlers = {\n    'bpmn:Event': function(p, element, attrs) {\n      return drawCircle(p, element.width, element.height,  attrs);\n    },\n    'bpmn:StartEvent': function(p, element) {\n      var attrs = {};\n      var semantic = getSemantic(element);\n\n      if (!semantic.isInterrupting) {\n        attrs = {\n          strokeDasharray: '6',\n          strokeLinecap: 'round'\n        };\n      }\n\n      var circle = renderer('bpmn:Event')(p, element, attrs);\n\n      renderEventContent(element, p);\n\n      return circle;\n    },\n    'bpmn:MessageEventDefinition': function(p, element, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_MESSAGE', {\n        xScaleFactor: 0.9,\n        yScaleFactor: 0.9,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.235,\n          my: 0.315\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'white';\n      var stroke = isThrowing ? 'white' : 'black';\n\n      var messagePath = drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill,\n        stroke: stroke\n      });\n\n      return messagePath;\n    },\n    'bpmn:TimerEventDefinition': function(p, element) {\n\n      var circle = drawCircle(p, element.width, element.height, 0.2 * element.height, {\n        strokeWidth: 2\n      });\n\n      var pathData = pathMap.getScaledPath('EVENT_TIMER_WH', {\n        xScaleFactor: 0.75,\n        yScaleFactor: 0.75,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.5,\n          my: 0.5\n        }\n      });\n\n      var path = drawPath(p, pathData, {\n        strokeWidth: 2\n      });\n\n      return circle;\n    },\n    'bpmn:EscalationEventDefinition': function(p, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_ESCALATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.5,\n          my: 0.555\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'none';\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      });\n    },\n    'bpmn:ConditionalEventDefinition': function(p, event) {\n      var pathData = pathMap.getScaledPath('EVENT_CONDITIONAL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.5,\n          my: 0.222\n        }\n      });\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1\n      });\n    },\n    'bpmn:LinkEventDefinition': function(p, event) {\n      var pathData = pathMap.getScaledPath('EVENT_LINK', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.57,\n          my: 0.263\n        }\n      });\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1\n      });\n    },\n    'bpmn:ErrorEventDefinition': function(p, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_ERROR', {\n        xScaleFactor: 1.1,\n        yScaleFactor: 1.1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.2,\n          my: 0.722\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'none';\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      });\n    },\n    'bpmn:CancelEventDefinition': function(p, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_CANCEL_45', {\n        xScaleFactor: 1.0,\n        yScaleFactor: 1.0,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.638,\n          my: -0.055\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'none';\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      }).transform('rotate(45)');\n    },\n    'bpmn:CompensateEventDefinition': function(p, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_COMPENSATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.201,\n          my: 0.472\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'none';\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      });\n    },\n    'bpmn:SignalEventDefinition': function(p, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_SIGNAL', {\n        xScaleFactor: 0.9,\n        yScaleFactor: 0.9,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.5,\n          my: 0.2\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'none';\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      });\n    },\n    'bpmn:MultipleEventDefinition': function(p, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_MULTIPLE', {\n        xScaleFactor: 1.1,\n        yScaleFactor: 1.1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.222,\n          my: 0.36\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'none';\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      });\n    },\n    'bpmn:ParallelMultipleEventDefinition': function(p, event) {\n      var pathData = pathMap.getScaledPath('EVENT_PARALLEL_MULTIPLE', {\n        xScaleFactor: 1.2,\n        yScaleFactor: 1.2,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.458,\n          my: 0.194\n        }\n      });\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1\n      });\n    },\n    'bpmn:EndEvent': function(p, element) {\n      var circle = renderer('bpmn:Event')(p, element, {\n        strokeWidth: 4\n      });\n\n      renderEventContent(element, p, true);\n\n      return circle;\n    },\n    'bpmn:TerminateEventDefinition': function(p, element) {\n      var circle = drawCircle(p, element.width, element.height, 8, {\n        strokeWidth: 4,\n        fill: 'black'\n      });\n\n      return circle;\n    },\n    'bpmn:IntermediateEvent': function(p, element) {\n      var outer = renderer('bpmn:Event')(p, element, { strokeWidth: 1 });\n      var inner = drawCircle(p, element.width, element.height, INNER_OUTER_DIST, { strokeWidth: 1, fill: 'none' });\n\n      renderEventContent(element, p);\n\n      return outer;\n    },\n    'bpmn:IntermediateCatchEvent': as('bpmn:IntermediateEvent'),\n    'bpmn:IntermediateThrowEvent': as('bpmn:IntermediateEvent'),\n\n    'bpmn:Activity': function(p, element, attrs) {\n      return drawRect(p, element.width, element.height, TASK_BORDER_RADIUS, attrs);\n    },\n\n    'bpmn:Task': function(p, element) {\n      var rect = renderer('bpmn:Activity')(p, element);\n      renderEmbeddedLabel(p, element, 'center-middle');\n      attachTaskMarkers(p, element);\n      return rect;\n    },\n    'bpmn:ServiceTask': function(p, element) {\n      var task = renderer('bpmn:Task')(p, element);\n\n      var pathDataBG = pathMap.getScaledPath('TASK_TYPE_SERVICE', {\n        abspos: {\n          x: 12,\n          y: 18\n        }\n      });\n\n      var servicePathBG = drawPath(p, pathDataBG, {\n        strokeWidth: 1,\n        fill: 'none'\n      });\n\n      var fillPathData = pathMap.getScaledPath('TASK_TYPE_SERVICE_FILL', {\n        abspos: {\n          x: 17.2,\n          y: 18\n        }\n      });\n\n      var serviceFillPath = drawPath(p, fillPathData, {\n        strokeWidth: 0,\n        stroke: 'none',\n        fill: 'white'\n      });\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SERVICE', {\n        abspos: {\n          x: 17,\n          y: 22\n        }\n      });\n\n      var servicePath = drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: 'white'\n      });\n\n      return task;\n    },\n    'bpmn:UserTask': function(p, element) {\n      var task = renderer('bpmn:Task')(p, element);\n\n      var x = 15;\n      var y = 12;\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_USER_1', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n\n      var userPath = drawPath(p, pathData, {\n        strokeWidth: 0.5,\n        fill: 'none'\n      });\n\n      var pathData2 = pathMap.getScaledPath('TASK_TYPE_USER_2', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n\n      var userPath2 = drawPath(p, pathData2, {\n        strokeWidth: 0.5,\n        fill: 'none'\n      });\n\n      var pathData3 = pathMap.getScaledPath('TASK_TYPE_USER_3', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n\n      var userPath3 = drawPath(p, pathData3, {\n        strokeWidth: 0.5,\n        fill: 'black'\n      });\n\n      return task;\n    },\n    'bpmn:ManualTask': function(p, element) {\n      var task = renderer('bpmn:Task')(p, element);\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_MANUAL', {\n        abspos: {\n          x: 17,\n          y: 15\n        }\n      });\n\n      var userPath = drawPath(p, pathData, {\n        strokeWidth: 0.25,\n        fill: 'white',\n        stroke: 'black'\n      });\n\n      return task;\n    },\n    'bpmn:SendTask': function(p, element) {\n      var task = renderer('bpmn:Task')(p, element);\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SEND', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: 21,\n        containerHeight: 14,\n        position: {\n          mx: 0.285,\n          my: 0.357\n        }\n      });\n\n      var sendPath = drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: 'black',\n        stroke: 'white'\n      });\n\n      return task;\n    },\n    'bpmn:ReceiveTask' : function(p, element) {\n      var semantic = getSemantic(element);\n\n      var task = renderer('bpmn:Task')(p, element);\n      var pathData;\n\n      if (semantic.instantiate) {\n        drawCircle(p, 28, 28, 20 * 0.22, { strokeWidth: 1 });\n\n        pathData = pathMap.getScaledPath('TASK_TYPE_INSTANTIATING_SEND', {\n          abspos: {\n            x: 7.77,\n            y: 9.52\n          }\n        });\n      } else {\n\n        pathData = pathMap.getScaledPath('TASK_TYPE_SEND', {\n          xScaleFactor: 0.9,\n          yScaleFactor: 0.9,\n          containerWidth: 21,\n          containerHeight: 14,\n          position: {\n            mx: 0.3,\n            my: 0.4\n          }\n        });\n      }\n\n      var sendPath = drawPath(p, pathData, {\n        strokeWidth: 1\n      });\n\n      return task;\n    },\n    'bpmn:ScriptTask': function(p, element) {\n      var task = renderer('bpmn:Task')(p, element);\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SCRIPT', {\n        abspos: {\n          x: 15,\n          y: 20\n        }\n      });\n\n      var scriptPath = drawPath(p, pathData, {\n        strokeWidth: 1\n      });\n\n      return task;\n    },\n    'bpmn:BusinessRuleTask': function(p, element) {\n      var task = renderer('bpmn:Task')(p, element);\n\n      var headerPathData = pathMap.getScaledPath('TASK_TYPE_BUSINESS_RULE_HEADER', {\n        abspos: {\n          x: 8,\n          y: 8\n        }\n      });\n\n      var businessHeaderPath = drawPath(p, headerPathData);\n      businessHeaderPath.attr({\n        strokeWidth: 1,\n        fill: 'AAA'\n      });\n\n      var headerData = pathMap.getScaledPath('TASK_TYPE_BUSINESS_RULE_MAIN', {\n        abspos: {\n          x: 8,\n          y: 8\n        }\n      });\n\n      var businessPath = drawPath(p, headerData);\n      businessPath.attr({\n        strokeWidth: 1\n      });\n\n      return task;\n    },\n    'bpmn:SubProcess': function(p, element, attrs) {\n      var rect = renderer('bpmn:Activity')(p, element, attrs);\n\n      var semantic = getSemantic(element),\n          di = getDi(element);\n\n      var expanded = DiUtil.isExpanded(semantic);\n\n      var isEventSubProcess = !!semantic.triggeredByEvent;\n      if (isEventSubProcess) {\n        rect.attr({\n          strokeDasharray: '1,2'\n        });\n      }\n\n      renderEmbeddedLabel(p, element, expanded ? 'center-top' : 'center-middle');\n\n      if (expanded) {\n        attachTaskMarkers(p, element);\n      } else {\n        attachTaskMarkers(p, element, ['SubProcessMarker']);\n      }\n\n      return rect;\n    },\n    'bpmn:AdHocSubProcess': function(p, element) {\n      return renderer('bpmn:SubProcess')(p, element);\n    },\n    'bpmn:Transaction': function(p, element) {\n      var outer = renderer('bpmn:SubProcess')(p, element);\n\n      var innerAttrs = styles.style([ 'no-fill', 'no-events' ]);\n      var inner = drawRect(p, element.width, element.height, TASK_BORDER_RADIUS - 2, INNER_OUTER_DIST, innerAttrs);\n\n      return outer;\n    },\n    'bpmn:CallActivity': function(p, element) {\n      return renderer('bpmn:SubProcess')(p, element, {\n        strokeWidth: 5\n      });\n    },\n    'bpmn:Participant': function(p, element) {\n\n      var lane = renderer('bpmn:Lane')(p, element);\n\n      var expandedPool = DiUtil.isExpandedPool(getSemantic(element));\n\n      if (expandedPool) {\n        drawLine(p, [\n          { x: 30, y: 0 },\n          { x: 30, y: element.height }\n        ]);\n        var text = getSemantic(element).name;\n        renderLaneLabel(p, text, element);\n      } else {\n        // Collapsed pool draw text inline\n        var text2 = getSemantic(element).name;\n        renderLabel(p, text2, { box: element, align: 'center-middle' });\n      }\n\n      var participantMultiplicity = !!(getSemantic(element).participantMultiplicity);\n\n      if(participantMultiplicity) {\n        renderer('ParticipantMultiplicityMarker')(p, element);\n      }\n\n      return lane;\n    },\n    'bpmn:Lane': function(p, element) {\n      var rect = drawRect(p, element.width, element.height, 0, {\n        fill: 'none'\n      });\n\n      var semantic = getSemantic(element);\n\n      if (semantic.$type === 'bpmn:Lane') {\n        var text = semantic.name;\n        renderLaneLabel(p, text, element);\n      }\n\n      return rect;\n    },\n    'bpmn:InclusiveGateway': function(p, element) {\n      var diamond = drawDiamond(p, element.width, element.height);\n\n      var circle = drawCircle(p, element.width, element.height, element.height * 0.24, {\n        strokeWidth: 2.5,\n        fill: 'none'\n      });\n\n      return diamond;\n    },\n    'bpmn:ExclusiveGateway': function(p, element) {\n      var diamond = drawDiamond(p, element.width, element.height);\n\n      var pathData = pathMap.getScaledPath('GATEWAY_EXCLUSIVE', {\n        xScaleFactor: 0.4,\n        yScaleFactor: 0.4,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.32,\n          my: 0.3\n        }\n      });\n\n      if (!!(getDi(element).isMarkerVisible)) {\n        drawPath(p, pathData, {\n          strokeWidth: 1,\n          fill: 'black'\n        });\n      }\n\n      return diamond;\n    },\n    'bpmn:ComplexGateway': function(p, element) {\n      var diamond = drawDiamond(p, element.width, element.height);\n\n      var pathData = pathMap.getScaledPath('GATEWAY_COMPLEX', {\n        xScaleFactor: 0.5,\n        yScaleFactor:0.5,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.46,\n          my: 0.26\n        }\n      });\n\n      var complexPath = drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: 'black'\n      });\n\n      return diamond;\n    },\n    'bpmn:ParallelGateway': function(p, element) {\n      var diamond = drawDiamond(p, element.width, element.height);\n\n      var pathData = pathMap.getScaledPath('GATEWAY_PARALLEL', {\n        xScaleFactor: 0.6,\n        yScaleFactor:0.6,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.46,\n          my: 0.2\n        }\n      });\n\n      var parallelPath = drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: 'black'\n      });\n\n      return diamond;\n    },\n    'bpmn:EventBasedGateway': function(p, element) {\n\n      var semantic = getSemantic(element);\n\n      var diamond = drawDiamond(p, element.width, element.height);\n\n      var outerCircle = drawCircle(p, element.width, element.height, element.height * 0.20, {\n        strokeWidth: 1,\n        fill: 'none'\n      });\n\n      var type = semantic.eventGatewayType;\n      var instantiate = !!semantic.instantiate;\n\n      function drawEvent() {\n\n        var pathData = pathMap.getScaledPath('GATEWAY_EVENT_BASED', {\n          xScaleFactor: 0.18,\n          yScaleFactor: 0.18,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.36,\n            my: 0.44\n          }\n        });\n\n        var eventPath = drawPath(p, pathData, {\n          strokeWidth: 2,\n          fill: 'none'\n        });\n      }\n\n      if (type === 'Parallel') {\n\n        var pathData = pathMap.getScaledPath('GATEWAY_PARALLEL', {\n          xScaleFactor: 0.4,\n          yScaleFactor:0.4,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.474,\n            my: 0.296\n          }\n        });\n\n        var parallelPath = drawPath(p, pathData);\n        parallelPath.attr({\n          strokeWidth: 1,\n          fill: 'none'\n        });\n      } else if (type === 'Exclusive') {\n\n        if (!instantiate) {\n          var innerCircle = drawCircle(p, element.width, element.height, element.height * 0.26);\n          innerCircle.attr({\n            strokeWidth: 1,\n            fill: 'none'\n          });\n        }\n\n        drawEvent();\n      }\n\n\n      return diamond;\n    },\n    'bpmn:Gateway': function(p, element) {\n      return drawDiamond(p, element.width, element.height);\n    },\n    'bpmn:SequenceFlow': function(p, element) {\n      var pathData = createPathFromConnection(element);\n      var path = drawPath(p, pathData, {\n        markerEnd: marker('sequenceflow-end')\n      });\n\n      var sequenceFlow = getSemantic(element);\n      var source = element.source.businessObject;\n\n      // conditional flow marker\n      if (sequenceFlow.conditionExpression && source.$instanceOf('bpmn:Task')) {\n        path.attr({\n          markerStart: marker('conditional-flow-marker')\n        });\n      }\n\n      // default marker\n      if (source.default && source.$instanceOf('bpmn:Gateway') && source.default === sequenceFlow) {\n        path.attr({\n          markerStart: marker('conditional-default-flow-marker')\n        });\n      }\n\n      return path;\n    },\n    'bpmn:Association': function(p, element, attrs) {\n\n      attrs = _.extend({\n        strokeDasharray: '1,6',\n        strokeLinecap: 'round'\n      }, attrs || {});\n\n      // TODO(nre): style according to directed state\n      return drawLine(p, element.waypoints, attrs);\n    },\n    'bpmn:DataInputAssociation': function(p, element) {\n      return renderer('bpmn:Association')(p, element, {\n        markerEnd: marker('data-association-end')\n      });\n    },\n    'bpmn:DataOutputAssociation': function(p, element) {\n      return renderer('bpmn:Association')(p, element, {\n        markerEnd: marker('data-association-end')\n      });\n    },\n    'bpmn:MessageFlow': function(p, element) {\n\n      var di = getDi(element);\n\n      var pathData = createPathFromConnection(element);\n      var path = drawPath(p, pathData, {\n        markerEnd: marker('messageflow-end'),\n        markerStart: marker('messageflow-start'),\n        strokeDasharray: '10',\n        strokeLinecap: 'round',\n        strokeWidth: 1\n      });\n\n      if (!!di.messageVisibleKind) {\n        var midPoint = path.getPointAtLength(path.getTotalLength() / 2);\n\n        var markerPathData = pathMap.getScaledPath('MESSAGE_FLOW_MARKER', {\n          abspos: {\n            x: midPoint.x,\n            y: midPoint.y\n          }\n        });\n\n        var messageAttrs = { strokeWidth: 1 };\n\n        if (di.messageVisibleKind === 'initiating') {\n          messageAttrs.fill = 'white';\n          messageAttrs.stroke = 'black';\n        } else {\n          messageAttrs.fill = '#888';\n          messageAttrs.stroke = 'white';\n        }\n\n        drawPath(p, markerPathData, messageAttrs);\n      }\n\n      return path;\n    },\n    'bpmn:DataObject': function(p, element) {\n      var pathData = pathMap.getScaledPath('DATA_OBJECT_PATH', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.474,\n          my: 0.296\n        }\n      });\n\n      var elementObject = drawPath(p, pathData, { fill: 'white' });\n\n      var semantic = getSemantic(element);\n\n      if (isCollection(semantic)) {\n        renderDataItemCollection(p, element);\n      }\n\n      return elementObject;\n    },\n    'bpmn:DataObjectReference': as('bpmn:DataObject'),\n    'bpmn:DataInput': function(p, element) {\n\n      var arrowPathData = pathMap.getRawPath('DATA_ARROW');\n\n      // page\n      var elementObject = renderer('bpmn:DataObject')(p, element);\n\n      // arrow\n      var elementInput = drawPath(p, arrowPathData, { strokeWidth: 1 });\n\n      return elementObject;\n    },\n    'bpmn:DataOutput': function(p, element) {\n      var arrowPathData = pathMap.getRawPath('DATA_ARROW');\n\n      // page\n      var elementObject = renderer('bpmn:DataObject')(p, element);\n\n      // arrow\n      var elementInput = drawPath(p, arrowPathData, {\n        strokeWidth: 1,\n        fill: 'black'\n      });\n\n      return elementObject;\n    },\n    'bpmn:DataStoreReference': function(p, element) {\n      var DATA_STORE_PATH = pathMap.getScaledPath('DATA_STORE', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0,\n          my: 0.133\n        }\n      });\n\n      var elementStore = drawPath(p, DATA_STORE_PATH, {\n        strokeWidth: 2,\n        fill: 'white'\n      });\n\n      return elementStore;\n    },\n    'bpmn:BoundaryEvent': function(p, element) {\n\n      var semantic = getSemantic(element),\n          cancel = semantic.cancelActivity;\n\n      var attrs = {\n        strokeLinecap: 'round',\n        strokeWidth: 1\n      };\n\n      if (!cancel) {\n        attrs.strokeDasharray = '6';\n      }\n\n      var outer = renderer('bpmn:Event')(p, element, attrs);\n      var inner = drawCircle(p, element.width, element.height, INNER_OUTER_DIST, attrs);\n\n      renderEventContent(element, p);\n\n      return outer;\n    },\n    'bpmn:Group': function(p, element) {\n      return drawRect(p, element.width, element.height, TASK_BORDER_RADIUS, {\n        strokeWidth: 1,\n        strokeDasharray: '8,3,1,3',\n        fill: 'none',\n        pointerEvents: 'none'\n      });\n    },\n    'label': function(p, element) {\n      return renderExternalLabel(p, element, '');\n    },\n    'bpmn:TextAnnotation': function(p, element) {\n      var style = {\n        'fill': 'none',\n        'stroke': 'none'\n      };\n      var textElement = drawRect(p, element.width, element.width, 0, 0, style);\n      var textPathData = pathMap.getScaledPath('TEXT_ANNOTATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.0,\n          my: 0.0\n        }\n      });\n      drawPath(p, textPathData);\n\n      var text = getSemantic(element).text || '';\n      renderLabel(p, text, { box: element, align: 'left-middle', padding: 5 });\n\n      return textElement;\n    },\n    'ParticipantMultiplicityMarker': function(p, element) {\n      var subProcessPath = pathMap.getScaledPath('MARKER_PARALLEL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2) / element.width),\n          my: (element.height - 15) / element.height\n        }\n      });\n\n      drawPath(p, subProcessPath);\n    },\n    'SubProcessMarker': function(p, element) {\n      var markerRect = drawRect(p, 14, 14, 0, {\n        strokeWidth: 1\n      });\n\n      // Process marker is placed in the middle of the box\n      // therefore fixed values can be used here\n      markerRect.transform('translate(' + (element.width / 2 - 7.5) + ',' + (element.height - 20) + ')');\n\n      var subProcessPath = pathMap.getScaledPath('MARKER_SUB_PROCESS', {\n        xScaleFactor: 1.5,\n        yScaleFactor: 1.5,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: (element.width / 2 - 7.5) / element.width,\n          my: (element.height - 20) / element.height\n        }\n      });\n\n      drawPath(p, subProcessPath);\n    },\n    'ParallelMarker': function(p, element, position) {\n      var subProcessPath = pathMap.getScaledPath('MARKER_PARALLEL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.parallel) / element.width),\n          my: (element.height - 20) / element.height\n        }\n      });\n      drawPath(p, subProcessPath);\n    },\n    'SequentialMarker': function(p, element, position) {\n      var sequentialPath = pathMap.getScaledPath('MARKER_SEQUENTIAL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.seq) / element.width),\n          my: (element.height - 19) / element.height\n        }\n      });\n      drawPath(p, sequentialPath);\n    },\n    'CompensationMarker': function(p, element, position) {\n      var compensationPath = pathMap.getScaledPath('MARKER_COMPENSATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.compensation) / element.width),\n          my: (element.height - 13) / element.height\n        }\n      });\n      drawPath(p, compensationPath, { strokeWidth: 1 });\n    },\n    'LoopMarker': function(p, element, position) {\n      var loopPath = pathMap.getScaledPath('MARKER_LOOP', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.loop) / element.width),\n          my: (element.height - 7) / element.height\n        }\n      });\n\n      drawPath(p, loopPath, {\n        strokeWidth: 1,\n        fill: 'none',\n        strokeLinecap: 'round',\n        strokeMiterlimit: 0.5\n      });\n    },\n    'AdhocMarker': function(p, element, position) {\n      var loopPath = pathMap.getScaledPath('MARKER_ADHOC', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.adhoc) / element.width),\n          my: (element.height - 15) / element.height\n        }\n      });\n\n      drawPath(p, loopPath, {\n        strokeWidth: 1,\n        fill: 'black'\n      });\n    }\n  };\n\n  function attachTaskMarkers(p, element, taskMarkers) {\n    var obj = getSemantic(element);\n\n    var subprocess = _.contains(taskMarkers, 'SubProcessMarker');\n    var position;\n\n    if (subprocess) {\n      position = {\n        seq: -21,\n        parallel: -22,\n        compensation: -42,\n        loop: -18,\n        adhoc: 10\n      };\n    } else {\n      position = {\n        seq: -3,\n        parallel: -6,\n        compensation: -27,\n        loop: 0,\n        adhoc: 10\n      };\n    }\n\n    _.forEach(taskMarkers, function(marker) {\n      renderer(marker)(p, element, position);\n    });\n\n    if (obj.$type === 'bpmn:AdHocSubProcess') {\n      renderer('AdhocMarker')(p, element, position);\n    }\n    if (obj.loopCharacteristics && obj.loopCharacteristics.isSequential === undefined) {\n      renderer('LoopMarker')(p, element, position);\n      return;\n    }\n    if (obj.loopCharacteristics &&\n      obj.loopCharacteristics.isSequential !== undefined &&\n      !obj.loopCharacteristics.isSequential) {\n      renderer('ParallelMarker')(p, element, position);\n    }\n    if (obj.loopCharacteristics && !!obj.loopCharacteristics.isSequential) {\n      renderer('SequentialMarker')(p, element, position);\n    }\n    if (!!obj.isForCompensation) {\n      renderer('CompensationMarker')(p, element, position);\n    }\n  }\n\n  function drawShape(parent, element) {\n    var type = element.type;\n    var h = handlers[type];\n\n    /* jshint -W040 */\n    if (!h) {\n      return DefaultRenderer.prototype.drawShape.apply(this, [ parent, element ]);\n    } else {\n      return h(parent, element);\n    }\n  }\n\n  function drawConnection(parent, element) {\n    var type = element.type;\n    var h = handlers[type];\n\n    /* jshint -W040 */\n    if (!h) {\n      return DefaultRenderer.prototype.drawConnection.apply(this, [ parent, element ]);\n    } else {\n      return h(parent, element);\n    }\n  }\n\n  function renderDataItemCollection(p, element) {\n\n    var yPosition = (element.height - 16) / element.height;\n\n    var pathData = pathMap.getScaledPath('DATA_OBJECT_COLLECTION_PATH', {\n      xScaleFactor: 1,\n      yScaleFactor: 1,\n      containerWidth: element.width,\n      containerHeight: element.height,\n      position: {\n        mx: 0.451,\n        my: yPosition\n      }\n    });\n\n    var collectionPath = drawPath(p, pathData, {\n      strokeWidth: 2\n    });\n  }\n\n  function isCollection(element, filter) {\n    return element.isCollection ||\n           (element.elementObjectRef && element.elementObjectRef.isCollection);\n  }\n\n  function getDi(element) {\n    return element.businessObject.di;\n  }\n\n  function getSemantic(element) {\n    return element.businessObject;\n  }\n\n  /**\n   * Checks if eventDefinition of the given element matches with semantic type.\n   *\n   * @return {boolean} true if element is of the given semantic type\n   */\n  function isTypedEvent(event, eventDefinitionType, filter) {\n\n    function matches(definition, filter) {\n      return _.all(filter, function(val, key) {\n\n        // we want a == conversion here, to be able to catch\n        // undefined == false and friends\n        /* jshint -W116 */\n        return definition[key] == val;\n      });\n    }\n\n    return _.any(event.eventDefinitions, function(definition) {\n      return definition.$type === eventDefinitionType && matches(event, filter);\n    });\n  }\n\n  function isThrowEvent(event) {\n    return (event.$type === 'bpmn:IntermediateThrowEvent') || (event.$type === 'bpmn:EndEvent');\n  }\n\n  // hook onto canvas init event to initialize\n  // connection start/end markers on paper\n  events.on('canvas.init', function(event) {\n    var paper = event.paper;\n\n    initMarkers(paper);\n  });\n\n  this.drawShape = drawShape;\n  this.drawConnection = drawConnection;\n}\n\nBpmnRenderer.prototype = Object.create(DefaultRenderer.prototype);\n\n\nBpmnRenderer.$inject = [ 'eventBus', 'styles', 'pathMap' ];\n\nmodule.exports = BpmnRenderer;\n},{\"../util/Di\":9,\"diagram-js/lib/draw/Renderer\":40,\"diagram-js/lib/util/Text\":58}],5:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Map containing SVG paths needed by BpmnRenderer.\n */\n\nfunction PathMap(Snap) {\n\n  /**\n   * Contains a map of path elements\n   *\n   * <h1>Path definition</h1>\n   * A parameterized path is defined like this:\n   * <pre>\n   * 'GATEWAY_PARALLEL': {\n   *   d: 'm {mx},{my} {e.x0},0 0,{e.x1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} ' +\n          '-{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z',\n   *   height: 17.5,\n   *   width:  17.5,\n   *   heightElements: [2.5, 7.5],\n   *   widthElements: [2.5, 7.5]\n   * }\n   * </pre>\n   * <p>It's important to specify a correct <b>height and width</b> for the path as the scaling\n   * is based on the ratio between the specified height and width in this object and the\n   * height and width that is set as scale target (Note x,y coordinates will be scaled with\n   * individual ratios).</p>\n   * <p>The '<b>heightElements</b>' and '<b>widthElements</b>' array must contain the values that will be scaled.\n   * The scaling is based on the computed ratios.\n   * Coordinates on the y axis should be in the <b>heightElement</b>'s array, they will be scaled using\n   * the computed ratio coefficient.\n   * In the parameterized path the scaled values can be accessed through the 'e' object in {} brackets.\n   *   <ul>\n   *    <li>The values for the y axis can be accessed in the path string using {e.y0}, {e.y1}, ....</li>\n   *    <li>The values for the x axis can be accessed in the path string using {e.x0}, {e.x1}, ....</li>\n   *   </ul>\n   *   The numbers x0, x1 respectively y0, y1, ... map to the corresponding array index.\n   * </p>\n   */\n  this.pathMap = {\n    'EVENT_MESSAGE': {\n      d: 'm {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}',\n      height: 36,\n      width:  36,\n      heightElements: [6, 14],\n      widthElements: [10.5, 21]\n    },\n    'EVENT_SIGNAL': {\n      d: 'M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z',\n      height: 36,\n      width: 36,\n      heightElements: [18],\n      widthElements: [10, 20]\n    },\n    'EVENT_ESCALATION': {\n      d: 'm {mx},{my} c -{e.x1},{e.y0} -{e.x3},{e.y1} -{e.x5},{e.y4} {e.x1},-{e.y3} {e.x3},-{e.y5} {e.x5},-{e.y6} ' +\n        '{e.x0},{e.y3} {e.x2},{e.y5} {e.x4},{e.y6} -{e.x0},-{e.y0} -{e.x2},-{e.y1} -{e.x4},-{e.y4} z',\n      height: 36,\n      width: 36,\n      heightElements: [2.382, 4.764, 4.926, 6.589333, 7.146, 13.178667, 19.768],\n      widthElements: [2.463, 2.808, 4.926, 5.616, 7.389, 8.424]\n    },\n    'EVENT_CONDITIONAL': {\n      d: 'M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z ' +\n         'M {e.x2},{e.y3} l {e.x0},0 ' +\n         'M {e.x2},{e.y4} l {e.x0},0 ' +\n         'M {e.x2},{e.y5} l {e.x0},0 ' +\n         'M {e.x2},{e.y6} l {e.x0},0 ' +\n         'M {e.x2},{e.y7} l {e.x0},0 ' +\n         'M {e.x2},{e.y8} l {e.x0},0 ',\n      height: 36,\n      width:  36,\n      heightElements: [8.5, 14.5, 18, 11.5, 14.5, 17.5, 20.5, 23.5, 26.5],\n      widthElements:  [10.5, 14.5, 12.5]\n    },\n    'EVENT_LINK': {\n      d: 'm {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z',\n      height: 36,\n      width: 36,\n      heightElements: [4.4375, 6.75, 7.8125],\n      widthElements: [9.84375, 13.5]\n    },\n    'EVENT_ERROR': {\n      d: 'm {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z',\n      height: 36,\n      width: 36,\n      heightElements: [0.023, 8.737, 8.151, 16.564, 10.591, 8.714],\n      widthElements: [0.085, 6.672, 6.97, 4.273, 5.337, 6.636]\n    },\n    'EVENT_CANCEL_45': {\n      d: 'm {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 ' +\n        '0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z',\n      height: 36,\n      width: 36,\n      heightElements: [4.75, 8.5],\n      widthElements: [4.75, 8.5]\n    },\n    'EVENT_COMPENSATION': {\n      d: 'm {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x0},0 {e.x0},-{e.y0} 0,{e.y1} z',\n      height: 36,\n      width: 36,\n      heightElements: [5, 10],\n      widthElements: [10]\n    },\n    'EVENT_TIMER_WH': {\n      d: 'M {mx},{my} m -{e.x1},-{e.y1} l {e.x1},{e.y1} l {e.x0},-{e.y0}',\n      height: 36,\n      width:  36,\n      heightElements: [3.5,4],\n      widthElements: [8.75,10.5]\n    },\n    'EVENT_MULTIPLE': {\n      d:'m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z',\n      height: 36,\n      width:  36,\n      heightElements: [6.28099, 12.56199],\n      widthElements: [3.1405, 9.42149, 12.56198]\n    },\n    'EVENT_PARALLEL_MULTIPLE': {\n      d:'m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} ' +\n        '-{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z',\n      height: 36,\n      width:  36,\n      heightElements: [2.56228, 7.68683],\n      widthElements: [2.56228, 7.68683]\n    },\n    'GATEWAY_EXCLUSIVE': {\n      d:'m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} ' +\n                    '{e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} ' +\n                    '{e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z',\n      height: 17.5,\n      width:  17.5,\n      heightElements: [8.5, 6.5312, -6.5312, -8.5],\n      widthElements:  [6.5, -6.5, 3, -3, 5, -5]\n    },\n    'GATEWAY_PARALLEL': {\n      d:'m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 ' +\n        '0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z',\n      height: 30,\n      width:  30,\n      heightElements: [5, 12.5],\n      widthElements: [5, 12.5]\n    },\n    'GATEWAY_EVENT_BASED': {\n      d:'m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z',\n      height: 11,\n      width:  11,\n      heightElements: [-6, 6, 12, -12],\n      widthElements: [9, -3, -12]\n    },\n    'GATEWAY_COMPLEX': {\n      d:'m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} ' +\n        '{e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} ' +\n        '{e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} ' +\n        '-{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z',\n      height: 17.125,\n      width:  17.125,\n      heightElements: [4.875, 3.4375, 2.125, 3],\n      widthElements: [3.4375, 2.125, 4.875, 3]\n    },\n    'DATA_OBJECT_PATH': {\n      d:'m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0',\n      height: 61,\n      width:  51,\n      heightElements: [10, 50, 60],\n      widthElements: [10, 40, 50, 60]\n    },\n    'DATA_OBJECT_COLLECTION_PATH': {\n      d:'m {mx}, {my} ' +\n        'm  0 15  l 0 -15 ' +\n        'm  4 15  l 0 -15 ' +\n        'm  4 15  l 0 -15 ',\n      height: 61,\n      width:  51,\n      heightElements: [12],\n      widthElements: [1, 6, 12, 15]\n    },\n    'DATA_ARROW': {\n      d:'m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z',\n      height: 61,\n      width:  51,\n      heightElements: [],\n      widthElements: []\n    },\n    'DATA_STORE': {\n      d:'m  {mx},{my} ' +\n        'l  0,{e.y2} ' +\n        'c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 ' +\n        'l  0,-{e.y2} ' +\n        'c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0' +\n        'c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 ' +\n        'm  -{e.x2},{e.y0}' +\n        'c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0' +\n        'm  -{e.x2},{e.y0}' +\n        'c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0',\n      height: 61,\n      width:  61,\n      heightElements: [7, 10, 45],\n      widthElements:  [2, 58, 60]\n    },\n    'TEXT_ANNOTATION': {\n      d: 'm {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0',\n      height: 30,\n      width: 10,\n      heightElements: [30],\n      widthElements: [10]\n    },\n    'MARKER_SUB_PROCESS': {\n      d: 'm{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0',\n      height: 10,\n      width: 10,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_PARALLEL': {\n      d: 'm{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10',\n      height: 10,\n      width: 10,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_SEQUENTIAL': {\n      d: 'm{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0',\n      height: 10,\n      width: 10,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_COMPENSATION': {\n      d: 'm {mx},{my} 8,-5 0,10 z m 9,0 8,-5 0,10 z',\n      height: 10,\n      width: 21,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_LOOP': {\n      d: 'm {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 ' +\n        '-6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 ' +\n        '0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 ' +\n        'l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902',\n      height: 13.9,\n      width: 13.7,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_ADHOC': {\n      d: 'm {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 ' +\n        '3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 ' +\n        '1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 ' +\n        '-3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 ' +\n        '-2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z',\n      height: 4,\n      width: 15,\n      heightElements: [],\n      widthElements: []\n    },\n    'TASK_TYPE_SEND': {\n      d: 'm {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}',\n      height: 14,\n      width:  21,\n      heightElements: [6, 14],\n      widthElements: [10.5, 21]\n    },\n    'TASK_TYPE_SCRIPT': {\n      d: 'm {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 ' +\n        'c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z ' +\n        'm -7,-12 l 5,0 ' +\n        'm -4.5,3 l 4.5,0 ' +\n        'm -3,3 l 5,0' +\n        'm -4,3 l 5,0',\n      height: 15,\n      width:  12.6,\n      heightElements: [6, 14],\n      widthElements: [10.5, 21]\n    },\n    'TASK_TYPE_USER_1': {\n      d: 'm {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 ' +\n        '-4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 ' +\n        '0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 ' +\n        'h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 z' +\n        'm -8,6 l 0,5.5 m 11,0 l 0,-5'\n    },\n    'TASK_TYPE_USER_2': {\n      d: 'm {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 ' +\n        '-2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 '\n    },\n    'TASK_TYPE_USER_3': {\n      d: 'm {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 ' +\n        '4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 ' +\n        '-4.20799998,3.36699999 -4.20699998,4.34799999 z'\n    },\n    'TASK_TYPE_MANUAL': {\n      d: 'm {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 ' +\n        '-0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 ' +\n        '0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 ' +\n        '-1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 ' +\n        '0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 ' +\n        '-10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 ' +\n        '2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 ' +\n        '-0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 ' +\n        '-1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 ' +\n        '-0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 ' +\n        '0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 ' +\n        '-5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z'\n    },\n    'TASK_TYPE_INSTANTIATING_SEND': {\n      d: 'm {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6'\n    },\n    'TASK_TYPE_SERVICE': {\n      d: 'm {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 ' +\n        '0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 ' +\n        '-1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 ' +\n        'v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 ' +\n        '-0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 ' +\n        '-1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 ' +\n        'h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 ' +\n        '-0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 ' +\n        'c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 ' +\n        'l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 ' +\n        '0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 ' +\n        'c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z ' +\n        'm 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 ' +\n        '0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 ' +\n        '0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z'\n    },\n    'TASK_TYPE_SERVICE_FILL': {\n      d: 'm {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 ' +\n        '0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 ' +\n        '0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z'\n    },\n    'TASK_TYPE_BUSINESS_RULE_HEADER': {\n      d: 'm {mx},{my} 0,4 20,0 0,-4 z'\n    },\n    'TASK_TYPE_BUSINESS_RULE_MAIN': {\n      d: 'm {mx},{my} 0,12 20,0 0,-12 z' +\n        'm 0,8 l 20,0 ' +\n        'm -13,-4 l 0,8'\n    },\n    'MESSAGE_FLOW_MARKER': {\n      d: 'm {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6'\n    }\n  };\n\n  this.getRawPath = function getRawPath(pathId) {\n    return this.pathMap[pathId].d;\n  };\n\n  /**\n   * Scales the path to the given height and width.\n   * <h1>Use case</h1>\n   * <p>Use case is to scale the content of elements (event, gateways) based\n   * on the element bounding box's size.\n   * </p>\n   * <h1>Why not transform</h1>\n   * <p>Scaling a path with transform() will also scale the stroke and IE does not support\n   * the option 'non-scaling-stroke' to prevent this.\n   * Also there are use cases where only some parts of a path should be\n   * scaled.</p>\n   *\n   * @param {String} pathId The ID of the path.\n   * @param {Object} param <p>\n   *   Example param object scales the path to 60% size of the container (data.width, data.height).\n   *   <pre>\n   *   {\n   *     xScaleFactor: 0.6,\n   *     yScaleFactor:0.6,\n   *     containerWidth: data.width,\n   *     containerHeight: data.height,\n   *     position: {\n   *       mx: 0.46,\n   *       my: 0.2,\n   *     }\n   *   }\n   *   </pre>\n   *   <ul>\n   *    <li>targetpathwidth = xScaleFactor * containerWidth</li>\n   *    <li>targetpathheight = yScaleFactor * containerHeight</li>\n   *    <li>Position is used to set the starting coordinate of the path. M is computed:\n    *    <ul>\n    *      <li>position.x * containerWidth</li>\n    *      <li>position.y * containerHeight</li>\n    *    </ul>\n    *    Center of the container <pre> position: {\n   *       mx: 0.5,\n   *       my: 0.5,\n   *     }</pre>\n   *     Upper left corner of the container\n   *     <pre> position: {\n   *       mx: 0.0,\n   *       my: 0.0,\n   *     }</pre>\n   *    </li>\n   *   </ul>\n   * </p>\n   *\n   */\n  this.getScaledPath = function getScaledPath(pathId, param) {\n    var rawPath = this.pathMap[pathId];\n\n    // positioning\n    // compute the start point of the path\n    var mx, my;\n\n    if(!!param.abspos) {\n      mx = param.abspos.x;\n      my = param.abspos.y;\n    } else {\n      mx = param.containerWidth * param.position.mx;\n      my = param.containerHeight * param.position.my;\n    }\n\n    var coordinates = {}; //map for the scaled coordinates\n    if(param.position) {\n\n      // path\n      var heightRatio = (param.containerHeight / rawPath.height) * param.yScaleFactor;\n      var widthRatio = (param.containerWidth / rawPath.width) * param.xScaleFactor;\n\n\n      //Apply height ratio\n      for (var heightIndex = 0; heightIndex < rawPath.heightElements.length; heightIndex++) {\n        coordinates['y' + heightIndex] = rawPath.heightElements[heightIndex] * heightRatio;\n      }\n\n      //Apply width ratio\n      for (var widthIndex = 0; widthIndex < rawPath.widthElements.length; widthIndex++) {\n        coordinates['x' + widthIndex] = rawPath.widthElements[widthIndex] * widthRatio;\n      }\n    }\n\n    //Apply value to raw path\n    var path = Snap.format(\n      rawPath.d, {\n        mx: mx,\n        my: my,\n        e: coordinates\n      }\n    );\n    return path;\n  };\n}\n\n\nPathMap.$inject = [ 'snap' ];\n\nmodule.exports = PathMap;\n},{}],6:[function(_dereq_,module,exports){\nmodule.exports = {\n  __depends__: [ _dereq_('../core') ],\n  renderer: [ 'type', _dereq_('./BpmnRenderer') ],\n  pathMap: [ 'type', _dereq_('./PathMap') ]\n};\n},{\"../core\":3,\"./BpmnRenderer\":4,\"./PathMap\":5}],7:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Refs = _dereq_('object-refs');\n\nvar diRefs = new Refs({ name: 'bpmnElement', enumerable: true }, { name: 'di' });\n\n\nfunction BpmnTreeWalker(handler) {\n\n  // list of containers already walked\n  var handledProcesses = [];\n\n  // list of elements to handle deferred to ensure\n  // prerequisites are drawn\n  var deferred = [];\n\n  ///// Helpers /////////////////////////////////\n\n  function contextual(fn, ctx) {\n    return function(e) {\n      fn(e, ctx);\n    };\n  }\n\n  function is(element, type) {\n    return element.$instanceOf(type);\n  }\n\n  function visit(element, ctx) {\n\n    var gfx = element.gfx;\n\n    // avoid multiple rendering of elements\n    if (gfx) {\n      throw new Error('already rendered <' + element.id + '>');\n    }\n\n    // call handler\n    return handler.element(element, ctx);\n  }\n\n  function visitRoot(element, diagram) {\n    return handler.root(element, diagram);\n  }\n\n  function visitIfDi(element, ctx) {\n    try {\n      if (element.di) {\n        return visit(element, ctx);\n      }\n    } catch (e) {\n      logError(e.message, { element: element, error: e });\n    }\n  }\n\n  function logError(message, context) {\n    handler.error(message, context);\n  }\n\n  ////// DI handling ////////////////////////////\n\n  function registerDi(di) {\n    var bpmnElement = di.bpmnElement;\n\n    if (bpmnElement) {\n      diRefs.bind(bpmnElement, 'di');\n      bpmnElement.di = di;\n    } else {\n      logError('no bpmnElement for <' + di.$type + '#' + di.id + '>', { element: di });\n    }\n  }\n\n  function handleDiagram(diagram) {\n    handlePlane(diagram.plane);\n  }\n\n  function handlePlane(plane) {\n    registerDi(plane);\n\n    _.forEach(plane.planeElement, handlePlaneElement);\n  }\n\n  function handlePlaneElement(planeElement) {\n    registerDi(planeElement);\n  }\n\n\n  ////// Semantic handling //////////////////////\n\n  function handleDefinitions(definitions, diagram) {\n    // make sure we walk the correct bpmnElement\n\n    var diagrams = definitions.diagrams;\n\n    if (diagram && diagrams.indexOf(diagram) === -1) {\n      throw new Error('diagram not part of bpmn:Definitions');\n    }\n\n    if (!diagram && diagrams && diagrams.length) {\n      diagram = diagrams[0];\n    }\n\n    // no diagram -> nothing to import\n    if (!diagram) {\n      return;\n    }\n\n    // load DI from selected diagram only\n    handleDiagram(diagram);\n\n    var plane = diagram.plane,\n        rootElement = plane.bpmnElement;\n\n    if (!rootElement) {\n      throw new Error('no rootElement referenced in BPMNPlane <' + diagram.plane.id + '>');\n    }\n\n\n    var ctx = visitRoot(rootElement, plane);\n\n    if (is(rootElement, 'bpmn:Process')) {\n      handleProcess(rootElement, ctx);\n    } else if (is(rootElement, 'bpmn:Collaboration')) {\n      handleCollaboration(rootElement, ctx);\n\n      // force drawing of everything not yet drawn that is part of the target DI\n      handleUnhandledProcesses(definitions.rootElements, ctx);\n    } else {\n      throw new Error('unsupported root element for bpmndi:Diagram <' + rootElement.$type + '>');\n    }\n\n    // handle all deferred elements\n    handleDeferred(deferred);\n  }\n\n  function handleDeferred(deferred) {\n    _.forEach(deferred, function(d) { d(); });\n  }\n\n  function handleProcess(process, context) {\n    handleFlowElementsContainer(process, context);\n    handleIoSpecification(process.ioSpecification, context);\n\n    handleArtifacts(process.artifacts, context);\n\n    // log process handled\n    handledProcesses.push(process);\n  }\n\n  function handleUnhandledProcesses(rootElements) {\n\n    // walk through all processes that have not yet been drawn and draw them\n    // if they contain lanes with DI information.\n    // we do this to pass the free-floating lane test cases in the MIWG test suite\n    var processes = _.filter(rootElements, function(e) {\n      return is(e, 'bpmn:Process') && e.laneSets && handledProcesses.indexOf(e) === -1;\n    });\n\n    processes.forEach(contextual(handleProcess));\n  }\n\n  function handleMessageFlow(messageFlow, context) {\n    visitIfDi(messageFlow, context);\n  }\n\n  function handleMessageFlows(messageFlows, context) {\n    if (messageFlows) {\n      _.forEach(messageFlows, contextual(handleMessageFlow, context));\n    }\n  }\n\n  function handleDataAssociation(association, context) {\n    visitIfDi(association, context);\n  }\n\n  function handleDataInput(dataInput, context) {\n    visitIfDi(dataInput, context);\n  }\n\n  function handleDataOutput(dataOutput, context) {\n    visitIfDi(dataOutput, context);\n  }\n\n  function handleArtifact(artifact, context) {\n\n    // bpmn:TextAnnotation\n    // bpmn:Group\n    // bpmn:Association\n\n    visitIfDi(artifact, context);\n  }\n\n  function handleArtifacts(artifacts, context) {\n    _.forEach(artifacts, contextual(handleArtifact, context));\n  }\n\n  function handleIoSpecification(ioSpecification, context) {\n\n    if (!ioSpecification) {\n      return;\n    }\n\n    _.forEach(ioSpecification.dataInputs, contextual(handleDataInput, context));\n    _.forEach(ioSpecification.dataOutputs, contextual(handleDataOutput, context));\n  }\n\n  function handleSubProcess(subProcess, context) {\n    handleFlowElementsContainer(subProcess, context);\n    handleArtifacts(subProcess.artifacts, context);\n  }\n\n  function handleFlowNode(flowNode, context) {\n    var childCtx = visitIfDi(flowNode, context);\n\n    if (is(flowNode, 'bpmn:SubProcess')) {\n      handleSubProcess(flowNode, childCtx || context);\n    }\n  }\n\n  function handleSequenceFlow(sequenceFlow, context) {\n    visitIfDi(sequenceFlow, context);\n  }\n\n  function handleDataElement(dataObject, context) {\n    visitIfDi(dataObject, context);\n  }\n\n  function handleBoundaryEvent(dataObject, context) {\n    visitIfDi(dataObject, context);\n  }\n\n  function handleLane(lane, context) {\n    var newContext = visitIfDi(lane, context);\n\n    if (lane.childLaneSet) {\n      handleLaneSet(lane.childLaneSet, newContext || context);\n    } else {\n      var filterList = _.filter(lane.flowNodeRef, function(e) {\n        return e.$type !== 'bpmn:BoundaryEvent';\n      });\n      handleFlowElements(filterList, newContext || context);\n    }\n  }\n\n  function handleLaneSet(laneSet, context) {\n    _.forEach(laneSet.lanes, contextual(handleLane, context));\n  }\n\n  function handleLaneSets(laneSets, context) {\n    _.forEach(laneSets, contextual(handleLaneSet, context));\n  }\n\n  function handleFlowElementsContainer(container, context) {\n\n    if (container.laneSets) {\n      handleLaneSets(container.laneSets, context);\n      handleNonFlowNodes(container.flowElements);\n    } else {\n      handleFlowElements(container.flowElements, context);\n    }\n  }\n\n  function handleNonFlowNodes(flowElements, context) {\n    _.forEach(flowElements, function(e) {\n      if (is(e, 'bpmn:SequenceFlow')) {\n        deferred.push(function() {\n          handleSequenceFlow(e, context);\n        });\n      } else if (is(e, 'bpmn:BoundaryEvent')) {\n        deferred.unshift(function() {\n          handleBoundaryEvent(e, context);\n        });\n      } else if (is(e, 'bpmn:DataObject')) {\n        // SKIP (assume correct referencing via DataObjectReference)\n      } else if (is(e, 'bpmn:DataStoreReference')) {\n        handleDataElement(e, context);\n      } else if (is(e, 'bpmn:DataObjectReference')) {\n        handleDataElement(e, context);\n      }\n    });\n  }\n\n  function handleFlowElements(flowElements, context) {\n    _.forEach(flowElements, function(e) {\n      if (is(e, 'bpmn:SequenceFlow')) {\n        deferred.push(function() {\n          handleSequenceFlow(e, context);\n        });\n      } else if (is(e, 'bpmn:BoundaryEvent')) {\n        deferred.unshift(function() {\n          handleBoundaryEvent(e, context);\n        });\n      } else if (is(e, 'bpmn:FlowNode')) {\n        handleFlowNode(e, context);\n\n        if (is(e, 'bpmn:Activity')) {\n\n          handleIoSpecification(e.ioSpecification, context);\n\n          // defer handling of associations\n          deferred.push(function() {\n            _.forEach(e.dataInputAssociations, contextual(handleDataAssociation, context));\n            _.forEach(e.dataOutputAssociations, contextual(handleDataAssociation, context));\n          });\n        }\n      } else if (is(e, 'bpmn:DataObject')) {\n        // SKIP (assume correct referencing via DataObjectReference)\n      } else if (is(e, 'bpmn:DataStoreReference')) {\n        handleDataElement(e, context);\n      } else if (is(e, 'bpmn:DataObjectReference')) {\n        handleDataElement(e, context);\n      } else {\n        logError(\n          'unrecognized flowElement <' + e.$type + '> in context ' + (context ? context.id : null),\n          { element: e, context: context });\n      }\n    });\n  }\n\n  function handleParticipant(participant, context) {\n    var newCtx = visitIfDi(participant, context);\n\n    var process = participant.processRef;\n    if (process) {\n      handleProcess(process, newCtx || context);\n    }\n  }\n\n  function handleCollaboration(collaboration) {\n\n    _.forEach(collaboration.participants, contextual(handleParticipant));\n\n    handleArtifacts(collaboration.artifacts);\n\n    handleMessageFlows(collaboration.messageFlows);\n  }\n\n\n  ///// API ////////////////////////////////\n\n  return {\n    handleDefinitions: handleDefinitions\n  };\n}\n\nmodule.exports = BpmnTreeWalker;\n},{\"object-refs\":63}],8:[function(_dereq_,module,exports){\n'use strict';\n\nvar BpmnTreeWalker = _dereq_('./BpmnTreeWalker');\n\n\n/**\n * Import the definitions into a diagram.\n *\n * Errors and warnings are reported through the specified callback.\n *\n * @param  {Diagram} diagram\n * @param  {ModdleElement} definitions\n * @param  {Function} done the callback, invoked with (err, [ warning ]) once the import is done\n */\nfunction importBpmnDiagram(diagram, definitions, done) {\n\n  var importer = diagram.get('bpmnImporter'),\n      eventBus = diagram.get('eventBus');\n\n  var error,\n      warnings = [];\n\n  function parse(definitions) {\n\n    var visitor = {\n\n      root: function(element) {\n        return importer.add(element);\n      },\n\n      element: function(element, parentShape) {\n        return importer.add(element, parentShape);\n      },\n\n      error: function(message, context) {\n        warnings.push({ message: message, context: context });\n      }\n    };\n\n    var walker = new BpmnTreeWalker(visitor);\n\n    // import\n    walker.handleDefinitions(definitions);\n  }\n\n  eventBus.fire('import.start');\n\n  try {\n    parse(definitions);\n  } catch (e) {\n    error = e;\n  }\n\n  eventBus.fire(error ? 'import.error' : 'import.success', { error: error, warnings: warnings });\n  done(error, warnings);\n}\n\nmodule.exports.importBpmnDiagram = importBpmnDiagram;\n},{\"./BpmnTreeWalker\":7}],9:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports.isExpandedPool = function(semantic) {\n  return !!semantic.processRef;\n};\n\nmodule.exports.isExpanded = function(semantic) {\n  return !semantic.$instanceOf('bpmn:SubProcess') || semantic.di.isExpanded;\n};\n},{}],10:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\n\nvar DEFAULT_LABEL_SIZE = module.exports.DEFAULT_LABEL_SIZE = {\n  width: 90,\n  height: 20\n};\n\n\n/**\n * Returns true if the given semantic has an external label\n *\n * @param {BpmnElement} semantic\n * @return {Boolean} true if has label\n */\nmodule.exports.hasExternalLabel = function(semantic) {\n\n  return semantic.$instanceOf('bpmn:Event') ||\n         semantic.$instanceOf('bpmn:Gateway') ||\n         semantic.$instanceOf('bpmn:DataStoreReference') ||\n         semantic.$instanceOf('bpmn:DataObjectReference') ||\n         semantic.$instanceOf('bpmn:SequenceFlow') ||\n         semantic.$instanceOf('bpmn:MessageFlow');\n};\n\n\n/**\n * Get the middle of a number of waypoints\n *\n * @param  {Array<Point>} waypoints\n * @return {Point} the mid point\n */\nvar getWaypointsMid = module.exports.getWaypointsMid = function(waypoints) {\n\n  var mid = waypoints.length / 2 - 1;\n\n  var first = waypoints[Math.floor(mid)];\n  var second = waypoints[Math.ceil(mid + 0.01)];\n\n  return {\n    x: first.x + (second.x - first.x) / 2,\n    y: first.y + (second.y - first.y) / 2\n  };\n};\n\n\nvar getExternalLabelMid = module.exports.getExternalLabelMid = function(element) {\n\n  if (element.waypoints) {\n    return getWaypointsMid(element.waypoints);\n  } else {\n    return {\n      x: element.x + element.width / 2,\n      y: element.y + element.height + DEFAULT_LABEL_SIZE.height / 2\n    };\n  }\n};\n\n/**\n * Returns the bounds of an elements label, parsed from the elements DI or\n * generated from its bounds.\n *\n * @param {BpmnElement} semantic\n * @param {djs.model.Base} element\n */\nmodule.exports.getExternalLabelBounds = function(semantic, element) {\n\n  var mid,\n      size,\n      bounds,\n      di = semantic.di,\n      label = di.label;\n\n  if (label && label.bounds) {\n    bounds = label.bounds;\n\n    size = {\n      width: Math.max(DEFAULT_LABEL_SIZE.width, bounds.width),\n      height: bounds.height\n    };\n\n    mid = {\n      x: bounds.x + bounds.width / 2,\n      y: bounds.y\n    };\n  } else {\n\n    mid = getExternalLabelMid(element);\n\n    size = DEFAULT_LABEL_SIZE;\n  }\n\n  return _.extend({\n    x: mid.x - size.width / 2,\n    y: mid.y - size.height / 2\n  }, size);\n};\n},{}],11:[function(_dereq_,module,exports){\nmodule.exports = _dereq_('./lib/simple');\n},{\"./lib/simple\":13}],12:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Moddle = _dereq_('moddle'),\n    ModdleXml = _dereq_('moddle-xml');\n\n\nfunction createModel(packages) {\n  return new Moddle(packages);\n}\n\n/**\n * A sub class of {@link Moddle} with support for import and export of BPMN 2.0 xml files.\n *\n * @class BpmnModdle\n * @extends Moddle\n *\n * @param {Object|Array} packages to use for instantiating the model\n * @param {Object} [options] additional options to pass over\n */\nfunction BpmnModdle(packages, options) {\n  Moddle.call(this, packages, options);\n}\n\nBpmnModdle.prototype = Object.create(Moddle.prototype);\n\nmodule.exports = BpmnModdle;\n\n\n/**\n * Instantiates a BPMN model tree from a given xml string.\n *\n * @param {String}   xmlStr\n * @param {String}   [typeName]   name of the root element, defaults to 'bpmn:Definitions'\n * @param {Object}   [options]    options to pass to the underlying reader\n * @param {Function} done         callback that is invoked with (err, result, parseContext) once the import completes\n */\nBpmnModdle.prototype.fromXML = function(xmlStr, typeName, options, done) {\n\n  if (!_.isString(typeName)) {\n    done = options;\n    options = typeName;\n    typeName = 'bpmn:Definitions';\n  }\n\n  if (_.isFunction(options)) {\n    done = options;\n    options = {};\n  }\n\n  var reader = new ModdleXml.Reader(this, options);\n  var rootHandler = reader.handler(typeName);\n\n  reader.fromXML(xmlStr, rootHandler, done);\n};\n\n\n/**\n * Serializes a BPMN 2.0 object tree to XML.\n *\n * @param {String}   element    the root element, typically an instance of `bpmn:Definitions`\n * @param {Object}   [options]  to pass to the underlying writer\n * @param {Function} done       callback invoked with (err, xmlStr) once the import completes\n */\nBpmnModdle.prototype.toXML = function(element, options, done) {\n\n  if (_.isFunction(options)) {\n    done = options;\n    options = {};\n  }\n\n  var writer = new ModdleXml.Writer(options);\n  try {\n    var result = writer.toXML(element);\n    done(null, result);\n  } catch (e) {\n    done(e);\n  }\n};\n\n},{\"moddle\":19,\"moddle-xml\":14}],13:[function(_dereq_,module,exports){\nvar BpmnModdle = _dereq_('./bpmn-moddle');\n\nvar packages = {\n  bpmn: _dereq_('../resources/bpmn/json/bpmn.json'),\n  bpmndi: _dereq_('../resources/bpmn/json/bpmndi.json'),\n  dc: _dereq_('../resources/bpmn/json/dc.json'),\n  di: _dereq_('../resources/bpmn/json/di.json')\n};\n\nmodule.exports = function() {\n  return new BpmnModdle(packages);\n};\n},{\"../resources/bpmn/json/bpmn.json\":28,\"../resources/bpmn/json/bpmndi.json\":29,\"../resources/bpmn/json/dc.json\":30,\"../resources/bpmn/json/di.json\":31,\"./bpmn-moddle\":12}],14:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports.Reader = _dereq_('./lib/Reader');\nmodule.exports.Writer = _dereq_('./lib/Writer');\n},{\"./lib/Reader\":15,\"./lib/Writer\":16}],15:[function(_dereq_,module,exports){\n'use strict';\n\nvar sax = (window.sax),\n    _ = (window._);\n\nvar common = _dereq_('./common'),\n    Types = _dereq_('moddle').types,\n    Stack = _dereq_('tiny-stack'),\n    parseNameNs = _dereq_('moddle').ns.parseName,\n    aliasToName = common.aliasToName;\n\n\nfunction parseNodeAttributes(node) {\n  var nodeAttrs = node.attributes;\n\n  return _.reduce(nodeAttrs, function(result, v, k) {\n    var name, ns;\n\n    if (!v.local) {\n      name = v.prefix;\n    } else {\n      ns = parseNameNs(v.name, v.prefix);\n      name = ns.name;\n    }\n\n    result[name] = v.value;\n    return result;\n  }, {});\n}\n\n/**\n * Normalizes namespaces for a node given an optional default namespace and a\n * number of mappings from uris to default prefixes.\n *\n * @param  {XmlNode} node\n * @param  {Model} model the model containing all registered namespaces\n * @param  {Uri} defaultNsUri\n */\nfunction normalizeNamespaces(node, model, defaultNsUri) {\n  var uri, childUri, prefix;\n\n  uri = node.uri || defaultNsUri;\n\n  if (uri) {\n    var pkg = model.getPackage(uri);\n\n    if (pkg) {\n      prefix = pkg.prefix;\n    } else {\n      prefix = node.prefix;\n    }\n\n    node.prefix = prefix;\n    node.uri = uri;\n  }\n\n  _.forEach(node.attributes, function(attr) {\n    normalizeNamespaces(attr, model, null);\n  });\n}\n\n/**\n * A parse context.\n *\n * @class\n *\n * @param {ElementHandler} parseRoot the root handler for parsing a document\n */\nfunction Context(parseRoot) {\n\n  var elementsById = {};\n  var references = [];\n\n  var warnings = [];\n\n  this.addReference = function(reference) {\n    references.push(reference);\n  };\n\n  this.addElement = function(id, element) {\n\n    if (!id || !element) {\n      throw new Error('[xml-reader] id or ctx must not be null');\n    }\n\n    elementsById[id] = element;\n  };\n\n  this.addWarning = function (w) {\n    warnings.push(w);\n  };\n\n  this.warnings = warnings;\n  this.references = references;\n\n  this.elementsById = elementsById;\n\n  this.parseRoot = parseRoot;\n}\n\n\nfunction BaseHandler() {}\n\nBaseHandler.prototype.handleEnd = function() {};\nBaseHandler.prototype.handleText = function() {};\nBaseHandler.prototype.handleNode = function() {};\n\nfunction BodyHandler() {}\n\nBodyHandler.prototype = new BaseHandler();\n\nBodyHandler.prototype.handleText = function(text) {\n  this.body = (this.body || '') + text;\n};\n\nfunction ReferenceHandler(property, context) {\n  this.property = property;\n  this.context = context;\n}\n\nReferenceHandler.prototype = new BodyHandler();\n\nReferenceHandler.prototype.handleNode = function(node) {\n\n  if (this.element) {\n    throw new Error('expected no sub nodes');\n  } else {\n    this.element = this.createReference(node);\n  }\n\n  return this;\n};\n\nReferenceHandler.prototype.handleEnd = function() {\n  this.element.id = this.body;\n};\n\nReferenceHandler.prototype.createReference = function() {\n  return {\n    property: this.property.ns.name,\n    id: ''\n  };\n};\n\nfunction ValueHandler(propertyDesc, element) {\n  this.element = element;\n  this.propertyDesc = propertyDesc;\n}\n\nValueHandler.prototype = new BodyHandler();\n\nValueHandler.prototype.handleEnd = function() {\n\n  var value = this.body,\n      element = this.element,\n      propertyDesc = this.propertyDesc;\n\n  value = Types.coerceType(propertyDesc.type, value);\n\n  if (propertyDesc.isMany) {\n    element.get(propertyDesc.name).push(value);\n  } else {\n    element.set(propertyDesc.name, value);\n  }\n};\n\n\nfunction BaseElementHandler() {}\n\nBaseElementHandler.prototype = Object.create(BodyHandler.prototype);\n\nBaseElementHandler.prototype.handleNode = function(node) {\n  var parser = this;\n\n  if (!this.element) {\n    this.element = this.createElement(node);\n    var id = this.element.id;\n\n    if (id) {\n      this.context.addElement(id, this.element);\n    }\n  } else {\n    parser = this.handleChild(node);\n  }\n\n  return parser;\n};\n\n/**\n * @class XMLReader.ElementHandler\n *\n */\nfunction ElementHandler(model, type, context) {\n  this.model = model;\n  this.type = model.getType(type);\n  this.context = context;\n}\n\nElementHandler.prototype = new BaseElementHandler();\n\nElementHandler.prototype.addReference = function(reference) {\n  this.context.addReference(reference);\n};\n\nElementHandler.prototype.handleEnd = function() {\n\n  var value = this.body,\n      element = this.element,\n      descriptor = element.$descriptor,\n      bodyProperty = descriptor.bodyProperty;\n\n  if (bodyProperty && value !== undefined) {\n    value = Types.coerceType(bodyProperty.type, value);\n    element.set(bodyProperty.name, value);\n  }\n};\n\n/**\n * Create an instance of the model from the given node.\n *\n * @param  {Element} node the xml node\n */\nElementHandler.prototype.createElement = function(node) {\n  var attributes = parseNodeAttributes(node),\n      Type = this.type,\n      descriptor = Type.$descriptor,\n      context = this.context,\n      instance = new Type({});\n\n  _.forEach(attributes, function(value, name) {\n\n    var prop = descriptor.propertiesByName[name];\n\n    if (prop && prop.isReference) {\n      context.addReference({\n        element: instance,\n        property: prop.ns.name,\n        id: value\n      });\n    } else {\n      if (prop) {\n        value = Types.coerceType(prop.type, value);\n      }\n\n      instance.set(name, value);\n    }\n  });\n\n  return instance;\n};\n\nElementHandler.prototype.getPropertyForElement = function(nameNs) {\n  if (_.isString(nameNs)) {\n    nameNs = parseNameNs(nameNs);\n  }\n\n  var type = this.type,\n      model = this.model,\n      descriptor = type.$descriptor;\n\n  var propertyName = nameNs.name;\n\n  var property = descriptor.propertiesByName[propertyName];\n\n  // search for properties by name first\n  if (property) {\n    return property;\n  }\n\n  var pkg = model.getPackage(nameNs.prefix);\n\n  if (pkg) {\n    var typeName = nameNs.prefix + ':' + aliasToName(nameNs.localName, descriptor.$pkg),\n        elementType = model.getType(typeName);\n\n    // search for collection members later\n    property = _.find(descriptor.properties, function(p) {\n      return !p.isVirtual && !p.isReference && !p.isAttribute && elementType.hasType(p.type);\n    });\n\n    if (property) {\n      return _.extend({}, property, { effectiveType: elementType.$descriptor.name });\n    }\n  } else {\n    // parse unknown element (maybe extension)\n    property = _.find(descriptor.properties, function(p) {\n      return !p.isReference && !p.isAttribute && p.type === 'Element';\n    });\n\n    if (property) {\n      return property;\n    }\n  }\n\n  throw new Error('unrecognized element <' + nameNs.name + '>');\n};\n\nElementHandler.prototype.toString = function() {\n  return 'ElementDescriptor[' + this.type.$descriptor.name + ']';\n};\n\nElementHandler.prototype.valueHandler = function(propertyDesc, element) {\n  return new ValueHandler(propertyDesc, element);\n};\n\nElementHandler.prototype.referenceHandler = function(propertyDesc) {\n  return new ReferenceHandler(propertyDesc, this.context);\n};\n\nElementHandler.prototype.handler = function(type) {\n  if (type === 'Element') {\n    return new GenericElementHandler(this.model, type, this.context);\n  } else {\n    return new ElementHandler(this.model, type, this.context);\n  }\n};\n\n/**\n * Handle the child element parsing\n *\n * @param  {Element} node the xml node\n */\nElementHandler.prototype.handleChild = function(node) {\n  var nameNs = parseNameNs(node.local, node.prefix);\n\n  var propertyDesc, type, element, childHandler;\n\n  propertyDesc = this.getPropertyForElement(nameNs);\n  element = this.element;\n\n  type = propertyDesc.effectiveType || propertyDesc.type;\n\n  if (Types.isSimple(propertyDesc.type)) {\n    return this.valueHandler(propertyDesc, element);\n  }\n\n  if (propertyDesc.isReference) {\n    childHandler = this.referenceHandler(propertyDesc).handleNode(node);\n  } else {\n    childHandler = this.handler(type).handleNode(node);\n  }\n\n  var newElement = childHandler.element;\n\n  // child handles may decide to skip elements\n  // by not returning anything\n  if (newElement !== undefined) {\n\n    if (propertyDesc.isMany) {\n      element.get(propertyDesc.name).push(newElement);\n    } else {\n      element.set(propertyDesc.name, newElement);\n    }\n\n    if (propertyDesc.isReference) {\n      _.extend(newElement, {\n        element: element\n      });\n\n      this.context.addReference(newElement);\n    } else {\n      // establish child -> parent relationship\n      newElement.$parent = element;\n    }\n  }\n\n  return childHandler;\n};\n\n\nfunction GenericElementHandler(model, type, context) {\n  this.model = model;\n  this.context = context;\n}\n\nGenericElementHandler.prototype = Object.create(BaseElementHandler.prototype);\n\nGenericElementHandler.prototype.createElement = function(node) {\n\n  var name = node.name,\n      prefix = node.prefix,\n      uri = node.ns[prefix],\n      attributes = node.attributes;\n\n  return this.model.createAny(name, uri, attributes);\n};\n\nGenericElementHandler.prototype.handleChild = function(node) {\n\n  var handler = new GenericElementHandler(this.model, 'Element', this.context).handleNode(node),\n      element = this.element;\n\n  var newElement = handler.element,\n      children;\n\n  if (newElement !== undefined) {\n    children = element.$children = element.$children || [];\n    children.push(newElement);\n\n    // establish child -> parent relationship\n    newElement.$parent = element;\n  }\n\n  return handler;\n};\n\nGenericElementHandler.prototype.handleText = function(text) {\n  this.body = this.body || '' + text;\n};\n\nGenericElementHandler.prototype.handleEnd = function() {\n  if (this.body) {\n    this.element.$body = this.body;\n  }\n};\n\n/**\n * A reader for a meta-model\n *\n * @class XMLReader\n *\n * @param {Model} model used to read xml files\n */\nfunction XMLReader(model) {\n  this.model = model;\n}\n\n\nXMLReader.prototype.fromXML = function(xml, rootHandler, done) {\n\n  var context = new Context(rootHandler);\n\n  var parser = sax.parser(true, { xmlns: true, trim: true }),\n      stack = new Stack();\n\n  var model = this.model,\n      self = this;\n\n  rootHandler.context = context;\n\n  // push root handler\n  stack.push(rootHandler);\n\n\n  function resolveReferences() {\n\n    var elementsById = context.elementsById;\n    var references = context.references;\n\n    var i, r;\n\n    for (i = 0; !!(r = references[i]); i++) {\n      var element = r.element;\n      var reference = elementsById[r.id];\n      var property = element.$descriptor.propertiesByName[r.property];\n\n      if (!reference) {\n        context.addWarning({\n          message: 'unresolved reference <' + r.id + '>',\n          element: r.element,\n          property: r.property,\n          value: r.id\n        });\n      }\n\n      if (property.isMany) {\n        var collection = element.get(property.name),\n            idx = collection.indexOf(r);\n\n        if (!reference) {\n          // remove unresolvable reference\n          collection.splice(idx, 1);\n        } else {\n          // update reference\n          collection[idx] = reference;\n        }\n      } else {\n        element.set(property.name, reference);\n      }\n    }\n  }\n\n  function handleClose(tagName) {\n    stack.pop().handleEnd();\n  }\n\n  function handleOpen(node) {\n    var handler = stack.peek();\n\n    normalizeNamespaces(node, model);\n\n    try {\n      stack.push(handler.handleNode(node));\n    } catch (e) {\n\n      var line = this.line,\n          column = this.column;\n\n      throw new Error(\n        'unparsable content <' + node.name + '> detected\\n\\t' +\n          'line: ' + line + '\\n\\t' +\n          'column: ' + column + '\\n\\t' +\n          'nested error: ' + e.message);\n    }\n  }\n\n  function handleText(text) {\n    stack.peek().handleText(text);\n  }\n\n  parser.onopentag = handleOpen;\n  parser.oncdata = parser.ontext = handleText;\n  parser.onclosetag = handleClose;\n  parser.onend = resolveReferences;\n\n  // deferred parse XML to make loading really ascnchronous\n  // this ensures the execution environment (node or browser)\n  // is kept responsive and that certain optimization strategies\n  // can kick in\n  _.defer(function() {\n    var error;\n\n    try {\n      parser.write(xml).close();\n    } catch (e) {\n      error = e;\n    }\n\n    done(error, error ? undefined : rootHandler.element, context);\n  });\n};\n\nXMLReader.prototype.handler = function(name) {\n  return new ElementHandler(this.model, name);\n};\n\nmodule.exports = XMLReader;\nmodule.exports.ElementHandler = ElementHandler;\n},{\"./common\":17,\"moddle\":19,\"tiny-stack\":18}],16:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Types = _dereq_('moddle').types,\n    common = _dereq_('./common'),\n    parseNameNs = _dereq_('moddle').ns.parseName,\n    nameToAlias = common.nameToAlias;\n\nvar XML_PREAMBLE = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n';\n\nvar CDATA_ESCAPE = /[<>\"&]+/;\n\nvar DEFAULT_NS_MAP = common.DEFAULT_NS_MAP;\n\n\nfunction nsName(ns) {\n  if (_.isString(ns)) {\n    return ns;\n  } else {\n    return (ns.prefix ? ns.prefix + ':' : '') + ns.localName;\n  }\n}\n\nfunction getElementNs(ns, descriptor) {\n  if (descriptor.isGeneric) {\n    return descriptor.name;\n  } else {\n    return _.extend({ localName: nameToAlias(descriptor.ns.localName, descriptor.$pkg) }, ns);\n  }\n}\n\nfunction getPropertyNs(ns, descriptor) {\n  return _.extend({ localName: descriptor.ns.localName }, ns);\n}\n\nfunction getSerializableProperties(element) {\n  var descriptor = element.$descriptor;\n\n  return _.filter(descriptor.properties, function(p) {\n    var name = p.name;\n\n    // do not serialize defaults\n    if (!element.hasOwnProperty(name)) {\n      return false;\n    }\n\n    var value = element[name];\n\n    // do not serialize default equals\n    if (value === p.default) {\n      return false;\n    }\n\n    return p.isMany ? value.length : true;\n  });\n}\n\n/**\n * Escape a string attribute to not contain any bad values (line breaks, '\"', ...)\n *\n * @param {String} str the string to escape\n * @return {String} the escaped string\n */\nfunction escapeAttr(str) {\n  var escapeMap = {\n    '\\n': '&#10;',\n    '\\n\\r': '&#10;',\n    '\"': '&quot;'\n  };\n\n  // ensure we are handling strings here\n  str = _.isString(str) ? str : '' + str;\n\n  return str.replace(/(\\n|\\n\\r|\")/g, function(str) {\n    return escapeMap[str];\n  });\n}\n\nfunction filterAttributes(props) {\n  return _.filter(props, function(p) { return p.isAttr; });\n}\n\nfunction filterContained(props) {\n  return _.filter(props, function(p) { return !p.isAttr; });\n}\n\n\nfunction ReferenceSerializer(parent, ns) {\n  this.ns = ns;\n}\n\nReferenceSerializer.prototype.build = function(element) {\n  this.element = element;\n  return this;\n};\n\nReferenceSerializer.prototype.serializeTo = function(writer) {\n  writer\n    .appendIndent()\n    .append('<' + nsName(this.ns) + '>' + this.element.id + '</' + nsName(this.ns) + '>')\n    .appendNewLine();\n};\n\nfunction BodySerializer() {}\n\nBodySerializer.prototype.serializeValue = BodySerializer.prototype.serializeTo = function(writer) {\n  var value = this.value,\n      escape = this.escape;\n\n  if (escape) {\n    writer.append('<![CDATA[');\n  }\n\n  writer.append(this.value);\n\n  if (escape) {\n    writer.append(']]>');\n  }\n};\n\nBodySerializer.prototype.build = function(prop, value) {\n  this.value = value;\n\n  if (prop.type === 'String' && CDATA_ESCAPE.test(value)) {\n    this.escape = true;\n  }\n\n  return this;\n};\n\nfunction ValueSerializer(ns) {\n  this.ns = ns;\n}\n\nValueSerializer.prototype = new BodySerializer();\n\nValueSerializer.prototype.serializeTo = function(writer) {\n\n  writer\n    .appendIndent()\n    .append('<' + nsName(this.ns) + '>');\n\n  this.serializeValue(writer);\n\n  writer\n    .append( '</' + nsName(this.ns) + '>')\n    .appendNewLine();\n};\n\nfunction ElementSerializer(parent, ns) {\n  this.body = [];\n  this.attrs = [];\n\n  this.parent = parent;\n  this.ns = ns;\n}\n\nElementSerializer.prototype.build = function(element) {\n  this.element = element;\n\n  var otherAttrs = this.parseNsAttributes(element);\n\n  if (!this.ns) {\n    this.ns = this.nsTagName(element.$descriptor);\n  }\n\n  if (element.$descriptor.isGeneric) {\n    this.parseGeneric(element);\n  } else {\n    var properties = getSerializableProperties(element);\n\n    this.parseAttributes(filterAttributes(properties));\n    this.parseContainments(filterContained(properties));\n\n    this.parseGenericAttributes(element, otherAttrs);\n  }\n\n  return this;\n};\n\nElementSerializer.prototype.nsTagName = function(descriptor) {\n  var effectiveNs = this.logNamespaceUsed(descriptor.ns);\n  return getElementNs(effectiveNs, descriptor);\n};\n\nElementSerializer.prototype.nsPropertyTagName = function(descriptor) {\n  var effectiveNs = this.logNamespaceUsed(descriptor.ns);\n  return getPropertyNs(effectiveNs, descriptor);\n};\n\nElementSerializer.prototype.isLocalNs = function(ns) {\n  return ns.uri === this.ns.uri;\n};\n\nElementSerializer.prototype.nsAttributeName = function(element) {\n\n  var ns;\n\n  if (_.isString(element)) {\n    ns = parseNameNs(element);\n  } else\n  if (element.ns) {\n    ns = element.ns;\n  }\n\n  var effectiveNs = this.logNamespaceUsed(ns);\n\n  // strip prefix if same namespace like parent\n  if (this.isLocalNs(effectiveNs)) {\n    return { localName: ns.localName };\n  } else {\n    return _.extend({ localName: ns.localName }, effectiveNs);\n  }\n};\n\nElementSerializer.prototype.parseGeneric = function(element) {\n\n  var self = this,\n      body = this.body,\n      attrs = this.attrs;\n\n  _.forEach(element, function(val, key) {\n\n    if (key === '$body') {\n      body.push(new BodySerializer().build({ type: 'String' }, val));\n    } else\n    if (key === '$children') {\n      _.forEach(val, function(child) {\n        body.push(new ElementSerializer(self).build(child));\n      });\n    } else\n    if (key.indexOf('$') !== 0) {\n      attrs.push({ name: key, value: escapeAttr(val) });\n    }\n  });\n};\n\n/**\n * Parse namespaces and return a list of left over generic attributes\n *\n * @param  {Object} element\n * @return {Array<Object>}\n */\nElementSerializer.prototype.parseNsAttributes = function(element) {\n  var self = this;\n\n  var genericAttrs = element.$attrs;\n\n  var attributes = [];\n\n  // parse namespace attributes first\n  // and log them. push non namespace attributes to a list\n  // and process them later\n  _.forEach(genericAttrs, function(value, name) {\n    var nameNs = parseNameNs(name);\n\n    if (nameNs.prefix === 'xmlns') {\n      self.logNamespace({ prefix: nameNs.localName, uri: value });\n    } else\n    if (!nameNs.prefix && nameNs.localName === 'xmlns') {\n      self.logNamespace({ uri: value });\n    } else {\n      attributes.push({ name: name, value: value });\n    }\n  });\n\n  return attributes;\n};\n\nElementSerializer.prototype.parseGenericAttributes = function(element, attributes) {\n\n  var self = this;\n\n  _.forEach(attributes, function(attr) {\n    try {\n      self.addAttribute(self.nsAttributeName(attr.name), attr.value);\n    } catch (e) {\n      console.warn('[writer] missing namespace information for ', attr.name, '=', attr.value, 'on', element, e);\n    }\n  });\n};\n\nElementSerializer.prototype.parseContainments = function(properties) {\n\n  var self = this,\n      body = this.body,\n      element = this.element,\n      typeDesc = element.$descriptor;\n\n  _.forEach(properties, function(p) {\n    var value = element.get(p.name),\n        isReference = p.isReference,\n        isMany = p.isMany;\n\n    var ns = self.nsPropertyTagName(p);\n\n    if (!isMany) {\n      value = [ value ];\n    }\n\n    if (p.isBody) {\n      body.push(new BodySerializer().build(p, value[0]));\n    } else\n    if (Types.isSimple(p.type)) {\n      _.forEach(value, function(v) {\n        body.push(new ValueSerializer(ns).build(p, v));\n      });\n    } else\n    if (isReference) {\n      _.forEach(value, function(v) {\n        body.push(new ReferenceSerializer(self, ns).build(v));\n      });\n    } else {\n      // allow serialization via type\n      // rather than element name\n      var asType = p.serialize === 'xsi:type';\n\n      _.forEach(value, function(v) {\n        var serializer;\n\n        if (asType) {\n          serializer = new TypeSerializer(self, ns);\n        } else {\n          serializer = new ElementSerializer(self);\n        }\n\n        body.push(serializer.build(v));\n      });\n    }\n  });\n};\n\nElementSerializer.prototype.getNamespaces = function() {\n  if (!this.parent) {\n    if (!this.namespaces) {\n      this.namespaces = {\n        prefixMap: {},\n        uriMap: {},\n        used: {}\n      };\n    }\n  } else {\n    this.namespaces = this.parent.getNamespaces();\n  }\n\n  return this.namespaces;\n};\n\nElementSerializer.prototype.logNamespace = function(ns) {\n  var namespaces = this.getNamespaces();\n\n  var existing = namespaces.uriMap[ns.uri];\n\n  if (!existing) {\n    namespaces.uriMap[ns.uri] = ns;\n  }\n\n  namespaces.prefixMap[ns.prefix] = ns.uri;\n\n  return ns;\n};\n\nElementSerializer.prototype.logNamespaceUsed = function(ns) {\n  var element = this.element,\n      model = element.$model,\n      namespaces = this.getNamespaces();\n\n  // ns may be\n  //\n  //   * prefix only\n  //   * prefix:uri\n\n  var prefix = ns.prefix;\n  var uri = ns.uri || DEFAULT_NS_MAP[prefix] ||\n            namespaces.prefixMap[prefix] || (model ? (model.getPackage(prefix) || {}).uri : null);\n\n  if (!uri) {\n    throw new Error('no namespace uri given for prefix <' + ns.prefix + '>');\n  }\n\n  ns = namespaces.uriMap[uri];\n\n  if (!ns) {\n    ns = this.logNamespace({ prefix: prefix, uri: uri });\n  }\n\n  if (!namespaces.used[ns.uri]) {\n    namespaces.used[ns.uri] = ns;\n  }\n\n  return ns;\n};\n\nElementSerializer.prototype.parseAttributes = function(properties) {\n  var self = this,\n      element = this.element;\n\n  _.forEach(properties, function(p) {\n    self.logNamespaceUsed(p.ns);\n\n    var value = element.get(p.name);\n\n    if (p.isReference) {\n      value = value.id;\n    }\n\n    self.addAttribute(self.nsAttributeName(p), value);\n  });\n};\n\nElementSerializer.prototype.addAttribute = function(name, value) {\n  var attrs = this.attrs;\n\n  if (_.isString(value)) {\n    value = escapeAttr(value);\n  }\n\n  attrs.push({ name: name, value: value });\n};\n\nElementSerializer.prototype.serializeAttributes = function(writer) {\n  var element = this.element,\n      attrs = this.attrs,\n      root = !this.parent,\n      namespaces = this.namespaces;\n\n  function collectNsAttrs() {\n    return _.collect(namespaces.used, function(ns) {\n      var name = 'xmlns' + (ns.prefix ? ':' + ns.prefix : '');\n      return { name: name, value: ns.uri };\n    });\n  }\n\n  if (root) {\n    attrs = collectNsAttrs().concat(attrs);\n  }\n\n  _.forEach(attrs, function(a) {\n    writer\n      .append(' ')\n      .append(nsName(a.name)).append('=\"').append(a.value).append('\"');\n  });\n};\n\nElementSerializer.prototype.serializeTo = function(writer) {\n  var hasBody = this.body.length;\n\n  writer\n    .appendIndent()\n    .append('<' + nsName(this.ns));\n\n  this.serializeAttributes(writer);\n\n  writer\n    .append(hasBody ? '>' : ' />')\n    .appendNewLine();\n\n  writer.indent();\n\n  _.forEach(this.body, function(b) {\n    b.serializeTo(writer);\n  });\n\n  writer.unindent();\n\n  if (hasBody) {\n    writer\n      .appendIndent()\n      .append('</' + nsName(this.ns) + '>')\n      .appendNewLine();\n  }\n};\n\n/**\n * A serializer for types that handles serialization of data types\n */\nfunction TypeSerializer(parent, ns) {\n  ElementSerializer.call(this, parent, ns);\n}\n\nTypeSerializer.prototype = new ElementSerializer();\n\nTypeSerializer.prototype.build = function(element) {\n  this.element = element;\n  this.typeNs = this.nsTagName(element.$descriptor);\n\n  return ElementSerializer.prototype.build.call(this, element);\n};\n\nTypeSerializer.prototype.isLocalNs = function(ns) {\n  return ns.uri === this.typeNs.uri;\n};\n\nfunction SavingWriter() {\n  this.value = '';\n\n  this.write = function(str) {\n    this.value += str;\n  };\n}\n\nfunction FormatingWriter(out, format) {\n\n  var indent = [''];\n\n  this.append = function(str) {\n    out.write(str);\n\n    return this;\n  };\n\n  this.appendNewLine = function() {\n    if (format) {\n      out.write('\\n');\n    }\n\n    return this;\n  };\n\n  this.appendIndent = function() {\n    if (format) {\n      out.write(indent.join('  '));\n    }\n\n    return this;\n  };\n\n  this.indent = function() {\n    indent.push('');\n    return this;\n  };\n\n  this.unindent = function() {\n    indent.pop();\n    return this;\n  };\n}\n\n/**\n * A writer for meta-model backed document trees\n *\n * @class XMLWriter\n */\nfunction XMLWriter(options) {\n\n  options = _.extend({ format: false, preamble: true }, options || {});\n\n  function toXML(tree, writer) {\n    var internalWriter = writer || new SavingWriter();\n    var formatingWriter = new FormatingWriter(internalWriter, options.format);\n\n    if (options.preamble) {\n      formatingWriter.append(XML_PREAMBLE);\n    }\n\n    new ElementSerializer().build(tree).serializeTo(formatingWriter);\n\n    if (!writer) {\n      return internalWriter.value;\n    }\n  }\n\n  return {\n    toXML: toXML\n  };\n}\n\nmodule.exports = XMLWriter;\n},{\"./common\":17,\"moddle\":19}],17:[function(_dereq_,module,exports){\n'use strict';\n\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nfunction lower(string) {\n  return string.charAt(0).toLowerCase() + string.slice(1);\n}\n\nfunction hasLowerCaseAlias(pkg) {\n  return pkg.xml && pkg.xml.alias === 'lowerCase';\n}\n\n\nmodule.exports.aliasToName = function(alias, pkg) {\n  if (hasLowerCaseAlias(pkg)) {\n    return capitalize(alias);\n  } else {\n    return alias;\n  }\n};\n\nmodule.exports.nameToAlias = function(name, pkg) {\n  if (hasLowerCaseAlias(pkg)) {\n    return lower(name);\n  } else {\n    return name;\n  }\n};\n\nmodule.exports.DEFAULT_NS_MAP = {\n  'xsi': 'http://www.w3.org/2001/XMLSchema-instance'\n};\n},{}],18:[function(_dereq_,module,exports){\n/**\n * Tiny stack for browser or server\n *\n * @author Jason Mulligan <jason.mulligan@avoidwork.com>\n * @copyright 2014 Jason Mulligan\n * @license BSD-3 <https://raw.github.com/avoidwork/tiny-stack/master/LICENSE>\n * @link http://avoidwork.github.io/tiny-stack\n * @module tiny-stack\n * @version 0.1.0\n */\n\n( function ( global ) {\n\n\"use strict\";\n\n/**\n * TinyStack\n *\n * @constructor\n */\nfunction TinyStack () {\n\tthis.data = [null];\n\tthis.top  = 0;\n}\n\n/**\n * Clears the stack\n *\n * @method clear\n * @memberOf TinyStack\n * @return {Object} {@link TinyStack}\n */\nTinyStack.prototype.clear = function clear () {\n\tthis.data = [null];\n\tthis.top  = 0;\n\n\treturn this;\n};\n\n/**\n * Gets the size of the stack\n *\n * @method length\n * @memberOf TinyStack\n * @return {Number} Size of stack\n */\nTinyStack.prototype.length = function length () {\n\treturn this.top;\n};\n\n/**\n * Gets the item at the top of the stack\n *\n * @method peek\n * @memberOf TinyStack\n * @return {Mixed} Item at the top of the stack\n */\nTinyStack.prototype.peek = function peek () {\n\treturn this.data[this.top];\n};\n\n/**\n * Gets & removes the item at the top of the stack\n *\n * @method pop\n * @memberOf TinyStack\n * @return {Mixed} Item at the top of the stack\n */\nTinyStack.prototype.pop = function pop () {\n\tif ( this.top > 0 ) {\n\t\tthis.top--;\n\n\t\treturn this.data.pop();\n\t}\n\telse {\n\t\treturn undefined;\n\t}\n};\n\n/**\n * Pushes an item onto the stack\n *\n * @method push\n * @memberOf TinyStack\n * @return {Object} {@link TinyStack}\n */\nTinyStack.prototype.push = function push ( arg ) {\n\tthis.data[++this.top] = arg;\n\n\treturn this;\n};\n\n/**\n * TinyStack factory\n *\n * @method factory\n * @return {Object} {@link TinyStack}\n */\nfunction factory () {\n\treturn new TinyStack();\n}\n\n// Node, AMD & window supported\nif ( typeof exports != \"undefined\" ) {\n\tmodule.exports = factory;\n}\nelse if ( typeof define == \"function\" ) {\n\tdefine( function () {\n\t\treturn factory;\n\t} );\n}\nelse {\n\tglobal.stack = factory;\n}\n} )( this );\n\n},{}],19:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = _dereq_('./lib/moddle');\n\nmodule.exports.types = _dereq_('./lib/types');\n\nmodule.exports.ns = _dereq_('./lib/ns');\n},{\"./lib/moddle\":23,\"./lib/ns\":24,\"./lib/types\":27}],20:[function(_dereq_,module,exports){\n'use strict';\n\nfunction Base() { }\n\nBase.prototype.get = function(name) {\n  return this.$model.properties.get(this, name);\n};\n\nBase.prototype.set = function(name, value) {\n  this.$model.properties.set(this, name, value);\n};\n\n\nmodule.exports = Base;\n},{}],21:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar parseNameNs = _dereq_('./ns').parseName;\n\n\nfunction DescriptorBuilder(nameNs) {\n  this.ns = nameNs;\n  this.name = nameNs.name;\n  this.allTypes = [];\n  this.properties = [];\n  this.propertiesByName = {};\n}\n\nmodule.exports = DescriptorBuilder;\n\n\nDescriptorBuilder.prototype.build = function() {\n  return _.pick(this, [ 'ns', 'name', 'allTypes', 'properties', 'propertiesByName', 'bodyProperty' ]);\n};\n\nDescriptorBuilder.prototype.addProperty = function(p, idx) {\n  this.addNamedProperty(p, true);\n\n  var properties = this.properties;\n\n  if (idx !== undefined) {\n    properties.splice(idx, 0, p);\n  } else {\n    properties.push(p);\n  }\n};\n\n\nDescriptorBuilder.prototype.replaceProperty = function(oldProperty, newProperty) {\n  var oldNameNs = oldProperty.ns;\n\n  var props = this.properties,\n      propertiesByName = this.propertiesByName;\n\n  if (oldProperty.isBody) {\n\n    if (!newProperty.isBody) {\n      throw new Error(\n        'property <' + newProperty.ns.name + '> must be body property ' +\n        'to refine <' + oldProperty.ns.name + '>');\n    }\n\n    // TODO: Check compatibility\n    this.setBodyProperty(newProperty, false);\n  }\n\n  this.addNamedProperty(newProperty, true);\n\n  // replace old property at index with new one\n  var idx = props.indexOf(oldProperty);\n  if (idx === -1) {\n    throw new Error('property <' + oldNameNs.name + '> not found in property list');\n  }\n\n  props[idx] = newProperty;\n\n  // replace propertiesByName entry with new property\n  propertiesByName[oldNameNs.name] = propertiesByName[oldNameNs.localName] = newProperty;\n};\n\n\nDescriptorBuilder.prototype.redefineProperty = function(p) {\n\n  var nsPrefix = p.ns.prefix;\n  var parts = p.redefines.split('#');\n\n  var name = parseNameNs(parts[0], nsPrefix);\n  var attrName = parseNameNs(parts[1], name.prefix).name;\n\n  var redefinedProperty = this.propertiesByName[attrName];\n  if (!redefinedProperty) {\n    throw new Error('refined property <' + attrName + '> not found');\n  } else {\n    this.replaceProperty(redefinedProperty, p);\n  }\n\n  delete p.redefines;\n};\n\nDescriptorBuilder.prototype.addNamedProperty = function(p, validate) {\n  var ns = p.ns,\n      propsByName = this.propertiesByName;\n\n  if (validate) {\n    this.assertNotDefined(p, ns.name);\n    this.assertNotDefined(p, ns.localName);\n  }\n\n  propsByName[ns.name] = propsByName[ns.localName] = p;\n};\n\nDescriptorBuilder.prototype.removeNamedProperty = function(p) {\n  var ns = p.ns,\n      propsByName = this.propertiesByName;\n\n  delete propsByName[ns.name];\n  delete propsByName[ns.localName];\n};\n\nDescriptorBuilder.prototype.setBodyProperty = function(p, validate) {\n\n  if (validate && this.bodyProperty) {\n    throw new Error(\n      'body property defined multiple times ' +\n      '(<' + this.bodyProperty.ns.name + '>, <' + p.ns.name + '>)');\n  }\n\n  this.bodyProperty = p;\n};\n\nDescriptorBuilder.prototype.addIdProperty = function(name) {\n  var nameNs = parseNameNs(name, this.ns.prefix);\n\n  var p = {\n    name: nameNs.localName,\n    type: 'String',\n    isAttr: true,\n    ns: nameNs\n  };\n\n  // ensure that id is always the first attribute (if present)\n  this.addProperty(p, 0);\n};\n\nDescriptorBuilder.prototype.assertNotDefined = function(p, name) {\n  var propertyName = p.name,\n      definedProperty = this.propertiesByName[propertyName];\n\n  if (definedProperty) {\n    throw new Error(\n      'property <' + propertyName + '> already defined; ' +\n      'override of <' + definedProperty.definedBy.ns.name + '#' + definedProperty.ns.name + '> by ' +\n      '<' + p.definedBy.ns.name + '#' + p.ns.name + '> not allowed without redefines');\n  }\n};\n\nDescriptorBuilder.prototype.hasProperty = function(name) {\n  return this.propertiesByName[name];\n};\n\nDescriptorBuilder.prototype.addTrait = function(t) {\n\n  var allTypes = this.allTypes;\n\n  if (allTypes.indexOf(t) !== -1) {\n    return;\n  }\n\n  _.forEach(t.properties, function(p) {\n\n    // clone property to allow extensions\n    p = _.extend({}, p, {\n      name: p.ns.localName\n    });\n\n    Object.defineProperty(p, 'definedBy', {\n      value: t\n    });\n\n    // add redefine support\n    if (p.redefines) {\n      this.redefineProperty(p);\n    } else {\n      if (p.isBody) {\n        this.setBodyProperty(p);\n      }\n      this.addProperty(p);\n    }\n  }, this);\n\n  allTypes.push(t);\n};\n\n},{\"./ns\":24}],22:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Base = _dereq_('./base');\n\n\nfunction Factory(model, properties) {\n  this.model = model;\n  this.properties = properties;\n}\n\nmodule.exports = Factory;\n\n\nFactory.prototype.createType = function(descriptor) {\n\n  var model = this.model;\n\n  var props = this.properties,\n      prototype = Object.create(Base.prototype);\n\n  // initialize default values\n  _.forEach(descriptor.properties, function(p) {\n    if (!p.isMany && p.default !== undefined) {\n      prototype[p.name] = p.default;\n    }\n  });\n\n  props.defineModel(prototype, model);\n  props.defineDescriptor(prototype, descriptor);\n\n  var name = descriptor.ns.name;\n\n  /**\n   * The new type constructor\n   */\n  function ModdleElement(attrs) {\n    props.define(this, '$type', { value: name, enumerable: true });\n    props.define(this, '$attrs', { value: {} });\n    props.define(this, '$parent', { writable: true });\n\n    _.forEach(attrs, function(val, key) {\n      this.set(key, val);\n    }, this);\n  }\n\n  ModdleElement.prototype = prototype;\n\n  ModdleElement.hasType = prototype.$instanceOf = this.model.hasType;\n\n  // static links\n  props.defineModel(ModdleElement, model);\n  props.defineDescriptor(ModdleElement, descriptor);\n\n  return ModdleElement;\n};\n},{\"./base\":20}],23:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Types = _dereq_('./types'),\n    Factory = _dereq_('./factory'),\n    Registry = _dereq_('./registry'),\n    Properties = _dereq_('./properties');\n\nvar parseNameNs = _dereq_('./ns').parseName;\n\n\n//// Moddle implementation /////////////////////////////////////////////////\n\n/**\n * @class Moddle\n *\n * A model that can be used to create elements of a specific type.\n *\n * @example\n *\n * var Moddle = require('moddle');\n *\n * var pkg = {\n *   name: 'mypackage',\n *   prefix: 'my',\n *   types: [\n *     { name: 'Root' }\n *   ]\n * };\n *\n * var moddle = new Moddle([pkg]);\n *\n * @param {Array<Package>} packages  the packages to contain\n * @param {Object} options  additional options to pass to the model\n */\nfunction Moddle(packages, options) {\n\n  options = options || {};\n\n  this.properties = new Properties(this);\n\n  this.factory = new Factory(this, this.properties);\n  this.registry = new Registry(packages, this.properties, options);\n\n  this.typeCache = {};\n}\n\nmodule.exports = Moddle;\n\n\n/**\n * Create an instance of the specified type.\n *\n * @method Moddle#create\n *\n * @example\n *\n * var foo = moddle.create('my:Foo');\n * var bar = moddle.create('my:Bar', { id: 'BAR_1' });\n *\n * @param  {String|Object} descriptor the type descriptor or name know to the model\n * @param  {Object} attrs   a number of attributes to initialize the model instance with\n * @return {Object}         model instance\n */\nModdle.prototype.create = function(descriptor, attrs) {\n  var Type = this.getType(descriptor);\n\n  if (!Type) {\n    throw new Error('unknown type <' + descriptor + '>');\n  }\n\n  return new Type(attrs);\n};\n\n\n/**\n * Returns the type representing a given descriptor\n *\n * @method Moddle#getType\n *\n * @example\n *\n * var Foo = moddle.getType('my:Foo');\n * var foo = new Foo({ 'id' : 'FOO_1' });\n *\n * @param  {String|Object} descriptor the type descriptor or name know to the model\n * @return {Object}         the type representing the descriptor\n */\nModdle.prototype.getType = function(descriptor) {\n\n  var cache = this.typeCache;\n\n  var name = _.isString(descriptor) ? descriptor : descriptor.ns.name;\n\n  var type = cache[name];\n\n  if (!type) {\n    descriptor = this.registry.getEffectiveDescriptor(name);\n    type = cache[descriptor.name] = this.factory.createType(descriptor);\n  }\n\n  return type;\n};\n\n\n/**\n * Creates an any-element type to be used within model instances.\n *\n * This can be used to create custom elements that lie outside the meta-model.\n * The created element contains all the meta-data required to serialize it\n * as part of meta-model elements.\n *\n * @method Moddle#createAny\n *\n * @example\n *\n * var foo = moddle.createAny('vendor:Foo', 'http://vendor', {\n *   value: 'bar'\n * });\n *\n * var container = moddle.create('my:Container', 'http://my', {\n *   any: [ foo ]\n * });\n *\n * // go ahead and serialize the stuff\n *\n *\n * @param  {String} name  the name of the element\n * @param  {String} nsUri the namespace uri of the element\n * @param  {Object} [properties] a map of properties to initialize the instance with\n * @return {Object} the any type instance\n */\nModdle.prototype.createAny = function(name, nsUri, properties) {\n\n  var nameNs = parseNameNs(name);\n\n  var element = {\n    $type: name\n  };\n\n  var descriptor = {\n    name: name,\n    isGeneric: true,\n    ns: {\n      prefix: nameNs.prefix,\n      localName: nameNs.localName,\n      uri: nsUri\n    }\n  };\n\n  this.properties.defineDescriptor(element, descriptor);\n  this.properties.defineModel(element, this);\n  this.properties.define(element, '$parent', { enumerable: false, writable: true });\n\n  _.forEach(properties, function(a, key) {\n    if (_.isObject(a) && a.value !== undefined) {\n      element[a.name] = a.value;\n    } else {\n      element[key] = a;\n    }\n  });\n\n  return element;\n};\n\n/**\n * Returns a registered package by uri or prefix\n *\n * @return {Object} the package\n */\nModdle.prototype.getPackage = function(uriOrPrefix) {\n  return this.registry.getPackage(uriOrPrefix);\n};\n\n/**\n * Returns a snapshot of all known packages\n *\n * @return {Object} the package\n */\nModdle.prototype.getPackages = function() {\n  return this.registry.getPackages();\n};\n\n/**\n * Returns the descriptor for an element\n */\nModdle.prototype.getElementDescriptor = function(element) {\n  return element.$descriptor;\n};\n\n/**\n * Returns true if the given descriptor or instance\n * represents the given type.\n *\n * May be applied to this, if element is omitted.\n */\nModdle.prototype.hasType = function(element, type) {\n  if (type === undefined) {\n    type = element;\n    element = this;\n  }\n\n  var descriptor = element.$model.getElementDescriptor(element);\n\n  return !!_.find(descriptor.allTypes, function(t) {\n    return t.name === type;\n  });\n};\n\n\n/**\n * Returns the descriptor of an elements named property\n */\nModdle.prototype.getPropertyDescriptor = function(element, property) {\n  return this.getElementDescriptor(element).propertiesByName[property];\n};\n\n},{\"./factory\":22,\"./ns\":24,\"./properties\":25,\"./registry\":26,\"./types\":27}],24:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Parses a namespaced attribute name of the form (ns:)localName to an object,\n * given a default prefix to assume in case no explicit namespace is given.\n *\n * @param {String} name\n * @param {String} [defaultPrefix] the default prefix to take, if none is present.\n *\n * @return {Object} the parsed name\n */\nmodule.exports.parseName = function(name, defaultPrefix) {\n  var parts = name.split(/:/),\n      localName, prefix;\n\n  // no prefix (i.e. only local name)\n  if (parts.length === 1) {\n    localName = name;\n    prefix = defaultPrefix;\n  } else\n  // prefix + local name\n  if (parts.length === 2) {\n    localName = parts[1];\n    prefix = parts[0];\n  } else {\n    throw new Error('expected <prefix:localName> or <localName>, got ' + name);\n  }\n\n  name = (prefix ? prefix + ':' : '') + localName;\n\n  return {\n    name: name,\n    prefix: prefix,\n    localName: localName\n  };\n};\n},{}],25:[function(_dereq_,module,exports){\n'use strict';\n\n\n/**\n * A utility that gets and sets properties of model elements.\n *\n * @param {Model} model\n */\nfunction Properties(model) {\n  this.model = model;\n}\n\nmodule.exports = Properties;\n\n\n/**\n * Sets a named property on the target element\n *\n * @param {Object} target\n * @param {String} name\n * @param {Object} value\n */\nProperties.prototype.set = function(target, name, value) {\n\n  var property = this.model.getPropertyDescriptor(target, name);\n\n  if (!property) {\n    target.$attrs[name] = value;\n  } else {\n    Object.defineProperty(target, property.name, {\n      enumerable: !property.isReference,\n      writable: true,\n      value: value\n    });\n  }\n};\n\n/**\n * Returns the named property of the given element\n *\n * @param  {Object} target\n * @param  {String} name\n *\n * @return {Object}\n */\nProperties.prototype.get = function(target, name) {\n\n  var property = this.model.getPropertyDescriptor(target, name);\n\n  if (!property) {\n    return target.$attrs[name];\n  }\n\n  var propertyName = property.name;\n\n  // check if access to collection property and lazily initialize it\n  if (!target[propertyName] && property.isMany) {\n    Object.defineProperty(target, propertyName, {\n      enumerable: !property.isReference,\n      writable: true,\n      value: []\n    });\n  }\n\n  return target[propertyName];\n};\n\n\n/**\n * Define a property on the target element\n *\n * @param  {Object} target\n * @param  {String} name\n * @param  {Object} options\n */\nProperties.prototype.define = function(target, name, options) {\n  Object.defineProperty(target, name, options);\n};\n\n\n/**\n * Define the descriptor for an element\n */\nProperties.prototype.defineDescriptor = function(target, descriptor) {\n  this.define(target, '$descriptor', { value: descriptor });\n};\n\n/**\n * Define the model for an element\n */\nProperties.prototype.defineModel = function(target, model) {\n  this.define(target, '$model', { value: model });\n};\n},{}],26:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Types = _dereq_('./types'),\n    DescriptorBuilder = _dereq_('./descriptor-builder');\n\nvar parseNameNs = _dereq_('./ns').parseName;\n\n\nfunction Registry(packages, properties, options) {\n  this.options = _.extend({ generateId: 'id' }, options || {});\n\n  this.packageMap = {};\n  this.typeMap = {};\n\n  this.packages = [];\n\n  this.properties = properties;\n\n  _.forEach(packages, this.registerPackage, this);\n}\n\nmodule.exports = Registry;\n\n\nRegistry.prototype.getPackage = function(uriOrPrefix) {\n  return this.packageMap[uriOrPrefix];\n};\n\nRegistry.prototype.getPackages = function() {\n  return this.packages;\n};\n\n\nRegistry.prototype.registerPackage = function(pkg) {\n\n  // register types\n  _.forEach(pkg.types, function(descriptor) {\n    this.registerType(descriptor, pkg);\n  }, this);\n\n  this.packageMap[pkg.uri] = this.packageMap[pkg.prefix] = pkg;\n  this.packages.push(pkg);\n};\n\n\n/**\n * Register a type from a specific package with us\n */\nRegistry.prototype.registerType = function(type, pkg) {\n\n  var ns = parseNameNs(type.name, pkg.prefix),\n      name = ns.name,\n      propertiesByName = {};\n\n  // parse properties\n  _.forEach(type.properties, function(p) {\n\n    // namespace property names\n    var propertyNs = parseNameNs(p.name, ns.prefix),\n        propertyName = propertyNs.name;\n\n    // namespace property types\n    if (!Types.isBuiltIn(p.type)) {\n      p.type = parseNameNs(p.type, propertyNs.prefix).name;\n    }\n\n    _.extend(p, {\n      ns: propertyNs,\n      name: propertyName\n    });\n\n    propertiesByName[propertyName] = p;\n  });\n\n  // update ns + name\n  _.extend(type, {\n    ns: ns,\n    name: name,\n    propertiesByName: propertiesByName\n  });\n\n  // link to package\n  this.definePackage(type, pkg);\n\n  // register\n  this.typeMap[name] = type;\n};\n\n\n/**\n * Traverse the type hierarchy from bottom to top.\n */\nRegistry.prototype.mapTypes = function(nsName, iterator) {\n\n  var type = this.typeMap[nsName.name];\n\n  if (!type) {\n    throw new Error('unknown type <' + nsName.name + '>');\n  }\n\n  _.forEach(type.superClass, function(cls) {\n    var parentNs = parseNameNs(cls, nsName.prefix);\n    this.mapTypes(parentNs, iterator);\n  }, this);\n\n  iterator(type);\n};\n\n\n/**\n * Returns the effective descriptor for a type.\n *\n * @param  {String} type the namespaced name (ns:localName) of the type\n *\n * @return {Descriptor} the resulting effective descriptor\n */\nRegistry.prototype.getEffectiveDescriptor = function(name) {\n\n  var options = this.options,\n      nsName = parseNameNs(name);\n\n  var builder = new DescriptorBuilder(nsName);\n\n  this.mapTypes(nsName, function(type) {\n    builder.addTrait(type);\n  });\n\n  // check we have an id assigned\n  var id = this.options.generateId;\n  if (id && !builder.hasProperty(id)) {\n    builder.addIdProperty(id);\n  }\n\n  var descriptor = builder.build();\n\n  // define package link\n  this.definePackage(descriptor, descriptor.allTypes[descriptor.allTypes.length - 1].$pkg);\n\n  return descriptor;\n};\n\n\nRegistry.prototype.definePackage = function(target, pkg) {\n  this.properties.define(target, '$pkg', { value: pkg });\n};\n},{\"./descriptor-builder\":21,\"./ns\":24,\"./types\":27}],27:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Built-in moddle types\n */\nvar BUILTINS = {\n  String: true,\n  Boolean: true,\n  Integer: true,\n  Real: true,\n  Element: true,\n};\n\n/**\n * Converters for built in types from string representations\n */\nvar TYPE_CONVERTERS = {\n  String: function(s) { return s; },\n  Boolean: function(s) { return s === 'true'; },\n  Integer: function(s) { return parseInt(s, 10); },\n  Real: function(s) { return parseFloat(s, 10); }\n};\n\n/**\n * Convert a type to its real representation\n */\nmodule.exports.coerceType = function(type, value) {\n\n  var converter = TYPE_CONVERTERS[type];\n\n  if (converter) {\n    return converter(value);\n  } else {\n    return value;\n  }\n};\n\n/**\n * Return whether the given type is built-in\n */\nmodule.exports.isBuiltIn = function(type) {\n  return !!BUILTINS[type];\n};\n\n/**\n * Return whether the given type is simple\n */\nmodule.exports.isSimple = function(type) {\n  return !!TYPE_CONVERTERS[type];\n};\n},{}],28:[function(_dereq_,module,exports){\nmodule.exports={\n  \"name\": \"BPMN20\",\n  \"uri\": \"http://www.omg.org/spec/BPMN/20100524/MODEL\",\n  \"associations\": [],\n  \"types\": [\n    {\n      \"name\": \"Interface\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"operations\",\n          \"type\": \"Operation\",\n          \"association\": \"A_operations_interface\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"implementationRef\",\n          \"type\": \"String\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Operation\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"inMessageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_inMessageRef_operation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outMessageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_outMessageRef_operation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"errorRefs\",\n          \"type\": \"Error\",\n          \"association\": \"A_errorRefs_operation\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"implementationRef\",\n          \"type\": \"String\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"EndPoint\",\n      \"superClass\": [\n        \"RootElement\"\n      ]\n    },\n    {\n      \"name\": \"Auditing\",\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"GlobalTask\",\n      \"superClass\": [\n        \"CallableElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"resources\",\n          \"type\": \"ResourceRole\",\n          \"association\": \"A_resources_globalTask\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Monitoring\",\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"Performer\",\n      \"superClass\": [\n        \"ResourceRole\"\n      ]\n    },\n    {\n      \"name\": \"Process\",\n      \"superClass\": [\n        \"FlowElementsContainer\",\n        \"CallableElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"processType\",\n          \"type\": \"ProcessType\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"isClosed\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"auditing\",\n          \"type\": \"Auditing\",\n          \"association\": \"A_auditing_process\"\n        },\n        {\n          \"name\": \"monitoring\",\n          \"type\": \"Monitoring\",\n          \"association\": \"A_monitoring_process\"\n        },\n        {\n          \"name\": \"properties\",\n          \"type\": \"Property\",\n          \"association\": \"A_properties_process\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"supports\",\n          \"type\": \"Process\",\n          \"association\": \"A_supports_process\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"definitionalCollaborationRef\",\n          \"type\": \"Collaboration\",\n          \"association\": \"A_definitionalCollaborationRef_process\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"isExecutable\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"resources\",\n          \"type\": \"ResourceRole\",\n          \"association\": \"A_resources_process\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"artifacts\",\n          \"type\": \"Artifact\",\n          \"association\": \"A_artifacts_process\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"correlationSubscriptions\",\n          \"type\": \"CorrelationSubscription\",\n          \"association\": \"A_correlationSubscriptions_process\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"LaneSet\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"lanes\",\n          \"type\": \"Lane\",\n          \"association\": \"A_lanes_laneSet\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Lane\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"childLaneSet\",\n          \"type\": \"LaneSet\",\n          \"association\": \"A_childLaneSet_parentLane\"\n        },\n        {\n          \"name\": \"partitionElementRef\",\n          \"type\": \"BaseElement\",\n          \"association\": \"A_partitionElementRef_lane\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"flowNodeRef\",\n          \"type\": \"FlowNode\",\n          \"association\": \"A_flowNodeRefs_lanes\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"partitionElement\",\n          \"type\": \"BaseElement\",\n          \"association\": \"A_partitionElement_lane\"\n        }\n      ]\n    },\n    {\n      \"name\": \"GlobalManualTask\",\n      \"superClass\": [\n        \"GlobalTask\"\n      ]\n    },\n    {\n      \"name\": \"ManualTask\",\n      \"superClass\": [\n        \"Task\"\n      ]\n    },\n    {\n      \"name\": \"UserTask\",\n      \"superClass\": [\n        \"Task\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"renderings\",\n          \"type\": \"Rendering\",\n          \"association\": \"A_renderings_usertask\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Rendering\",\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"HumanPerformer\",\n      \"superClass\": [\n        \"Performer\"\n      ]\n    },\n    {\n      \"name\": \"PotentialOwner\",\n      \"superClass\": [\n        \"HumanPerformer\"\n      ]\n    },\n    {\n      \"name\": \"GlobalUserTask\",\n      \"superClass\": [\n        \"GlobalTask\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"renderings\",\n          \"type\": \"Rendering\",\n          \"association\": \"A_renderings_globalUserTask\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Gateway\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"FlowNode\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"gatewayDirection\",\n          \"type\": \"GatewayDirection\",\n          \"default\": \"Unspecified\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"EventBasedGateway\",\n      \"superClass\": [\n        \"Gateway\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"instantiate\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"eventGatewayType\",\n          \"type\": \"EventBasedGatewayType\",\n          \"isAttr\": true,\n          \"default\": \"Exclusive\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ComplexGateway\",\n      \"superClass\": [\n        \"Gateway\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"activationCondition\",\n          \"type\": \"Expression\",\n          \"association\": \"A_activationCondition_complexGateway\"\n        },\n        {\n          \"name\": \"default\",\n          \"type\": \"SequenceFlow\",\n          \"association\": \"A_default_complexGateway\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ExclusiveGateway\",\n      \"superClass\": [\n        \"Gateway\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"default\",\n          \"type\": \"SequenceFlow\",\n          \"association\": \"A_default_exclusiveGateway\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"InclusiveGateway\",\n      \"superClass\": [\n        \"Gateway\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"default\",\n          \"type\": \"SequenceFlow\",\n          \"association\": \"A_default_inclusiveGateway\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ParallelGateway\",\n      \"superClass\": [\n        \"Gateway\"\n      ]\n    },\n    {\n      \"name\": \"RootElement\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"Relationship\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"type\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"direction\",\n          \"type\": \"RelationshipDirection\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"sources\",\n          \"association\": \"A_sources_relationship\",\n          \"isMany\": true,\n          \"isReference\": true,\n          \"type\": \"Element\"\n        },\n        {\n          \"name\": \"targets\",\n          \"association\": \"A_targets_relationship\",\n          \"isMany\": true,\n          \"isReference\": true,\n          \"type\": \"Element\"\n        }\n      ]\n    },\n    {\n      \"name\": \"BaseElement\",\n      \"isAbstract\": true,\n      \"properties\": [\n        {\n          \"name\": \"id\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"extensionDefinitions\",\n          \"type\": \"ExtensionDefinition\",\n          \"association\": \"A_extensionDefinitions_baseElement\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"extensionElements\",\n          \"type\": \"ExtensionElements\",\n          \"association\": \"A_extensionElements_baseElement\"\n        },\n        {\n          \"name\": \"documentation\",\n          \"type\": \"Documentation\",\n          \"association\": \"A_documentation_baseElement\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Extension\",\n      \"properties\": [\n        {\n          \"name\": \"mustUnderstand\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"definition\",\n          \"type\": \"ExtensionDefinition\",\n          \"association\": \"A_definition_extension\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ExtensionDefinition\",\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"extensionAttributeDefinitions\",\n          \"type\": \"ExtensionAttributeDefinition\",\n          \"association\": \"A_extensionAttributeDefinitions_extensionDefinition\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ExtensionAttributeDefinition\",\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"type\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"isReference\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"extensionDefinition\",\n          \"type\": \"ExtensionDefinition\",\n          \"association\": \"A_extensionAttributeDefinitions_extensionDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ExtensionElements\",\n      \"properties\": [\n        {\n          \"name\": \"valueRef\",\n          \"association\": \"A_valueRef_extensionElements\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"type\": \"Element\"\n        },\n        {\n          \"name\": \"values\",\n          \"association\": \"A_value_extensionElements\",\n          \"type\": \"Element\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"extensionAttributeDefinition\",\n          \"type\": \"ExtensionAttributeDefinition\",\n          \"association\": \"A_extensionAttributeDefinition_extensionElements\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Documentation\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"text\",\n          \"isAttr\": true,\n          \"type\": \"String\",\n          \"isBody\": true\n        },\n        {\n          \"name\": \"textFormat\",\n          \"default\": \"text/plain\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Event\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"FlowNode\",\n        \"InteractionNode\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"properties\",\n          \"type\": \"Property\",\n          \"association\": \"A_properties_event\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"IntermediateCatchEvent\",\n      \"superClass\": [\n        \"CatchEvent\"\n      ]\n    },\n    {\n      \"name\": \"IntermediateThrowEvent\",\n      \"superClass\": [\n        \"ThrowEvent\"\n      ]\n    },\n    {\n      \"name\": \"EndEvent\",\n      \"superClass\": [\n        \"ThrowEvent\"\n      ]\n    },\n    {\n      \"name\": \"StartEvent\",\n      \"superClass\": [\n        \"CatchEvent\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"isInterrupting\",\n          \"default\": true,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ThrowEvent\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Event\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"inputSet\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_inputSet_throwEvent\"\n        },\n        {\n          \"name\": \"eventDefinitionRefs\",\n          \"type\": \"EventDefinition\",\n          \"association\": \"A_eventDefinitionRefs_throwEvent\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"dataInputAssociation\",\n          \"type\": \"DataInputAssociation\",\n          \"association\": \"A_dataInputAssociation_throwEvent\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"dataInputs\",\n          \"type\": \"DataInput\",\n          \"association\": \"A_dataInputs_throwEvent\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"eventDefinitions\",\n          \"type\": \"EventDefinition\",\n          \"association\": \"A_eventDefinitions_throwEvent\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CatchEvent\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Event\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"parallelMultiple\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\",\n          \"default\": false\n        },\n        {\n          \"name\": \"outputSet\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_outputSet_catchEvent\"\n        },\n        {\n          \"name\": \"eventDefinitionRefs\",\n          \"type\": \"EventDefinition\",\n          \"association\": \"A_eventDefinitionRefs_catchEvent\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"dataOutputAssociation\",\n          \"type\": \"DataOutputAssociation\",\n          \"association\": \"A_dataOutputAssociation_catchEvent\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"dataOutputs\",\n          \"type\": \"DataOutput\",\n          \"association\": \"A_dataOutputs_catchEvent\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"eventDefinitions\",\n          \"type\": \"EventDefinition\",\n          \"association\": \"A_eventDefinitions_catchEvent\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"BoundaryEvent\",\n      \"superClass\": [\n        \"CatchEvent\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"cancelActivity\",\n          \"default\": true,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"attachedToRef\",\n          \"type\": \"Activity\",\n          \"association\": \"A_boundaryEventRefs_attachedToRef\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"EventDefinition\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"RootElement\"\n      ]\n    },\n    {\n      \"name\": \"CancelEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ]\n    },\n    {\n      \"name\": \"ErrorEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"errorRef\",\n          \"type\": \"Error\",\n          \"association\": \"A_errorRef_errorEventDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"TerminateEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ]\n    },\n    {\n      \"name\": \"EscalationEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"escalationRef\",\n          \"type\": \"Escalation\",\n          \"association\": \"A_escalationRef_escalationEventDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Escalation\",\n      \"properties\": [\n        {\n          \"name\": \"structureRef\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_structureRef_escalation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"escalationCode\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ],\n      \"superClass\": [\n        \"RootElement\"\n      ]\n    },\n    {\n      \"name\": \"CompensateEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"waitForCompletion\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"activityRef\",\n          \"type\": \"Activity\",\n          \"association\": \"A_activityRef_compensateEventDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"TimerEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"timeDate\",\n          \"type\": \"Expression\",\n          \"association\": \"A_timeDate_timerEventDefinition\"\n        },\n        {\n          \"name\": \"timeCycle\",\n          \"type\": \"Expression\",\n          \"association\": \"A_timeCycle_timerEventDefinition\"\n        },\n        {\n          \"name\": \"timeDuration\",\n          \"type\": \"Expression\",\n          \"association\": \"A_timeDuration_timerEventDefinition\"\n        }\n      ]\n    },\n    {\n      \"name\": \"LinkEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"target\",\n          \"type\": \"LinkEventDefinition\",\n          \"association\": \"A_target_source\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"source\",\n          \"type\": \"LinkEventDefinition\",\n          \"association\": \"A_target_source\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"MessageEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"messageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_messageRef_messageEventDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"operationRef\",\n          \"type\": \"Operation\",\n          \"association\": \"A_operationRef_messageEventDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ConditionalEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"condition\",\n          \"type\": \"Expression\",\n          \"association\": \"A_condition_conditionalEventDefinition\",\n          \"serialize\": \"xsi:type\"\n        }\n      ]\n    },\n    {\n      \"name\": \"SignalEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"signalRef\",\n          \"type\": \"Signal\",\n          \"association\": \"A_signalRef_signalEventDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Signal\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"structureRef\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_structureRef_signal\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ImplicitThrowEvent\",\n      \"superClass\": [\n        \"ThrowEvent\"\n      ]\n    },\n    {\n      \"name\": \"DataState\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ItemAwareElement\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"itemSubjectRef\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_itemSubjectRef_itemAwareElement\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"dataState\",\n          \"type\": \"DataState\",\n          \"association\": \"A_dataState_itemAwareElement\"\n        }\n      ]\n    },\n    {\n      \"name\": \"DataAssociation\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"transformation\",\n          \"type\": \"FormalExpression\",\n          \"association\": \"A_transformation_dataAssociation\"\n        },\n        {\n          \"name\": \"assignment\",\n          \"type\": \"Assignment\",\n          \"association\": \"A_assignment_dataAssociation\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"sourceRef\",\n          \"type\": \"ItemAwareElement\",\n          \"association\": \"A_sourceRef_dataAssociation\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"targetRef\",\n          \"type\": \"ItemAwareElement\",\n          \"association\": \"A_targetRef_dataAssociation\",\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"DataInput\",\n      \"superClass\": [\n        \"ItemAwareElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"isCollection\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"inputSetRefs\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_dataInputRefs_inputSetRefs\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"inputSetWithOptional\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_optionalInputRefs_inputSetWithOptional\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"inputSetWithWhileExecuting\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_whileExecutingInputRefs_inputSetWithWhileExecuting\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"DataOutput\",\n      \"superClass\": [\n        \"ItemAwareElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"isCollection\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"outputSetRefs\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_dataOutputRefs_outputSetRefs\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outputSetWithOptional\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_outputSetWithOptional_optionalOutputRefs\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outputSetWithWhileExecuting\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_outputSetWithWhileExecuting_whileExecutingOutputRefs\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"InputSet\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"dataInputRefs\",\n          \"type\": \"DataInput\",\n          \"association\": \"A_dataInputRefs_inputSetRefs\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"optionalInputRefs\",\n          \"type\": \"DataInput\",\n          \"association\": \"A_optionalInputRefs_inputSetWithOptional\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"whileExecutingInputRefs\",\n          \"type\": \"DataInput\",\n          \"association\": \"A_whileExecutingInputRefs_inputSetWithWhileExecuting\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outputSetRefs\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_inputSetRefs_outputSetRefs\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"OutputSet\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"dataOutputRefs\",\n          \"type\": \"DataOutput\",\n          \"association\": \"A_dataOutputRefs_outputSetRefs\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"inputSetRefs\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_inputSetRefs_outputSetRefs\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"optionalOutputRefs\",\n          \"type\": \"DataOutput\",\n          \"association\": \"A_outputSetWithOptional_optionalOutputRefs\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"whileExecutingOutputRefs\",\n          \"type\": \"DataOutput\",\n          \"association\": \"A_outputSetWithWhileExecuting_whileExecutingOutputRefs\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Property\",\n      \"superClass\": [\n        \"ItemAwareElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"DataInputAssociation\",\n      \"superClass\": [\n        \"DataAssociation\"\n      ]\n    },\n    {\n      \"name\": \"DataOutputAssociation\",\n      \"superClass\": [\n        \"DataAssociation\"\n      ]\n    },\n    {\n      \"name\": \"InputOutputSpecification\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"inputSets\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_inputSets_inputOutputSpecification\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"outputSets\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_outputSets_inputOutputSpecification\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"dataInputs\",\n          \"type\": \"DataInput\",\n          \"association\": \"A_dataInputs_inputOutputSpecification\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"dataOutputs\",\n          \"type\": \"DataOutput\",\n          \"association\": \"A_dataOutputs_inputOutputSpecification\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"DataObject\",\n      \"superClass\": [\n        \"FlowElement\",\n        \"ItemAwareElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"isCollection\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        }\n      ]\n    },\n    {\n      \"name\": \"InputOutputBinding\",\n      \"properties\": [\n        {\n          \"name\": \"inputDataRef\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_inputDataRef_inputOutputBinding\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outputDataRef\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_outputDataRef_inputOutputBinding\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"operationRef\",\n          \"type\": \"Operation\",\n          \"association\": \"A_operationRef_ioBinding\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Assignment\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"from\",\n          \"type\": \"Expression\",\n          \"association\": \"A_from_assignment\"\n        },\n        {\n          \"name\": \"to\",\n          \"type\": \"Expression\",\n          \"association\": \"A_to_assignment\"\n        }\n      ]\n    },\n    {\n      \"name\": \"DataStore\",\n      \"superClass\": [\n        \"RootElement\",\n        \"ItemAwareElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"capacity\",\n          \"isAttr\": true,\n          \"type\": \"Integer\"\n        },\n        {\n          \"name\": \"isUnlimited\",\n          \"default\": true,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        }\n      ]\n    },\n    {\n      \"name\": \"DataStoreReference\",\n      \"superClass\": [\n        \"ItemAwareElement\",\n        \"FlowElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"dataStoreRef\",\n          \"type\": \"DataStore\",\n          \"association\": \"A_dataStoreRef_dataStoreReference\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"DataObjectReference\",\n      \"superClass\": [\n        \"ItemAwareElement\",\n        \"FlowElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"dataObjectRef\",\n          \"type\": \"DataObject\",\n          \"association\": \"A_dataObjectRef_dataObject\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ConversationLink\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"sourceRef\",\n          \"type\": \"InteractionNode\",\n          \"association\": \"A_sourceRef_outgoingConversationLinks\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"targetRef\",\n          \"type\": \"InteractionNode\",\n          \"association\": \"A_targetRef_incomingConversationLinks\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ConversationAssociation\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"innerConversationNodeRef\",\n          \"type\": \"ConversationNode\",\n          \"association\": \"A_innerConversationNodeRef_conversationAssociation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outerConversationNodeRef\",\n          \"type\": \"ConversationNode\",\n          \"association\": \"A_outerConversationNodeRef_conversationAssociation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CallConversation\",\n      \"superClass\": [\n        \"ConversationNode\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"calledCollaborationRef\",\n          \"type\": \"Collaboration\",\n          \"association\": \"A_calledCollaborationRef_callConversation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"participantAssociations\",\n          \"type\": \"ParticipantAssociation\",\n          \"association\": \"A_participantAssociations_callConversation\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Conversation\",\n      \"superClass\": [\n        \"ConversationNode\"\n      ]\n    },\n    {\n      \"name\": \"SubConversation\",\n      \"superClass\": [\n        \"ConversationNode\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"conversationNodes\",\n          \"type\": \"ConversationNode\",\n          \"association\": \"A_conversationNodes_subConversation\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ConversationNode\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"InteractionNode\",\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"participantRefs\",\n          \"type\": \"Participant\",\n          \"association\": \"A_participantRefs_conversationNode\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"messageFlowRefs\",\n          \"type\": \"MessageFlow\",\n          \"association\": \"A_messageFlowRefs_communication\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"correlationKeys\",\n          \"type\": \"CorrelationKey\",\n          \"association\": \"A_correlationKeys_conversationNode\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"GlobalConversation\",\n      \"superClass\": [\n        \"Collaboration\"\n      ]\n    },\n    {\n      \"name\": \"PartnerEntity\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"participantRef\",\n          \"type\": \"Participant\",\n          \"association\": \"A_partnerEntityRef_participantRef\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"PartnerRole\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"participantRef\",\n          \"type\": \"Participant\",\n          \"association\": \"A_partnerRoleRef_participantRef\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CorrelationProperty\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"correlationPropertyRetrievalExpression\",\n          \"type\": \"CorrelationPropertyRetrievalExpression\",\n          \"association\": \"A_correlationPropertyRetrievalExpression_correlationproperty\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"type\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_type_correlationProperty\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Error\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"structureRef\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_structureRef_error\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"errorCode\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"CorrelationKey\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"correlationPropertyRef\",\n          \"type\": \"CorrelationProperty\",\n          \"association\": \"A_correlationPropertyRef_correlationKey\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Expression\",\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"FormalExpression\",\n      \"superClass\": [\n        \"Expression\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"language\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"body\",\n          \"type\": \"Element\"\n        },\n        {\n          \"name\": \"evaluatesToTypeRef\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_evaluatesToTypeRef_formalExpression\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Message\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"itemRef\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_itemRef_message\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ItemDefinition\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"itemKind\",\n          \"type\": \"ItemKind\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"structureRef\",\n          \"type\": \"String\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"isCollection\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"import\",\n          \"type\": \"Import\",\n          \"association\": \"A_import_itemDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"FlowElement\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"auditing\",\n          \"type\": \"Auditing\",\n          \"association\": \"A_auditing_flowElement\"\n        },\n        {\n          \"name\": \"monitoring\",\n          \"type\": \"Monitoring\",\n          \"association\": \"A_monitoring_flowElement\"\n        },\n        {\n          \"name\": \"categoryValueRef\",\n          \"type\": \"CategoryValue\",\n          \"association\": \"A_categorizedFlowElements_categoryValueRef\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"SequenceFlow\",\n      \"superClass\": [\n        \"FlowElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"isImmediate\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"conditionExpression\",\n          \"type\": \"Expression\",\n          \"association\": \"A_conditionExpression_sequenceFlow\"\n        },\n        {\n          \"name\": \"sourceRef\",\n          \"type\": \"FlowNode\",\n          \"association\": \"A_sourceRef_outgoing_flow\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"targetRef\",\n          \"type\": \"FlowNode\",\n          \"association\": \"A_targetRef_incoming_flow\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"FlowElementsContainer\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"laneSets\",\n          \"type\": \"LaneSet\",\n          \"association\": \"A_laneSets_flowElementsContainer\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"flowElements\",\n          \"type\": \"FlowElement\",\n          \"association\": \"A_flowElements_container\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CallableElement\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"ioSpecification\",\n          \"type\": \"InputOutputSpecification\",\n          \"association\": \"A_ioSpecification_callableElement\"\n        },\n        {\n          \"name\": \"supportedInterfaceRefs\",\n          \"type\": \"Interface\",\n          \"association\": \"A_supportedInterfaceRefs_callableElements\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"ioBinding\",\n          \"type\": \"InputOutputBinding\",\n          \"association\": \"A_ioBinding_callableElement\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"FlowNode\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"FlowElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"incoming\",\n          \"type\": \"SequenceFlow\",\n          \"association\": \"A_targetRef_incoming_flow\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outgoing\",\n          \"type\": \"SequenceFlow\",\n          \"association\": \"A_sourceRef_outgoing_flow\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"lanes\",\n          \"type\": \"Lane\",\n          \"association\": \"A_flowNodeRefs_lanes\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CorrelationPropertyRetrievalExpression\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"messagePath\",\n          \"type\": \"FormalExpression\",\n          \"association\": \"A_messagePath_correlationset\"\n        },\n        {\n          \"name\": \"messageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_messageRef_correlationPropertyRetrievalExpression\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CorrelationPropertyBinding\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"dataPath\",\n          \"type\": \"FormalExpression\",\n          \"association\": \"A_dataPath_correlationPropertyBinding\"\n        },\n        {\n          \"name\": \"correlationPropertyRef\",\n          \"type\": \"CorrelationProperty\",\n          \"association\": \"A_correlationPropertyRef_correlationPropertyBinding\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Resource\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"resourceParameters\",\n          \"type\": \"ResourceParameter\",\n          \"association\": \"A_resourceParameters_resource\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ResourceParameter\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"isRequired\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"type\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_type_resourceParameter\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CorrelationSubscription\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"correlationKeyRef\",\n          \"type\": \"CorrelationKey\",\n          \"association\": \"A_correlationKeyRef_correlationSubscription\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"correlationPropertyBinding\",\n          \"type\": \"CorrelationPropertyBinding\",\n          \"association\": \"A_correlationPropertyBinding_correlationSubscription\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"MessageFlow\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"sourceRef\",\n          \"type\": \"InteractionNode\",\n          \"association\": \"A_sourceRef_messageFlow\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"targetRef\",\n          \"type\": \"InteractionNode\",\n          \"association\": \"A_targetRef_messageFlow\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"messageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_messageRef_messageFlow\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"MessageFlowAssociation\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"innerMessageFlowRef\",\n          \"type\": \"MessageFlow\",\n          \"association\": \"A_innerMessageFlowRef_messageFlowAssociation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outerMessageFlowRef\",\n          \"type\": \"MessageFlow\",\n          \"association\": \"A_outerMessageFlowRef_messageFlowAssociation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"InteractionNode\",\n      \"isAbstract\": true,\n      \"properties\": [\n        {\n          \"name\": \"incomingConversationLinks\",\n          \"type\": \"ConversationLink\",\n          \"association\": \"A_targetRef_incomingConversationLinks\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outgoingConversationLinks\",\n          \"type\": \"ConversationLink\",\n          \"association\": \"A_sourceRef_outgoingConversationLinks\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Participant\",\n      \"superClass\": [\n        \"InteractionNode\",\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"interfaceRefs\",\n          \"type\": \"Interface\",\n          \"association\": \"A_interfaceRefs_participant\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"participantMultiplicity\",\n          \"type\": \"ParticipantMultiplicity\",\n          \"association\": \"A_participantMultiplicity_participant\"\n        },\n        {\n          \"name\": \"endPointRefs\",\n          \"type\": \"EndPoint\",\n          \"association\": \"A_endPointRefs_participant\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"processRef\",\n          \"type\": \"Process\",\n          \"association\": \"A_processRef_participant\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ParticipantAssociation\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"innerParticipantRef\",\n          \"type\": \"Participant\",\n          \"association\": \"A_innerParticipantRef_participantAssociation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outerParticipantRef\",\n          \"type\": \"Participant\",\n          \"association\": \"A_outerParticipantRef_participantAssociation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ParticipantMultiplicity\",\n      \"properties\": [\n        {\n          \"name\": \"minimum\",\n          \"default\": 0,\n          \"isAttr\": true,\n          \"type\": \"Integer\"\n        },\n        {\n          \"name\": \"maximum\",\n          \"default\": 1,\n          \"isAttr\": true,\n          \"type\": \"Integer\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Collaboration\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"isClosed\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"choreographyRef\",\n          \"type\": \"Choreography\",\n          \"association\": \"A_choreographyRef_collaboration\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"artifacts\",\n          \"type\": \"Artifact\",\n          \"association\": \"A_artifacts_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"participantAssociations\",\n          \"type\": \"ParticipantAssociation\",\n          \"association\": \"A_participantAssociations_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"messageFlowAssociations\",\n          \"type\": \"MessageFlowAssociation\",\n          \"association\": \"A_messageFlowAssociations_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"conversationAssociations\",\n          \"type\": \"ConversationAssociation\",\n          \"association\": \"A_conversationAssociations_converstaionAssociations\"\n        },\n        {\n          \"name\": \"participants\",\n          \"type\": \"Participant\",\n          \"association\": \"A_participants_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"messageFlows\",\n          \"type\": \"MessageFlow\",\n          \"association\": \"A_messageFlows_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"correlationKeys\",\n          \"type\": \"CorrelationKey\",\n          \"association\": \"A_correlationKeys_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"conversations\",\n          \"type\": \"ConversationNode\",\n          \"association\": \"A_conversations_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"conversationLinks\",\n          \"type\": \"ConversationLink\",\n          \"association\": \"A_conversationLinks_collaboration\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ChoreographyActivity\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"FlowNode\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"participantRefs\",\n          \"type\": \"Participant\",\n          \"association\": \"A_participantRefs_choreographyActivity\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"initiatingParticipantRef\",\n          \"type\": \"Participant\",\n          \"association\": \"A_initiatingParticipantRef_choreographyActivity\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"correlationKeys\",\n          \"type\": \"CorrelationKey\",\n          \"association\": \"A_correlationKeys_choreographyActivity\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"loopType\",\n          \"type\": \"ChoreographyLoopType\",\n          \"default\": \"None\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CallChoreography\",\n      \"superClass\": [\n        \"ChoreographyActivity\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"calledChoreographyRef\",\n          \"type\": \"Choreography\",\n          \"association\": \"A_calledChoreographyRef_callChoreographyActivity\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"participantAssociations\",\n          \"type\": \"ParticipantAssociation\",\n          \"association\": \"A_participantAssociations_callChoreographyActivity\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"SubChoreography\",\n      \"superClass\": [\n        \"ChoreographyActivity\",\n        \"FlowElementsContainer\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"artifacts\",\n          \"type\": \"Artifact\",\n          \"association\": \"A_artifacts_subChoreography\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ChoreographyTask\",\n      \"superClass\": [\n        \"ChoreographyActivity\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"messageFlowRef\",\n          \"type\": \"MessageFlow\",\n          \"association\": \"A_messageFlowRef_choreographyTask\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Choreography\",\n      \"superClass\": [\n        \"FlowElementsContainer\",\n        \"Collaboration\"\n      ]\n    },\n    {\n      \"name\": \"GlobalChoreographyTask\",\n      \"superClass\": [\n        \"Choreography\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"initiatingParticipantRef\",\n          \"type\": \"Participant\",\n          \"association\": \"A_initiatingParticipantRef_globalChoreographyTask\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"TextAnnotation\",\n      \"superClass\": [\n        \"Artifact\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"text\",\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"textFormat\",\n          \"default\": \"text/plain\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Group\",\n      \"superClass\": [\n        \"Artifact\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"categoryValueRef\",\n          \"type\": \"CategoryValue\",\n          \"association\": \"A_categoryValueRef_categoryValueRef\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Association\",\n      \"superClass\": [\n        \"Artifact\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"associationDirection\",\n          \"type\": \"AssociationDirection\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"sourceRef\",\n          \"type\": \"BaseElement\",\n          \"association\": \"A_sourceRef_outgoing_association\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"targetRef\",\n          \"type\": \"BaseElement\",\n          \"association\": \"A_targetRef_incoming_association\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Category\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"categoryValue\",\n          \"type\": \"CategoryValue\",\n          \"association\": \"A_categoryValue_category\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Artifact\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"CategoryValue\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"categorizedFlowElements\",\n          \"type\": \"FlowElement\",\n          \"association\": \"A_categorizedFlowElements_categoryValueRef\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"value\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Activity\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"FlowNode\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"isForCompensation\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"loopCharacteristics\",\n          \"type\": \"LoopCharacteristics\",\n          \"association\": \"A_loopCharacteristics_activity\"\n        },\n        {\n          \"name\": \"resources\",\n          \"type\": \"ResourceRole\",\n          \"association\": \"A_resources_activity\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"default\",\n          \"type\": \"SequenceFlow\",\n          \"association\": \"A_default_activity\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"properties\",\n          \"type\": \"Property\",\n          \"association\": \"A_properties_activity\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"ioSpecification\",\n          \"type\": \"InputOutputSpecification\",\n          \"association\": \"A_ioSpecification_activity\"\n        },\n        {\n          \"name\": \"boundaryEventRefs\",\n          \"type\": \"BoundaryEvent\",\n          \"association\": \"A_boundaryEventRefs_attachedToRef\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"dataInputAssociations\",\n          \"type\": \"DataInputAssociation\",\n          \"association\": \"A_dataInputAssociations_activity\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"dataOutputAssociations\",\n          \"type\": \"DataOutputAssociation\",\n          \"association\": \"A_dataOutputAssociations_activity\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"startQuantity\",\n          \"default\": 1,\n          \"isAttr\": true,\n          \"type\": \"Integer\"\n        },\n        {\n          \"name\": \"completionQuantity\",\n          \"default\": 1,\n          \"isAttr\": true,\n          \"type\": \"Integer\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ServiceTask\",\n      \"superClass\": [\n        \"Task\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"operationRef\",\n          \"type\": \"Operation\",\n          \"association\": \"A_operationRef_serviceTask\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"SubProcess\",\n      \"superClass\": [\n        \"Activity\",\n        \"FlowElementsContainer\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"triggeredByEvent\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"artifacts\",\n          \"type\": \"Artifact\",\n          \"association\": \"A_artifacts_subProcess\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"LoopCharacteristics\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"MultiInstanceLoopCharacteristics\",\n      \"superClass\": [\n        \"LoopCharacteristics\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"isSequential\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"behavior\",\n          \"type\": \"MultiInstanceBehavior\",\n          \"default\": \"All\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"loopCardinality\",\n          \"type\": \"Expression\",\n          \"association\": \"A_loopCardinality_multiInstanceLoopCharacteristics\"\n        },\n        {\n          \"name\": \"loopDataInputRef\",\n          \"type\": \"ItemAwareElement\",\n          \"association\": \"A_loopDataInputRef_multiInstanceLoopCharacteristics\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"loopDataOutputRef\",\n          \"type\": \"ItemAwareElement\",\n          \"association\": \"A_loopDataOutputRef_multiInstanceLoopCharacteristics\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"inputDataItem\",\n          \"type\": \"DataInput\",\n          \"association\": \"A_inputDataItem_multiInstanceLoopCharacteristics\"\n        },\n        {\n          \"name\": \"outputDataItem\",\n          \"type\": \"DataOutput\",\n          \"association\": \"A_outputDataItem_multiInstanceLoopCharacteristics\"\n        },\n        {\n          \"name\": \"completionCondition\",\n          \"type\": \"Expression\",\n          \"association\": \"A_completionCondition_multiInstanceLoopCharacteristics\"\n        },\n        {\n          \"name\": \"complexBehaviorDefinition\",\n          \"type\": \"ComplexBehaviorDefinition\",\n          \"association\": \"A_complexBehaviorDefinition_multiInstanceLoopCharacteristics\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"oneBehaviorEventRef\",\n          \"type\": \"EventDefinition\",\n          \"association\": \"A_oneBehaviorEventRef_multiInstanceLoopCharacteristics\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"noneBehaviorEventRef\",\n          \"type\": \"EventDefinition\",\n          \"association\": \"A_noneBehaviorEventRef_multiInstanceLoopCharacteristics\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"StandardLoopCharacteristics\",\n      \"superClass\": [\n        \"LoopCharacteristics\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"testBefore\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"loopCondition\",\n          \"type\": \"Expression\",\n          \"association\": \"A_loopCondition_standardLoopCharacteristics\"\n        },\n        {\n          \"name\": \"loopMaximum\",\n          \"type\": \"Expression\",\n          \"association\": \"A_loopMaximum_standardLoopCharacteristics\"\n        }\n      ]\n    },\n    {\n      \"name\": \"CallActivity\",\n      \"superClass\": [\n        \"Activity\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"calledElement\",\n          \"type\": \"String\",\n          \"association\": \"A_calledElementRef_callActivity\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Task\",\n      \"superClass\": [\n        \"Activity\",\n        \"InteractionNode\"\n      ]\n    },\n    {\n      \"name\": \"SendTask\",\n      \"superClass\": [\n        \"Task\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"operationRef\",\n          \"type\": \"Operation\",\n          \"association\": \"A_operationRef_sendTask\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"messageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_messageRef_sendTask\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ReceiveTask\",\n      \"superClass\": [\n        \"Task\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"instantiate\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"operationRef\",\n          \"type\": \"Operation\",\n          \"association\": \"A_operationRef_receiveTask\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"messageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_messageRef_receiveTask\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ScriptTask\",\n      \"superClass\": [\n        \"Task\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"scriptFormat\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"script\",\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"BusinessRuleTask\",\n      \"superClass\": [\n        \"Task\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"AdHocSubProcess\",\n      \"superClass\": [\n        \"SubProcess\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"completionCondition\",\n          \"type\": \"Expression\",\n          \"association\": \"A_completionCondition_adHocSubProcess\"\n        },\n        {\n          \"name\": \"ordering\",\n          \"type\": \"AdHocOrdering\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"cancelRemainingInstances\",\n          \"default\": true,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Transaction\",\n      \"superClass\": [\n        \"SubProcess\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"protocol\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"method\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"GlobalScriptTask\",\n      \"superClass\": [\n        \"GlobalTask\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"scriptLanguage\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"script\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"GlobalBusinessRuleTask\",\n      \"superClass\": [\n        \"GlobalTask\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ComplexBehaviorDefinition\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"condition\",\n          \"type\": \"FormalExpression\",\n          \"association\": \"A_condition_complexBehaviorDefinition\"\n        },\n        {\n          \"name\": \"event\",\n          \"type\": \"ImplicitThrowEvent\",\n          \"association\": \"A_event_complexBehaviorDefinition\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ResourceRole\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"resourceRef\",\n          \"type\": \"Resource\",\n          \"association\": \"A_resourceRef_activityResource\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"resourceParameterBindings\",\n          \"type\": \"ResourceParameterBinding\",\n          \"association\": \"A_resourceParameterBindings_activityResource\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"resourceAssignmentExpression\",\n          \"type\": \"ResourceAssignmentExpression\",\n          \"association\": \"A_resourceAssignmentExpression_activityResource\"\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ResourceParameterBinding\",\n      \"properties\": [\n        {\n          \"name\": \"expression\",\n          \"type\": \"Expression\",\n          \"association\": \"A_expression_resourceParameterBinding\"\n        },\n        {\n          \"name\": \"parameterRef\",\n          \"type\": \"ResourceParameter\",\n          \"association\": \"A_parameterRef_resourceParameterBinding\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ResourceAssignmentExpression\",\n      \"properties\": [\n        {\n          \"name\": \"expression\",\n          \"type\": \"Expression\",\n          \"association\": \"A_expression_resourceAssignmentExpression\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Import\",\n      \"properties\": [\n        {\n          \"name\": \"importType\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"location\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"namespace\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Definitions\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"targetNamespace\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"expressionLanguage\",\n          \"default\": \"http://www.w3.org/1999/XPath\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"typeLanguage\",\n          \"default\": \"http://www.w3.org/2001/XMLSchema\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"imports\",\n          \"type\": \"Import\",\n          \"association\": \"A_imports_definition\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"extensions\",\n          \"type\": \"Extension\",\n          \"association\": \"A_extensions_definitions\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"relationships\",\n          \"type\": \"Relationship\",\n          \"association\": \"A_relationships_definition\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"rootElements\",\n          \"type\": \"RootElement\",\n          \"association\": \"A_rootElements_definition\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"diagrams\",\n          \"association\": \"A_diagrams_definitions\",\n          \"isMany\": true,\n          \"type\": \"bpmndi:BPMNDiagram\"\n        },\n        {\n          \"name\": \"exporter\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"exporterVersion\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    }\n  ],\n  \"emumerations\": [\n    {\n      \"name\": \"ProcessType\",\n      \"literalValues\": [\n        {\n          \"name\": \"None\"\n        },\n        {\n          \"name\": \"Public\"\n        },\n        {\n          \"name\": \"Private\"\n        }\n      ]\n    },\n    {\n      \"name\": \"GatewayDirection\",\n      \"literalValues\": [\n        {\n          \"name\": \"Unspecified\"\n        },\n        {\n          \"name\": \"Converging\"\n        },\n        {\n          \"name\": \"Diverging\"\n        },\n        {\n          \"name\": \"Mixed\"\n        }\n      ]\n    },\n    {\n      \"name\": \"EventBasedGatewayType\",\n      \"literalValues\": [\n        {\n          \"name\": \"Parallel\"\n        },\n        {\n          \"name\": \"Exclusive\"\n        }\n      ]\n    },\n    {\n      \"name\": \"RelationshipDirection\",\n      \"literalValues\": [\n        {\n          \"name\": \"None\"\n        },\n        {\n          \"name\": \"Forward\"\n        },\n        {\n          \"name\": \"Backward\"\n        },\n        {\n          \"name\": \"Both\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ItemKind\",\n      \"literalValues\": [\n        {\n          \"name\": \"Physical\"\n        },\n        {\n          \"name\": \"Information\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ChoreographyLoopType\",\n      \"literalValues\": [\n        {\n          \"name\": \"None\"\n        },\n        {\n          \"name\": \"Standard\"\n        },\n        {\n          \"name\": \"MultiInstanceSequential\"\n        },\n        {\n          \"name\": \"MultiInstanceParallel\"\n        }\n      ]\n    },\n    {\n      \"name\": \"AssociationDirection\",\n      \"literalValues\": [\n        {\n          \"name\": \"None\"\n        },\n        {\n          \"name\": \"One\"\n        },\n        {\n          \"name\": \"Both\"\n        }\n      ]\n    },\n    {\n      \"name\": \"MultiInstanceBehavior\",\n      \"literalValues\": [\n        {\n          \"name\": \"None\"\n        },\n        {\n          \"name\": \"One\"\n        },\n        {\n          \"name\": \"All\"\n        },\n        {\n          \"name\": \"Complex\"\n        }\n      ]\n    },\n    {\n      \"name\": \"AdHocOrdering\",\n      \"literalValues\": [\n        {\n          \"name\": \"Parallel\"\n        },\n        {\n          \"name\": \"Sequential\"\n        }\n      ]\n    }\n  ],\n  \"prefix\": \"bpmn\",\n  \"xml\": {\n    \"alias\": \"lowerCase\"\n  }\n}\n},{}],29:[function(_dereq_,module,exports){\nmodule.exports={\n  \"name\": \"BPMNDI\",\n  \"uri\": \"http://www.omg.org/spec/BPMN/20100524/DI\",\n  \"types\": [\n    {\n      \"name\": \"BPMNDiagram\",\n      \"properties\": [\n        {\n          \"name\": \"plane\",\n          \"type\": \"BPMNPlane\",\n          \"association\": \"A_plane_diagram\",\n          \"redefines\": \"di:Diagram#rootElement\"\n        },\n        {\n          \"name\": \"labelStyle\",\n          \"type\": \"BPMNLabelStyle\",\n          \"association\": \"A_labelStyle_diagram\",\n          \"isMany\": true\n        }\n      ],\n      \"superClass\": [\n        \"di:Diagram\"\n      ]\n    },\n    {\n      \"name\": \"BPMNPlane\",\n      \"properties\": [\n        {\n          \"name\": \"bpmnElement\",\n          \"association\": \"A_bpmnElement_plane\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"type\": \"bpmn:BaseElement\",\n          \"redefines\": \"di:DiagramElement#modelElement\"\n        }\n      ],\n      \"superClass\": [\n        \"di:Plane\"\n      ]\n    },\n    {\n      \"name\": \"BPMNShape\",\n      \"properties\": [\n        {\n          \"name\": \"bpmnElement\",\n          \"association\": \"A_bpmnElement_shape\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"type\": \"bpmn:BaseElement\",\n          \"redefines\": \"di:DiagramElement#modelElement\"\n        },\n        {\n          \"name\": \"isHorizontal\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"isExpanded\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"isMarkerVisible\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"label\",\n          \"type\": \"BPMNLabel\",\n          \"association\": \"A_label_shape\"\n        },\n        {\n          \"name\": \"isMessageVisible\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"participantBandKind\",\n          \"type\": \"ParticipantBandKind\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"choreographyActivityShape\",\n          \"type\": \"BPMNShape\",\n          \"association\": \"A_choreographyActivityShape_participantBandShape\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ],\n      \"superClass\": [\n        \"di:LabeledShape\"\n      ]\n    },\n    {\n      \"name\": \"BPMNEdge\",\n      \"properties\": [\n        {\n          \"name\": \"label\",\n          \"type\": \"BPMNLabel\",\n          \"association\": \"A_label_edge\"\n        },\n        {\n          \"name\": \"bpmnElement\",\n          \"association\": \"A_bpmnElement_edge\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"type\": \"bpmn:BaseElement\",\n          \"redefines\": \"di:DiagramElement#modelElement\"\n        },\n        {\n          \"name\": \"sourceElement\",\n          \"association\": \"A_sourceElement_sourceEdge\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"type\": \"di:DiagramElement\",\n          \"redefines\": \"di:Edge#source\"\n        },\n        {\n          \"name\": \"targetElement\",\n          \"association\": \"A_targetElement_targetEdge\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"type\": \"di:DiagramElement\",\n          \"redefines\": \"di:Edge#target\"\n        },\n        {\n          \"name\": \"messageVisibleKind\",\n          \"type\": \"MessageVisibleKind\",\n          \"isAttr\": true,\n          \"default\": \"initiating\"\n        }\n      ],\n      \"superClass\": [\n        \"di:LabeledEdge\"\n      ]\n    },\n    {\n      \"name\": \"BPMNLabel\",\n      \"properties\": [\n        {\n          \"name\": \"labelStyle\",\n          \"type\": \"BPMNLabelStyle\",\n          \"association\": \"A_labelStyle_label\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"redefines\": \"di:DiagramElement#style\"\n        }\n      ],\n      \"superClass\": [\n        \"di:Label\"\n      ]\n    },\n    {\n      \"name\": \"BPMNLabelStyle\",\n      \"properties\": [\n        {\n          \"name\": \"font\",\n          \"type\": \"dc:Font\"\n        }\n      ],\n      \"superClass\": [\n        \"di:Style\"\n      ]\n    }\n  ],\n  \"emumerations\": [\n    {\n      \"name\": \"ParticipantBandKind\",\n      \"literalValues\": [\n        {\n          \"name\": \"top_initiating\"\n        },\n        {\n          \"name\": \"middle_initiating\"\n        },\n        {\n          \"name\": \"bottom_initiating\"\n        },\n        {\n          \"name\": \"top_non_initiating\"\n        },\n        {\n          \"name\": \"middle_non_initiating\"\n        },\n        {\n          \"name\": \"bottom_non_initiating\"\n        }\n      ]\n    },\n    {\n      \"name\": \"MessageVisibleKind\",\n      \"literalValues\": [\n        {\n          \"name\": \"initiating\"\n        },\n        {\n          \"name\": \"non_initiating\"\n        }\n      ]\n    }\n  ],\n  \"associations\": [],\n  \"prefix\": \"bpmndi\"\n}\n},{}],30:[function(_dereq_,module,exports){\nmodule.exports={\n  \"name\": \"DC\",\n  \"uri\": \"http://www.omg.org/spec/DD/20100524/DC\",\n  \"types\": [\n    {\n      \"name\": \"Boolean\"\n    },\n    {\n      \"name\": \"Integer\"\n    },\n    {\n      \"name\": \"Real\"\n    },\n    {\n      \"name\": \"String\"\n    },\n    {\n      \"name\": \"Font\",\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"type\": \"String\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"size\",\n          \"type\": \"Real\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"isBold\",\n          \"type\": \"Boolean\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"isItalic\",\n          \"type\": \"Boolean\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"isUnderline\",\n          \"type\": \"Boolean\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"isStrikeThrough\",\n          \"type\": \"Boolean\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Point\",\n      \"properties\": [\n        {\n          \"name\": \"x\",\n          \"type\": \"Real\",\n          \"default\": \"0\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"y\",\n          \"type\": \"Real\",\n          \"default\": \"0\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Bounds\",\n      \"properties\": [\n        {\n          \"name\": \"x\",\n          \"type\": \"Real\",\n          \"default\": \"0\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"y\",\n          \"type\": \"Real\",\n          \"default\": \"0\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"width\",\n          \"type\": \"Real\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"height\",\n          \"type\": \"Real\",\n          \"isAttr\": true\n        }\n      ]\n    }\n  ],\n  \"prefix\": \"dc\",\n  \"associations\": []\n}\n},{}],31:[function(_dereq_,module,exports){\nmodule.exports={\n  \"name\": \"DI\",\n  \"uri\": \"http://www.omg.org/spec/DD/20100524/DI\",\n  \"types\": [\n    {\n      \"name\": \"DiagramElement\",\n      \"isAbstract\": true,\n      \"properties\": [\n        {\n          \"name\": \"owningDiagram\",\n          \"type\": \"Diagram\",\n          \"isReadOnly\": true,\n          \"association\": \"A_rootElement_owningDiagram\",\n          \"isVirtual\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"owningElement\",\n          \"type\": \"DiagramElement\",\n          \"isReadOnly\": true,\n          \"association\": \"A_ownedElement_owningElement\",\n          \"isVirtual\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"modelElement\",\n          \"isReadOnly\": true,\n          \"association\": \"A_modelElement_diagramElement\",\n          \"isVirtual\": true,\n          \"isReference\": true,\n          \"type\": \"Element\"\n        },\n        {\n          \"name\": \"style\",\n          \"type\": \"Style\",\n          \"isReadOnly\": true,\n          \"association\": \"A_style_diagramElement\",\n          \"isVirtual\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"ownedElement\",\n          \"type\": \"DiagramElement\",\n          \"isReadOnly\": true,\n          \"association\": \"A_ownedElement_owningElement\",\n          \"isVirtual\": true,\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Node\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"DiagramElement\"\n      ]\n    },\n    {\n      \"name\": \"Edge\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"DiagramElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"source\",\n          \"type\": \"DiagramElement\",\n          \"isReadOnly\": true,\n          \"association\": \"A_source_sourceEdge\",\n          \"isVirtual\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"target\",\n          \"type\": \"DiagramElement\",\n          \"isReadOnly\": true,\n          \"association\": \"A_target_targetEdge\",\n          \"isVirtual\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"waypoint\",\n          \"isUnique\": false,\n          \"isMany\": true,\n          \"type\": \"dc:Point\",\n          \"serialize\": \"xsi:type\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Diagram\",\n      \"isAbstract\": true,\n      \"properties\": [\n        {\n          \"name\": \"rootElement\",\n          \"type\": \"DiagramElement\",\n          \"isReadOnly\": true,\n          \"association\": \"A_rootElement_owningDiagram\",\n          \"isVirtual\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"documentation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"resolution\",\n          \"isAttr\": true,\n          \"type\": \"Real\"\n        },\n        {\n          \"name\": \"ownedStyle\",\n          \"type\": \"Style\",\n          \"isReadOnly\": true,\n          \"association\": \"A_ownedStyle_owningDiagram\",\n          \"isVirtual\": true,\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Shape\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Node\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"bounds\",\n          \"type\": \"dc:Bounds\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Plane\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Node\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"planeElement\",\n          \"type\": \"DiagramElement\",\n          \"subsettedProperty\": \"DiagramElement-ownedElement\",\n          \"association\": \"A_planeElement_plane\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"LabeledEdge\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Edge\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"ownedLabel\",\n          \"type\": \"Label\",\n          \"isReadOnly\": true,\n          \"subsettedProperty\": \"DiagramElement-ownedElement\",\n          \"association\": \"A_ownedLabel_owningEdge\",\n          \"isVirtual\": true,\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"LabeledShape\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Shape\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"ownedLabel\",\n          \"type\": \"Label\",\n          \"isReadOnly\": true,\n          \"subsettedProperty\": \"DiagramElement-ownedElement\",\n          \"association\": \"A_ownedLabel_owningShape\",\n          \"isVirtual\": true,\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Label\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Node\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"bounds\",\n          \"type\": \"dc:Bounds\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Style\",\n      \"isAbstract\": true\n    }\n  ],\n  \"associations\": [],\n  \"prefix\": \"di\"\n}\n},{}],32:[function(_dereq_,module,exports){\nmodule.exports = _dereq_('./lib/Diagram');\n},{\"./lib/Diagram\":33}],33:[function(_dereq_,module,exports){\n'use strict';\n\nvar di = _dereq_('didi');\n\n/**\n * @namespace djs\n */\n\n/**\n * Bootstrap an injector from a list of modules, instantiating a number of default components\n *\n * @ignore\n * @param {Array<didi.Module>} bootstrapModules\n *\n * @return {didi.Injector} a injector to use to access the components\n */\nfunction bootstrap(bootstrapModules) {\n\n  var modules = [];\n  var components = [];\n\n  function hasModule(m) {\n    return modules.indexOf(m) >= 0;\n  }\n\n  function addModule(m) {\n    modules.push(m);\n  }\n\n  function visit(m) {\n    if (hasModule(m)) {\n      return;\n    }\n\n    (m.__depends__ || []).forEach(visit);\n\n    if (hasModule(m)) {\n      return;\n    }\n\n    addModule(m);\n\n    (m.__init__ || []).forEach(function(c) {\n      components.push(c);\n    });\n  }\n\n  bootstrapModules.forEach(visit);\n\n  var injector = new di.Injector(modules);\n\n  components.forEach(function(c) {\n    // eagerly resolve main components\n    injector.get(c);\n  });\n\n  return injector;\n}\n\n/**\n * Creates an injector from passed options.\n *\n * @ignore\n * @param  {Object} options\n * @return {didi.Injector}\n */\nfunction createInjector(options) {\n\n  options = options || {};\n\n  var configModule = {\n    'config': ['value', options]\n  };\n\n  var coreModule = _dereq_('./core');\n\n  var modules = [ configModule, coreModule ].concat(options.modules || []);\n\n  return bootstrap(modules);\n}\n\n\n/**\n * The main diagram-js entry point that bootstraps the diagram with the given\n * configuration. To register extensions with the diagram, pass them as Array<didi.Module> to the constructor.\n *\n * @class djs.Diagram\n * @memberOf djs\n * @constructor\n *\n * @example\n *\n * <caption>Creating a plug-in that logs whenever a shape is added to the canvas.</caption>\n *\n * // plug-in implemenentation\n * function MyLoggingPlugin(eventBus) {\n *   eventBus.on('shape.added', function(event) {\n *     console.log('shape ', event.shape, ' was added to the diagram');\n *   });\n * }\n *\n * // export as module\n * module.exports = {\n *   __init__: [ 'myLoggingPlugin' ],\n *     myLoggingPlugin: [ 'type', MyLoggingPlugin ]\n * };\n *\n *\n * // instantiate the diagram with the new plug-in\n *\n * var diagram = new Diagram({ modules: [ require('path-to-my-logging-plugin') ] });\n *\n * diagram.invoke([ 'canvas', function(canvas) {\n *   // add shape to drawing canvas\n *   canvas.addShape({ x: 10, y: 10 });\n * });\n *\n * // 'shape ... was added to the diagram' logged to console\n *\n * @param {Object} options\n * @param {Array<didi.Module>} [options.modules] external modules to instantiate with the diagram\n * @param {didi.Injector} [injector] an (optional) injector to bootstrap the diagram with\n */\nfunction Diagram(options, injector) {\n\n  // create injector unless explicitly specified\n  this.injector = injector = injector || createInjector(options);\n\n  // API\n\n  /**\n   * Resolves a diagram service\n   *\n   * @method Diagram#get\n   *\n   * @param {String} name the name of the diagram service to be retrieved\n   * @param {Object} [locals] a number of locals to use to resolve certain dependencies\n   */\n  this.get = injector.get;\n\n  /**\n   * Executes a function into which diagram services are injected\n   *\n   * @method Diagram#invoke\n   *\n   * @param {Function|Object[]} fn the function to resolve\n   * @param {Object} locals a number of locals to use to resolve certain dependencies\n   */\n  this.invoke = injector.invoke;\n\n  // init\n\n  // indicate via event\n\n\n  /**\n   * An event indicating that all plug-ins are loaded.\n   *\n   * Use this event to fire other events to interested plug-ins\n   *\n   * @memberOf Diagram\n   *\n   * @event diagram.init\n   *\n   * @example\n   *\n   * events.on('diagram.init', function() {\n   *   events.fire('my-custom-event', { foo: 'BAR' });\n   * });\n   *\n   * @type {Object}\n   */\n  this.get('eventBus').fire('diagram.init');\n}\n\nmodule.exports = Diagram;\n\n\n/**\n * Destroys the diagram\n *\n * @method  Diagram#destroy\n */\nDiagram.prototype.destroy = function() {\n  this.get('eventBus').fire('diagram.destroy');\n};\n},{\"./core\":39,\"didi\":60}],34:[function(_dereq_,module,exports){\n'use strict';\n\n\nvar _ = (window._);\n\nvar remove = _dereq_('../util/Collections').remove;\n\n\nfunction round(number, resolution) {\n  return Math.round(number * resolution) / resolution;\n}\n\nfunction ensurePx(number) {\n  return _.isNumber(number) ? number + 'px' : number;\n}\n\n/**\n * Creates a HTML container element for a SVG element with\n * the given configuration\n *\n * @param  {Object} options\n * @return {HTMLElement} the container element\n */\nfunction createContainer(options) {\n\n  options = _.extend({}, { width: '100%', height: '100%' }, options);\n\n  var container = options.container || document.body;\n\n  // create a <div> around the svg element with the respective size\n  // this way we can always get the correct container size\n  // (this is impossible for <svg> elements at the moment)\n  var parent = document.createElement('div');\n  parent.setAttribute('class', 'djs-container');\n\n  _.extend(parent.style, {\n    position: 'relative',\n    width: ensurePx(options.width),\n    height: ensurePx(options.height)\n  });\n\n  container.appendChild(parent);\n\n  return parent;\n}\n\nfunction createGroup(parent, cls) {\n  return parent.group().attr({ 'class' : cls });\n}\n\nvar BASE_LAYER = 'base';\n\n\n/**\n * The main drawing canvas.\n *\n * @class\n * @constructor\n *\n * @emits Canvas#canvas.init\n *\n * @param {Object} config\n * @param {EventBus} eventBus\n * @param {GraphicsFactory} graphicsFactory\n * @param {ElementRegistry} elementRegistry\n * @param {Snap} snap\n */\nfunction Canvas(config, eventBus, graphicsFactory, elementRegistry, snap) {\n\n  this._snap = snap;\n  this._eventBus = eventBus;\n  this._elementRegistry = elementRegistry;\n  this._graphicsFactory = graphicsFactory;\n\n  this._init(config || {});\n}\n\nCanvas.$inject = [ 'config.canvas', 'eventBus', 'graphicsFactory', 'elementRegistry', 'snap' ];\n\nmodule.exports = Canvas;\n\n\nCanvas.prototype._init = function(config) {\n\n  // Creates a <svg> element that is wrapped into a <div>.\n  // This way we are always able to correctly figure out the size of the svg element\n  // by querying the parent node.\n  //\n  // (It is not possible to get the size of a svg element cross browser @ 2014-04-01)\n  //\n  // <div class=\"djs-container\" style=\"width: {desired-width}, height: {desired-height}\">\n  //   <svg width=\"100%\" height=\"100%\">\n  //    ...\n  //   </svg>\n  // </div>\n\n  // html container\n  var container = this._container = createContainer(config);\n\n  // svg root\n  var paper = this._paper = this._graphicsFactory.createPaper({\n    container: container,\n    width: '100%', height: '100%'\n  });\n\n  // drawing root\n  var root = this._root = createGroup(paper, 'viewport');\n\n  // layers\n  this._layers = {};\n\n  // init base layer\n  this.getLayer(BASE_LAYER);\n\n  var eventBus = this._eventBus;\n\n  eventBus.on('diagram.init', function(event) {\n\n    /**\n     * An event indicating that the canvas is ready to be drawn on.\n     *\n     * @memberOf Canvas\n     *\n     * @event canvas.init\n     *\n     * @type {Object}\n     * @property {snapsvg.Paper} paper the initialized drawing paper\n     */\n    eventBus.fire('canvas.init', { root: root, paper: paper });\n  });\n\n  var self = this;\n\n  eventBus.on('diagram.destroy', function() {\n\n    if (container) {\n      var parent = container.parentNode;\n      parent.removeChild(container);\n    }\n\n    self._paper.remove();\n\n    self._paper = self._root = self._layers = self._container = null;\n  });\n\n};\n\n\n/**\n * Ensure that an element has a valid, unique id\n *\n * @param {djs.model.Base} element\n */\nCanvas.prototype._ensureValidId = function(element) {\n  if (!element.id) {\n    throw new Error('element must have an id');\n  }\n\n  if (this._elementRegistry.getById(element.id)) {\n    throw new Error('element with id ' + element.id + ' already exists');\n  }\n};\n\n/**\n * Returns the root rendering context on which\n * all elements are drawn.\n *\n * @returns {snapsvg.Group}\n */\nCanvas.prototype.getRoot = function() {\n  return this._root;\n};\n\n\nCanvas.prototype.getLayer = function(name) {\n\n  var layer = this._layers[name || BASE_LAYER];\n  if (!layer) {\n    layer = this._layers[name] = createGroup(this._root, 'layer-' + name);\n  }\n\n  return layer;\n};\n\n\n/**\n * Returns the html element that encloses the\n * drawing canvas.\n *\n * @return {DOMNode}\n */\nCanvas.prototype.getContainer = function() {\n  return this._container;\n};\n\n\nCanvas.prototype._updateMarker = function(element, marker, add) {\n  var gfx;\n\n  if (_.isString(element)) {\n    element = this._elementRegistry.getById(element);\n  }\n\n  gfx = this.getGraphics(element);\n\n  var mode = add ? 'add' : 'remove';\n\n  // invoke either addClass or removeClass based on mode\n  gfx[add ? 'addClass' : 'removeClass'](marker);\n\n  /**\n   * An event indicating that a marker has been updated for an element\n   *\n   * @event element.marker.update\n   * @type {Object}\n   * @property {djs.model.Element} element the shape\n   * @property {Object} gfx the graphical representation of the shape\n   * @property {String} marker\n   * @property {Boolean} add true if the marker was added, false if it got removed\n   */\n  this._eventBus.fire('element.marker.update', { element: element,  gfx: gfx, marker: marker, add: !!add });\n};\n\n\n/**\n * Adds a marker to an element (basically a css class).\n *\n * Fires the element.marker.update event, making it possible to\n * integrate extension into the marker life-cycle, too.\n *\n * @example\n * canvas.addMarker('foo', 'some-marker');\n *\n * var fooGfx = canvas.getGraphics('foo');\n *\n * fooGfx; // <g class=\"... some-marker\"> ... </g>\n *\n * @param {String|djs.model.Base} element\n * @param {String} marker\n */\nCanvas.prototype.addMarker = function(element, marker) {\n  this._updateMarker(element, marker, true);\n};\n\n\n/**\n * Remove a marker from an element.\n *\n * Fires the element.marker.update event, making it possible to\n * integrate extension into the marker life-cycle, too.\n *\n * @param  {String|djs.model.Base} element\n * @param  {String} marker\n */\nCanvas.prototype.removeMarker = function(element, marker) {\n  this._updateMarker(element, marker, false);\n};\n\n\n/**\n * Adds a shape to the canvas\n *\n * @param {Object|djs.model.Shape} shape to add to the diagram\n *\n * @return {djs.model.Shape} the added shape\n */\nCanvas.prototype.addShape = function(shape, parent) {\n\n  this._ensureValidId(shape);\n\n  if (parent) {\n    parent.children.push(shape);\n    shape.parent = parent;\n  }\n\n  // create shape gfx\n  var gfx = this._graphicsFactory.createShape(this.getLayer(BASE_LAYER), shape);\n\n  /**\n   * An event indicating that a new shape is being added to the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event shape.add\n   * @type {Object}\n   * @property {djs.model.Shape} element the shape\n   * @property {Object} gfx the graphical representation of the shape\n   */\n  this._eventBus.fire('shape.add', { element: shape, gfx: gfx });\n\n  this._elementRegistry.add(shape, gfx);\n\n  // update its visual\n  this._graphicsFactory.updateShape(shape, gfx);\n\n  /**\n   * An event indicating that a new shape has been added to the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event shape.added\n   * @type {Object}\n   * @property {djs.model.Shape} element the shape\n   * @property {Object} gfx the graphical representation of the shape\n   */\n  this._eventBus.fire('shape.added', { element: shape, gfx: gfx });\n\n  return shape;\n};\n\n\n/**\n * Adds a connection to the canvas\n *\n * @param {djs.model.Connection} connection to add to the diagram\n *\n * @return {djs.model.Connection} the added connection\n */\nCanvas.prototype.addConnection = function(connection, parent) {\n\n  this._ensureValidId(connection);\n\n  if (parent) {\n    parent.children.push(connection);\n    connection.parent = parent;\n  }\n\n  // create connection gfx\n  var gfx = this._graphicsFactory.createConnection(this.getLayer(BASE_LAYER), connection);\n\n  /**\n   * An event indicating that a new connection is being added to the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event connection.add\n   * @type {Object}\n   * @property {djs.model.Connection} element the connection\n   * @property {Object} gfx the graphical representation of the connection\n   */\n  this._eventBus.fire('connection.add', { element: connection, gfx: gfx });\n\n  this._elementRegistry.add(connection, gfx);\n\n  // update its visual\n  this._graphicsFactory.updateConnection(connection, gfx);\n\n  /**\n   * An event indicating that a new connection has been added to the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event connection.added\n   * @type {Object}\n   * @property {djs.model.Connection} element the connection\n   * @property {Object} gfx the graphical representation of the connection\n   */\n  this._eventBus.fire('connection.added', { element: connection, gfx: gfx });\n\n  return connection;\n};\n\n\n/**\n * Internal remove element\n */\nCanvas.prototype._removeElement = function(element, type) {\n\n  if (_.isString(element)) {\n    element = this._elementRegistry.getById(element);\n  }\n\n  var gfx = this.getGraphics(element);\n\n  this._eventBus.fire(type + '.remove', { element: element, gfx: gfx });\n\n  if (gfx) {\n    gfx.remove();\n  }\n\n  // unset parent <-> child relationship\n  remove(element.parent && element.parent.children, element);\n  element.parent = null;\n\n  this._eventBus.fire(type + '.removed', { element: element, gfx: gfx });\n\n  this._elementRegistry.remove(element, gfx);\n\n  return element;\n};\n\n\n/**\n * Removes a shape from the canvas\n *\n * @param {String|djs.model.Shape} shape or shape id to be removed\n *\n * @return {djs.model.Shape} the removed shape\n */\nCanvas.prototype.removeShape = function(shape) {\n\n  /**\n   * An event indicating that a shape is about to be removed from the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event shape.remove\n   * @type {Object}\n   * @property {djs.model.Shape} element the shape descriptor\n   * @property {Object} gfx the graphical representation of the shape\n   */\n\n  /**\n   * An event indicating that a shape has been removed from the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event shape.removed\n   * @type {Object}\n   * @property {djs.model.Shape} element the shape descriptor\n   * @property {Object} gfx the graphical representation of the shape\n   */\n  return this._removeElement(shape, 'shape');\n};\n\n\n/**\n * Removes a connection from the canvas\n *\n * @param {String|djs.model.Connection} connection or connection id to be removed\n *\n * @return {djs.model.Connection} the removed connection\n */\nCanvas.prototype.removeConnection = function(connection) {\n\n  /**\n   * An event indicating that a connection is about to be removed from the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event connection.remove\n   * @type {Object}\n   * @property {djs.model.Connection} element the connection descriptor\n   * @property {Object} gfx the graphical representation of the connection\n   */\n\n  /**\n   * An event indicating that a connection has been removed from the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event connection.removed\n   * @type {Object}\n   * @property {djs.model.Connection} element the connection descriptor\n   * @property {Object} gfx the graphical representation of the connection\n   */\n  return this._removeElement(connection, 'connection');\n};\n\n\n/**\n * Sends a shape to the front.\n *\n * This method takes parent / child relationships between shapes into account\n * and makes sure that children are properly handled, too.\n *\n * @param {djs.model.Shape} shape descriptor of the shape to be sent to front\n * @param {boolean} [bubble=true] whether to send parent shapes to front, too\n */\nCanvas.prototype.sendToFront = function(shape, bubble) {\n\n  if (bubble !== false) {\n    bubble = true;\n  }\n\n  if (bubble && shape.parent) {\n    this.sendToFront(shape.parent);\n  }\n\n  _.forEach(shape.children, function(child) {\n    this.sendToFront(child, false);\n  }, this);\n\n  var gfx = this.getGraphics(shape),\n      gfxParent = gfx.parent();\n\n  gfx.remove().appendTo(gfxParent);\n};\n\n\n/**\n * Return the graphical object underlaying a certain diagram element\n *\n * @param {String|djs.model.Base} element descriptor of the element\n */\nCanvas.prototype.getGraphics = function(element) {\n  return this._elementRegistry.getGraphicsByElement(element);\n};\n\n\nCanvas.prototype._fireViewboxChange = function(viewbox) {\n  this._eventBus.fire('canvas.viewbox.changed', { viewbox: viewbox || this.viewbox() });\n};\n\n\n/**\n * Gets or sets the view box of the canvas, i.e. the area that is currently displayed\n *\n * @param  {Object} [box] the new view box to set\n * @param  {Number} box.x the top left X coordinate of the canvas visible in view box\n * @param  {Number} box.y the top left Y coordinate of the canvas visible in view box\n * @param  {Number} box.width the visible width\n * @param  {Number} box.height\n *\n * @example\n *\n * canvas.viewbox({ x: 100, y: 100, width: 500, height: 500 })\n *\n * // sets the visible area of the diagram to (100|100) -> (600|100)\n * // and and scales it according to the diagram width\n *\n * @return {Object} the current view box\n */\nCanvas.prototype.viewbox = function(box) {\n\n  var root = this._root;\n\n  var innerBox,\n      outerBox = this.getSize(),\n      matrix,\n      scale,\n      x, y;\n\n  if (!box) {\n    innerBox = root.getBBox(true);\n\n    matrix = root.transform().localMatrix;\n    scale = round(matrix.a, 1000);\n\n    x = round(-matrix.e || 0, 1000);\n    y = round(-matrix.f || 0, 1000);\n\n    return {\n      x: x ? x / scale : 0,\n      y: y ? y / scale : 0,\n      width: outerBox.width / scale,\n      height: outerBox.height / scale,\n      scale: scale,\n      inner: {\n        width: innerBox.width,\n        height: innerBox.height\n      },\n      outer: outerBox\n    };\n  } else {\n    scale = Math.max(outerBox.width / box.width, outerBox.height / box.height);\n\n    matrix = new this._snap.Matrix().scale(scale).translate(-box.x, -box.y);\n    root.transform(matrix);\n\n    this._fireViewboxChange();\n  }\n\n  return box;\n};\n\n\n/**\n * Gets or sets the scroll of the canvas.\n *\n * @param {Object} [delta] the new scroll to apply.\n *\n * @param {Number} [delta.dx]\n * @param {Number} [delta.dy]\n */\nCanvas.prototype.scroll = function(delta) {\n\n  var node = this._root.node;\n  var matrix = node.getCTM();\n\n  if (delta) {\n    delta = _.extend({ dx: 0, dy: 0 }, delta || {});\n\n    matrix = this._paper.node.createSVGMatrix().translate(delta.dx, delta.dy).multiply(matrix);\n\n    setCTM(node, matrix);\n\n    this._fireViewboxChange();\n  }\n\n  return { x: matrix.e, y: matrix.f };\n};\n\n\n/**\n * Gets or sets the current zoom of the canvas, optionally zooming to the specified position.\n *\n * @param {String|Number} [newScale] the new zoom level, either a number, i.e. 0.9,\n *                                   or `fit-viewport` to adjust the size to fit the current viewport\n * @param {String|Point} [center] the reference point { x: .., y: ..} to zoom to, 'auto' to zoom into mid or null\n *\n * @return {Number} the current scale\n */\nCanvas.prototype.zoom = function(newScale, center) {\n\n  var vbox = this.viewbox();\n\n  if (newScale === undefined) {\n    return vbox.scale;\n  }\n\n  var outer = vbox.outer;\n\n  if (newScale === 'fit-viewport') {\n    newScale = Math.min(1, outer.width / vbox.inner.width);\n  }\n\n  if (center === 'auto') {\n    center = {\n      x: outer.width / 2,\n      y: outer.height / 2\n    };\n  }\n\n  var matrix = this._setZoom(newScale, center);\n\n  this._fireViewboxChange();\n\n  return round(matrix.a, 1000);\n};\n\nfunction setCTM(node, m) {\n  var mstr = 'matrix(' + m.a + ',' + m.b + ',' + m.c + ',' + m.d + ',' + m.e + ',' + m.f + ')';\n  node.setAttribute('transform', mstr);\n}\n\nCanvas.prototype._setZoom = function(scale, center) {\n\n  var svg = this._paper.node,\n      viewport = this._root.node;\n\n  var matrix = svg.createSVGMatrix();\n  var point = svg.createSVGPoint();\n\n  var centerPoint,\n      originalPoint,\n      currentMatrix,\n      scaleMatrix,\n      newMatrix;\n\n  currentMatrix = viewport.getCTM();\n\n\n  var currentScale = currentMatrix.a;\n\n  if (center) {\n    centerPoint = _.extend(point, center);\n\n    // revert applied viewport transformations\n    originalPoint = centerPoint.matrixTransform(currentMatrix.inverse());\n\n    // create scale matrix\n    scaleMatrix = matrix\n                    .translate(originalPoint.x, originalPoint.y)\n                    .scale(1 / currentScale * scale)\n                    .translate(-originalPoint.x, -originalPoint.y);\n\n    newMatrix = currentMatrix.multiply(scaleMatrix);\n  } else {\n    newMatrix = matrix.scale(scale);\n  }\n\n  setCTM(this._root.node, newMatrix);\n\n  return newMatrix;\n};\n\n\n/**\n * Returns the size of the canvas\n *\n * @return {Dimensions}\n */\nCanvas.prototype.getSize = function () {\n  return {\n    width: this._container.clientWidth,\n    height: this._container.clientHeight\n  };\n};\n\n\n/**\n * Return the absolute bounding box for the given element\n *\n * The absolute bounding box may be used to display overlays in the\n * callers (browser) coordinate system rather than the zoomed in/out\n * canvas coordinates.\n *\n * @param  {ElementDescriptor} element\n * @return {Bounds} the absolute bounding box\n */\nCanvas.prototype.getAbsoluteBBox = function(element) {\n  var vbox = this.viewbox();\n  var bbox;\n\n  // connection\n  // use svg bbox\n  if (element.waypoints) {\n    var gfx = this.getGraphics(element);\n\n    var transformBBox = gfx.getBBox(true);\n    bbox = gfx.getBBox();\n\n    bbox.x -= transformBBox.x;\n    bbox.y -= transformBBox.y;\n\n    bbox.width += 2 * transformBBox.x;\n    bbox.height +=  2 * transformBBox.y;\n  }\n  // shapes\n  // use data\n  else {\n    bbox = element;\n  }\n\n  var x = bbox.x * vbox.scale - vbox.x * vbox.scale;\n  var y = bbox.y * vbox.scale - vbox.y * vbox.scale;\n\n  var width = bbox.width * vbox.scale;\n  var height = bbox.height * vbox.scale;\n\n  return {\n    x: x,\n    y: y,\n    width: width,\n    height: height\n  };\n};\n},{\"../util/Collections\":55}],35:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\n\nvar Model = _dereq_('../model');\n\n\n/**\n * A factory for diagram-js shapes\n */\nfunction ElementFactory() {\n  this._uid = 12;\n}\n\nmodule.exports = ElementFactory;\n\n\nElementFactory.prototype.createRoot = function(attrs) {\n  return this.create('root', attrs);\n};\n\nElementFactory.prototype.createLabel = function(attrs) {\n  return this.create('label', attrs);\n};\n\nElementFactory.prototype.createShape = function(attrs) {\n  return this.create('shape', attrs);\n};\n\nElementFactory.prototype.createConnection = function(attrs) {\n  return this.create('connection', attrs);\n};\n\n/**\n * Create a model element with the given type and\n * a number of pre-set attributes.\n *\n * @param  {String} type\n * @param  {Object} attrs\n * @return {djs.model.Base} the newly created model instance\n */\nElementFactory.prototype.create = function(type, attrs) {\n\n  attrs = attrs || {};\n\n  if (!attrs.id) {\n    attrs.id = type + '_' + (this._uid++);\n  }\n\n  return Model.create(type, attrs);\n};\n},{\"../model\":54}],36:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\n\n/**\n * @class\n *\n * A registry that keeps track of all shapes in the diagram.\n *\n * @param {EventBus} eventBus the event bus\n */\nfunction ElementRegistry(eventBus) {\n\n  // mapping element.id -> container\n  this._elementMap = {};\n\n  // mapping gfx.id -> container\n  this._graphicsMap = {};\n\n\n  var self = this;\n\n  eventBus.on('diagram.destroy', function(event) {\n    self._elementMap = null;\n    self._graphicsMap = null;\n  });\n}\n\nElementRegistry.$inject = [ 'eventBus' ];\n\nmodule.exports = ElementRegistry;\n\n\nElementRegistry.prototype.add = function(element, gfx) {\n  if (!element.id) {\n    throw new Error('element has no id');\n  }\n\n  if (!gfx.id) {\n    throw new Error('graphics has no id');\n  }\n\n  if (this._graphicsMap[gfx.id]) {\n    throw new Error('graphics with id ' + gfx.id + ' already registered');\n  }\n\n  if (this._elementMap[element.id]) {\n    throw new Error('element with id ' + element.id + ' already added');\n  }\n\n  this._elementMap[element.id] = this._graphicsMap[gfx.id] = { element: element, gfx: gfx };\n};\n\nElementRegistry.prototype.remove = function(element) {\n  var gfx = this.getGraphicsByElement(element);\n\n  delete this._elementMap[element.id];\n  delete this._graphicsMap[gfx.id];\n};\n\n\n/**\n * @method ElementRegistry#getByGraphics\n */\nElementRegistry.prototype.getByGraphics = function(gfx) {\n  var id = gfx.id || gfx;\n\n  var container = this._graphicsMap[id];\n  return container && container.element;\n};\n\n\n/**\n * @method ElementRegistry#getById\n */\nElementRegistry.prototype.getById = function(id) {\n  var container = this._elementMap[id];\n  return container && container.element;\n};\n\n/**\n * @method ElementRegistry#getGraphicsByElement\n */\nElementRegistry.prototype.getGraphicsByElement = function(element) {\n  var id = element.id || element;\n\n  var container = this._elementMap[id];\n  return container && container.gfx;\n};\n\n},{}],37:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar DEFAULT_PRIORITY = 1000;\n\nfunction Event() { }\n\nEvent.prototype = {\n  stopPropagation: function() {\n    this.propagationStopped = true;\n  },\n  preventDefault: function() {\n    this.defaultPrevented = true;\n  },\n  isPropagationStopped: function() {\n    return !!this.propagationStopped;\n  },\n  isDefaultPrevented: function() {\n    return !!this.defaultPrevented;\n  }\n};\n\n\nfunction extendEvent(event, eventType) {\n  return _.extend(event, Event.prototype, { type: eventType });\n}\n\n\n/**\n * @class\n *\n * A general purpose event bus\n */\nfunction EventBus() {\n  this._listeners = {};\n\n  // cleanup on destroy\n\n  var self = this;\n\n  this.on('diagram.destroy', function() {\n    self._listeners = null;\n  });\n}\n\nmodule.exports = EventBus;\n\nmodule.exports.Event = Event;\n\n\n/**\n * Register an event listener for events with the given name.\n *\n * The callback will be invoked with `event, ...additionalArguments`\n * that have been passed to the evented elements\n *\n * @param {String|Array<String>} events\n * @param {Number} [priority=1000] the priority in which this listener is called, larger is higher\n * @param {Function} callback\n */\nEventBus.prototype.on = function(events, priority, callback) {\n\n  events = _.isArray(events) ? events : [ events ];\n\n  if (_.isFunction(priority)) {\n    callback = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  if (!_.isNumber(priority)) {\n    throw new Error('priority needs to be a number');\n  }\n\n  var self = this,\n      listener = { priority: priority, callback: callback };\n\n  _.forEach(events, function(e) {\n    self._addListener(e, listener);\n  });\n};\n\n\n/**\n * Register an event listener that is executed only once.\n *\n * @param {String} event the event name to register for\n * @param {Function} callback the callback to execute\n */\nEventBus.prototype.once = function(event, callback) {\n\n  var self = this;\n  var wrappedCallback = function() {\n    var eventType = arguments[0].type;\n    callback.apply(self, arguments);\n    self.off(eventType, wrappedCallback);\n  };\n\n  this.on(event, wrappedCallback);\n};\n\n\n/**\n * Removes event listeners by event and callback.\n *\n * If no callback is given, all listeners for a given event name are being removed.\n *\n * @param {String} event\n * @param {Function} [callback]\n */\nEventBus.prototype.off = function(event, callback) {\n  var listeners = this._getListeners(event),\n      l, i;\n\n  if (callback) {\n\n    // move through listeners from back to front\n    // and remove matching listeners\n    for (i = listeners.length - 1; !!(l = listeners[i]); i--) {\n      if (l.callback === callback) {\n        listeners.splice(i, 1);\n      }\n    }\n  } else {\n    // clear listeners\n    listeners.length = 0;\n  }\n};\n\n\n/**\n * Fires a named event.\n *\n * @example\n *\n * // fire event by name\n * events.fire('foo');\n *\n * // fire event object with nested type\n * var event = { type: 'foo' };\n * events.fire(event);\n *\n * // fire event with explicit type\n * var event = { x: 10, y: 20 };\n * events.fire('element.moved', event);\n *\n * // pass additional arguments to the event\n * events.on('foo', function(event, bar) {\n *   alert(bar);\n * });\n *\n * events.fire({ type: 'foo' }, 'I am bar!');\n *\n * @param {String} [name] the optional event name\n * @param {Object} [event] the event object\n * @param {...Object} additional arguments to be passed to the callback functions\n *\n * @return {Boolean} false if default was prevented\n */\nEventBus.prototype.fire = function() {\n\n  var event, eventType,\n      listeners, i, l,\n      args;\n\n  args = Array.prototype.slice.call(arguments);\n\n  eventType = args[0];\n\n  if (_.isObject(eventType)) {\n    event = eventType;\n\n    // parse type from event\n    eventType = event.type;\n  } else {\n    // remove name parameter\n    args.shift();\n\n    event = args[0] || {};\n\n    if (!args.length) {\n      args.push(event);\n    }\n  }\n\n  listeners = this._listeners[eventType];\n\n  if (!listeners) {\n    return true;\n  }\n\n  event = extendEvent(event, eventType);\n\n  for (i = 0, l; i < listeners.length; i++) {\n    if (event.isPropagationStopped()) {\n      break;\n    }\n\n    try {\n      listeners[i].callback.apply(null, args);\n    } catch (e) {\n      if (!this.handleError(e)) {\n        console.error('unhandled error in event listener', e);\n        throw e;\n      }\n    }\n  }\n\n  return !event.isDefaultPrevented();\n};\n\n\nEventBus.prototype.handleError = function(error) {\n  return !this.fire('error', { error: error });\n};\n\n\nEventBus.prototype._addListener = function(event, listener) {\n\n  var listeners = this._getListeners(event),\n      i, l;\n\n  // ensure we order listeners by priority from\n  // 0 (high) to n > 0 (low)\n  for (i = 0; !!(l = listeners[i]); i++) {\n    if (l.priority < listener.priority) {\n      listeners.splice(i, 0, listener);\n      return;\n    }\n  }\n\n  listeners.push(listener);\n};\n\n\nEventBus.prototype._getListeners = function(name) {\n  var listeners = this._listeners[name];\n\n  if (!listeners) {\n    this._listeners[name] = listeners = [];\n  }\n\n  return listeners;\n};\n},{}],38:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Creates a gfx container for shapes and connections\n *\n * The layout is as follows:\n *\n * <g data-element-id=\"element-1\" class=\"djs-group djs-(type=shape|connection)\">\n *   <g class=\"djs-visual\">\n *     <!-- the renderer draws in here -->\n *   </g>\n *\n *   <!-- extensions (overlays, click box, ...) goes here\n * </g>\n *\n * @param {Object} root\n * @param {String} type the type of the element, i.e. shape | connection\n */\nfunction createContainer(root, type) {\n  var gfxContainer = root.group();\n\n  gfxContainer\n    .addClass('djs-group')\n    .addClass('djs-' + type);\n\n  return gfxContainer;\n}\n\n/**\n * Clears the graphical representation of the element and returns the\n * cleared result (the <g class=\"djs-visual\" /> element).\n */\nfunction clearVisual(gfx) {\n\n  var oldVisual = gfx.select('.djs-visual'),\n      newVisual = gfx.group().addClass('djs-visual');\n\n  if (oldVisual) {\n    newVisual.after(oldVisual);\n    oldVisual.remove();\n  }\n\n  return newVisual;\n}\n\n\nfunction createContainerFactory(type) {\n  return function(root, data) {\n    return createContainer(root, type).attr('data-element-id', data.id);\n  };\n}\n\n\n/**\n * A factory that creates graphical elements\n *\n * @param {Renderer} renderer\n * @param {Snap} snap\n */\nfunction GraphicsFactory(renderer, snap) {\n  this._renderer = renderer;\n  this._snap = snap;\n}\n\nGraphicsFactory.prototype.createShape = createContainerFactory('shape');\n\nGraphicsFactory.prototype.createConnection = createContainerFactory('connection');\n\nGraphicsFactory.prototype.createPaper = function(options) {\n  return this._snap.createSnapAt(options.width, options.height, options.container);\n};\n\n\nGraphicsFactory.prototype.updateShape = function(element, gfx) {\n\n  // clear visual\n  var gfxGroup = clearVisual(gfx);\n\n  // redraw\n  this._renderer.drawShape(gfxGroup, element);\n\n  // update positioning\n  gfx.translate(element.x, element.y);\n\n  gfx.attr('display', element.hidden ? 'none' : 'block');\n};\n\n\nGraphicsFactory.prototype.updateConnection = function(element, gfx) {\n\n  // clear visual\n  var gfxGroup = clearVisual(gfx);\n  this._renderer.drawConnection(gfxGroup, element);\n\n  gfx.attr('display', element.hidden ? 'none' : 'block');\n};\n\n\nGraphicsFactory.$inject = [ 'renderer', 'snap' ];\n\nmodule.exports = GraphicsFactory;\n},{}],39:[function(_dereq_,module,exports){\nmodule.exports = {\n  __depends__: [ _dereq_('../draw') ],\n  __init__: [ 'canvas' ],\n  canvas: [ 'type', _dereq_('./Canvas') ],\n  elementRegistry: [ 'type', _dereq_('./ElementRegistry') ],\n  elementFactory: [ 'type', _dereq_('./ElementFactory') ],\n  eventBus: [ 'type', _dereq_('./EventBus') ],\n  graphicsFactory: [ 'type', _dereq_('./GraphicsFactory') ]\n};\n},{\"../draw\":43,\"./Canvas\":34,\"./ElementFactory\":35,\"./ElementRegistry\":36,\"./EventBus\":37,\"./GraphicsFactory\":38}],40:[function(_dereq_,module,exports){\n'use strict';\n\nvar Snap = _dereq_('./Snap');\n\n\n/**\n * @class Renderer\n *\n * The default renderer used for shapes and connections.\n *\n * @param {Styles} styles\n */\nfunction Renderer(styles) {\n  this.CONNECTION_STYLE = styles.style([ 'no-fill' ], { strokeWidth: 5, stroke: 'fuchsia' });\n  this.SHAPE_STYLE = styles.style({ fill: 'white', stroke: 'fuchsia', strokeWidth: 2 });\n}\n\nmodule.exports = Renderer;\n\nRenderer.$inject = ['styles'];\n\n\nRenderer.prototype.drawShape = function drawShape(gfxGroup, data) {\n  if (data.width === undefined ||\n      data.height === undefined) {\n\n    throw new Error('must specify width and height properties for new shape');\n  }\n\n  return gfxGroup.rect(0, 0, data.width, data.height, 10, 10).attr(this.SHAPE_STYLE);\n};\n\nRenderer.prototype.drawConnection = function drawConnection(gfxGroup, data) {\n  return createLine(data.waypoints, this.CONNECTION_STYLE).appendTo(gfxGroup);\n};\n\n\nfunction toSVGPoints(points) {\n  var result = '';\n\n  for (var i = 0, p; !!(p = points[i]); i++) {\n    result += p.x + ',' + p.y + ' ';\n  }\n\n  return result;\n}\n\nfunction createLine(points, attrs) {\n  return Snap.create('polyline', { points: toSVGPoints(points) }).attr(attrs || {});\n}\n\nfunction updateLine(gfx, points) {\n  return gfx.attr({ points: toSVGPoints(points) });\n}\n\nmodule.exports.createLine = createLine;\nmodule.exports.updateLine = updateLine;\n},{\"./Snap\":41}],41:[function(_dereq_,module,exports){\nvar snapsvg = (window.Snap);\n\n// require snapsvg extensions\n_dereq_('./snapsvg-extensions');\n\nmodule.exports = snapsvg;\n},{\"./snapsvg-extensions\":44}],42:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\n\n/**\n * A component that manages shape styles\n */\nfunction Styles() {\n\n  var defaultTraits = {\n\n    'no-fill': {\n      fill: 'none'\n    },\n    'no-border': {\n      strokeOpacity: 0.0\n    },\n    'no-events': {\n      pointerEvents: 'none'\n    }\n  };\n\n  /**\n   * Builds a style definition from a className, a list of traits and an object of additional attributes.\n   *\n   * @param  {String} className\n   * @param  {Array<String>} traits\n   * @param  {Object} additionalAttrs\n   *\n   * @return {Object} the style defintion\n   */\n  this.cls = function(className, traits, additionalAttrs) {\n    var attrs = this.style(traits, additionalAttrs);\n\n    return _.extend(attrs, { 'class': className });\n  };\n\n  /**\n   * Builds a style definition from a list of traits and an object of additional attributes.\n   *\n   * @param  {Array<String>} traits\n   * @param  {Object} additionalAttrs\n   *\n   * @return {Object} the style defintion\n   */\n  this.style = function(traits, additionalAttrs) {\n\n    if (!_.isArray(traits) && !additionalAttrs) {\n      additionalAttrs = traits;\n      traits = [];\n    }\n\n    var attrs = _.inject(traits, function(attrs, t) {\n      return _.extend(attrs, defaultTraits[t] || {});\n    }, {});\n\n    return additionalAttrs ? _.extend(attrs, additionalAttrs) : attrs;\n  };\n}\n\nmodule.exports = Styles;\n},{}],43:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = {\n  renderer: [ 'type', _dereq_('./Renderer') ],\n  snap: [ 'value', _dereq_('./Snap') ],\n  styles: [ 'type', _dereq_('./Styles') ]\n};\n},{\"./Renderer\":40,\"./Snap\":41,\"./Styles\":42}],44:[function(_dereq_,module,exports){\n'use strict';\n\nvar Snap = (window.Snap);\n\n/**\n * @module snapsvg/extensions\n */\n\n/**\n * @namespace snapsvg\n */\n\n/**\n * @class snapsvg.Element\n */\n\n/**\n * @class ClassPlugin\n *\n * Extends snapsvg with methods to add and remove classes\n */\nSnap.plugin(function (Snap, Element, Paper, global) {\n\n  function split(str) {\n    return str.split(/\\s+/);\n  }\n\n  function join(array) {\n    return array.join(' ');\n  }\n\n  function getClasses(e) {\n    return split(e.attr('class') || '');\n  }\n\n  function setClasses(e, classes) {\n    e.attr('class', join(classes));\n  }\n\n  /**\n   * @method snapsvg.Element#addClass\n   *\n   * @example\n   *\n   * e.attr('class', 'selector');\n   *\n   * e.addClass('foo bar'); // adds classes foo and bar\n   * e.attr('class'); // -> 'selector foo bar'\n   *\n   * e.addClass('fooBar');\n   * e.attr('class'); // -> 'selector foo bar fooBar'\n   *\n   * @param {String} cls classes to be added to the element\n   *\n   * @return {snapsvg.Element} the element (this)\n   */\n  Element.prototype.addClass = function(cls) {\n    var current = getClasses(this),\n        add = split(cls),\n        i, e;\n\n    for (i = 0, e; !!(e = add[i]); i++) {\n      if (current.indexOf(e) === -1) {\n        current.push(e);\n      }\n    }\n\n    setClasses(this, current);\n\n    return this;\n  };\n\n  /**\n   * @method snapsvg.Element#hasClass\n   *\n   * @param  {String}  cls the class to query for\n   * @return {Boolean} returns true if the element has the given class\n   */\n  Element.prototype.hasClass = function(cls) {\n    if (!cls) {\n      throw new Error('[snapsvg] syntax: hasClass(clsStr)');\n    }\n\n    return getClasses(this).indexOf(cls) !== -1;\n  };\n\n  /**\n   * @method snapsvg.Element#removeClass\n   *\n   * @example\n   *\n   * e.attr('class', 'foo bar');\n   *\n   * e.removeClass('foo');\n   * e.attr('class'); // -> 'bar'\n   *\n   * e.removeClass('foo bar'); // removes classes foo and bar\n   * e.attr('class'); // -> ''\n   *\n   * @param {String} cls classes to be removed from element\n   *\n   * @return {snapsvg.Element} the element (this)\n   */\n  Element.prototype.removeClass = function(cls) {\n    var current = getClasses(this),\n        remove = split(cls),\n        i, e, idx;\n\n    for (i = 0, e; !!(e = remove[i]); i++) {\n      idx = current.indexOf(e);\n\n      if (idx !== -1) {\n        // remove element from array\n        current.splice(idx, 1);\n      }\n    }\n\n    setClasses(this, current);\n\n    return this;\n  };\n\n});\n\n/**\n * @class TranslatePlugin\n *\n * Extends snapsvg with methods to translate elements\n */\nSnap.plugin(function (Snap, Element, Paper, global) {\n\n  /*\n   * @method snapsvg.Element#translate\n   *\n   * @example\n   *\n   * e.translate(10, 20);\n   *\n   * // sets transform matrix to translate(10, 20)\n   *\n   * @param {Number} x translation\n   * @param {Number} y translation\n   *\n   * @return {snapsvg.Element} the element (this)\n   */\n  Element.prototype.translate = function(x, y) {\n    var matrix = new Snap.Matrix();\n    matrix.translate(x, y);\n    return this.transform(matrix);\n  };\n});\n\n\n/**\n * @class CreatePlugin\n *\n * Create an svg element without attaching it to the dom\n */\nSnap.plugin(function(Snap) {\n\n  Snap.create = function(name, attrs) {\n    return Snap._.wrap(Snap._.$(name, attrs));\n  };\n});\n\n\n/**\n * @class CreatSnapAtPlugin\n *\n * Extends snap.svg with a method to create a SVG element\n * at a specific position in the DOM.\n */\nSnap.plugin(function(Snap, Element, Paper, global) {\n\n  /*\n   * @method snapsvg.createSnapAt\n   *\n   * @example\n   *\n   * snapsvg.createSnapAt(parentNode, 200, 200);\n   *\n   * @param {Number} width of svg\n   * @param {Number} height of svg\n   * @param {Object} parentNode svg Element will be child of this\n   *\n   * @return {snapsvg.Element} the newly created wrapped SVG element instance\n   */\n  Snap.createSnapAt = function(width, height, parentNode) {\n\n    var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.setAttribute('width', width);\n    svg.setAttribute('height', height);\n    if (!parentNode) {\n      parentNode = document.body;\n    }\n    parentNode.appendChild(svg);\n\n    return new Snap(svg);\n  };\n});\n},{}],45:[function(_dereq_,module,exports){\n'use strict';\n\n\nvar _ = (window._);\n\nvar Snap = (window.Snap);\n\nvar GraphicsUtil = _dereq_('../../util/GraphicsUtil'),\n    createLine = _dereq_('../../draw/Renderer').createLine;\n\n\n/**\n * A plugin that provides interactivity in terms of events (mouse over and selection to a diagram).\n *\n * @class\n *\n * @param {EventBus} eventBus\n */\nfunction InteractionEvents(eventBus, styles) {\n\n  var HIT_STYLE = styles.cls('djs-hit', [ 'no-fill', 'no-border' ], {\n    stroke: 'white',\n    strokeWidth: 10\n  });\n\n  function fire(event, baseEvent, eventName) {\n    var e = _.extend({}, baseEvent, event);\n    eventBus.fire(eventName, e);\n  }\n\n  function registerEvents(eventBus) {\n\n    eventBus.on('canvas.init', function(event) {\n      var root = event.root;\n\n      // implement direct canvas click\n      root.click(function(event) {\n\n        /**\n         * An event indicating that the canvas has been directly clicked\n         *\n         * @memberOf InteractionEvents\n         *\n         * @event canvas.click\n         *\n         * @type {Object}\n         */\n        eventBus.fire('canvas.click', _.extend({}, event, { root: root }));\n      });\n    });\n\n\n    eventBus.on([ 'shape.added', 'connection.added' ], function(event) {\n      var element = event.element,\n          gfx = event.gfx,\n          visual = GraphicsUtil.getVisual(gfx),\n          baseEvent = { element: element, gfx: gfx };\n\n      var hit, type;\n\n      if (element.waypoints) {\n        hit = createLine(element.waypoints);\n        type = 'connection';\n      } else {\n        hit = Snap.create('rect', { x: 0, y: 0, width: element.width, height: element.height });\n        type = 'shape';\n      }\n\n\n      hit.attr(HIT_STYLE).appendTo(gfx.node);\n\n      gfx.hover(function(e) {\n\n        /**\n         * An event indicating that shape|connection has been hovered\n         *\n         * shape.hover, connection.hover\n         */\n        fire(e, baseEvent, type + '.hover');\n      }, function(e) {\n        fire(e, baseEvent, type + '.out');\n      });\n\n      visual.click(function(e) {\n        fire(e, baseEvent, type + '.click');\n      });\n\n      visual.dblclick(function(e) {\n        fire(e, baseEvent, type + '.dblclick');\n      });\n    });\n  }\n\n  registerEvents(eventBus);\n}\n\n\nInteractionEvents.$inject = [ 'eventBus', 'styles' ];\n\nmodule.exports = InteractionEvents;\n},{\"../../draw/Renderer\":40,\"../../util/GraphicsUtil\":56}],46:[function(_dereq_,module,exports){\nmodule.exports = {\n  __init__: [ 'interactionEvents' ],\n  interactionEvents: [ 'type', _dereq_('./InteractionEvents') ]\n};\n},{\"./InteractionEvents\":45}],47:[function(_dereq_,module,exports){\n'use strict';\n\nvar Snap = (window.Snap);\n\nvar GraphicsUtil = _dereq_('../../util/GraphicsUtil');\n\n\n/**\n * @class\n *\n * A plugin that adds an outline to shapes and connections that may be activated and styled\n * via CSS classes.\n *\n * @param {EventBus} events the event bus\n */\nfunction Outline(events, styles) {\n\n  var OUTLINE_OFFSET = 5;\n\n  var OUTLINE_STYLE = styles.cls('djs-outline', [ 'no-fill' ]);\n\n  function createOutline(gfx, bounds) {\n    return Snap.create('rect', OUTLINE_STYLE).prependTo(gfx);\n  }\n\n  function updateOutline(outline, bounds) {\n\n    outline.attr({\n      x: -OUTLINE_OFFSET,\n      y: -OUTLINE_OFFSET,\n      width: bounds.width + OUTLINE_OFFSET * 2,\n      height: bounds.height + OUTLINE_OFFSET * 2\n    });\n  }\n\n  events.on('shape.added', function(event) {\n    var element = event.element,\n        gfx = event.gfx;\n\n    var outline = createOutline(gfx, element);\n\n    updateOutline(outline, element);\n  });\n\n  events.on('connection.change', function(event) {\n    // TODO: update connection outline box\n  });\n\n  events.on('shape.change', function(event) {\n    // TODO: update shape outline box\n  });\n}\n\n\nOutline.$inject = ['eventBus', 'styles'];\n\nmodule.exports = Outline;\n},{\"../../util/GraphicsUtil\":56}],48:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = {\n  __init__: [ 'outline' ],\n  outline: [ 'type', _dereq_('./Outline') ]\n};\n},{\"./Outline\":47}],49:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._),\n    $ = (window.$);\n\n// document wide unique overlay ids\nvar ids = new (_dereq_('../../util/IdGenerator'))('ov');\n\n\n/**\n * A plugin that allows users to attach overlays to diagram elements.\n *\n * The overlay service will take care of overlay positioning during updates.\n *\n * @class\n *\n * @example\n *\n * // add a pink badge on the top left of the shape\n * overlays.add(someShape, {\n *   position: {\n *     top: -5,\n *     left: -5\n *   }\n *   html: '<div style=\"width: 10px; background: fuchsia; color: white;\">0</div>'\n * });\n *\n * // or add via shape id\n *\n * overlays.add('some-element-id', {\n *   position: {\n *     top: -5,\n *     left: -5\n *   }\n *   html: '<div style=\"width: 10px; background: fuchsia; color: white;\">0</div>'\n * });\n *\n * // or add with optional type\n *\n * overlays.add(someShape, 'badge', {\n *   position: {\n *     top: -5,\n *     left: -5\n *   }\n *   html: '<div style=\"width: 10px; background: fuchsia; color: white;\">0</div>'\n * });\n *\n *\n * // remove an overlay\n *\n * var id = overlays.add(...);\n * overlays.remove(id);\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {ElementRegistry} elementRegistry\n */\nfunction Overlays(config, eventBus, canvas, elementRegistry) {\n\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n  this._elementRegistry = elementRegistry;\n\n  this._ids = ids;\n\n  this._overlayDefaults = {\n    show: {\n      trigger: 'automatic',\n      minZoom: 0.7,\n      maxZoom: 5.0\n    }\n  };\n\n  /**\n   * Mapping overlay-id > overlay\n   */\n  this._overlays = {};\n\n  /**\n   * Mapping element-id > overlay container\n   */\n  this._overlayContainers = {};\n\n  // root html element for all overlays\n  this._overlayRoot = $('<div class=\"djs-overlay-container\" />')\n                        .css({ position: 'absolute', width: 0, height: 0 })\n                        .prependTo(canvas.getContainer());\n\n  this._init(config);\n}\n\n\nOverlays.$inject = [ 'config.overlays', 'eventBus', 'canvas', 'elementRegistry' ];\n\nmodule.exports = Overlays;\n\n\n/**\n * Returns the overlay with the specified id or a list of overlays\n * for an element with a given type.\n *\n * @example\n *\n * // return the single overlay with the given id\n * overlays.get('some-id');\n *\n * // return all overlays for the shape\n * overlays.get({ element: someShape });\n *\n * // return all overlays on shape with type 'badge'\n * overlays.get({ element: someShape, type: 'badge' });\n *\n * // shape can also be specified as id\n * overlays.get({ element: 'element-id', type: 'badge' });\n *\n *\n * @param {Object} filter\n * @param {String} [filter.id]\n * @param {String|djs.model.Base} [filter.element]\n * @param {String} [filter.type]\n *\n * @return {Object|Array<Object>} the overlay(s)\n */\nOverlays.prototype.get = function(filter) {\n\n  if (_.isString(filter)) {\n    filter = { id: filter };\n  }\n\n  if (filter.element) {\n    var container = this._getOverlayContainer(filter.element, true);\n\n    // return a list of overlays when filtering by element (+type)\n    if (container) {\n      return filter.type ? _.filter(container.overlays, { type: filter.type }) : _.clone(container.overlays);\n    } else {\n      return [];\n    }\n  } else\n  if (filter.type) {\n    return _.filter(this._overlays, { type: filter.type });\n  } else {\n    // return single element when filtering by id\n    return filter.id ? this._overlays[filter.id] : null;\n  }\n};\n\n/**\n * Adds a HTML overlay to an element.\n *\n * @param {String|djs.model.Base}   element   attach overlay to this shape\n * @param {String}                  [type]    optional type to assign to the overlay\n * @param {Object}                  overlay   the overlay configuration\n *\n * @param {String|DOMElement}       overlay.html                      html element to use as an overlay\n * @param {Object}                  [overlay.show]                    show configuration\n * @param {Number}                  overlay.show.minZoom              minimal zoom level to show the overlay\n * @param {Number}                  overlay.show.maxZoom              maximum zoom level to show the overlay\n * @param {String}                  [overlay.show.trigger=automatic]  automatic or manual (user triggers show)\n * @param {Object}                  overlay.show.position             where to attach the overlay\n * @param {Number}                  [overlay.show.position.left]      relative to element bbox left attachment\n * @param {Number}                  [overlay.show.position.top]       relative to element bbox top attachment\n * @param {Number}                  [overlay.show.position.bottom]    relative to element bbox bottom attachment\n * @param {Number}                  [overlay.show.position.right]     relative to element bbox right attachment\n *\n * @return {String}                 id that may be used to reference the overlay for update or removal\n */\nOverlays.prototype.add = function(element, type, overlay) {\n\n  if (_.isObject(type)) {\n    overlay = type;\n    type = null;\n  }\n\n  if (_.isString(element)) {\n    element = this._elementRegistry.getById(element);\n  }\n\n  if (element.waypoints) {\n    throw new Error('overlays for connections are not supported');\n  }\n\n  if (!overlay.position) {\n    throw new Error('must specifiy overlay position');\n  }\n\n  if (!overlay.html) {\n    throw new Error('must specifiy overlay html');\n  }\n\n  if (!element) {\n    throw new Error('invalid element specified');\n  }\n\n  var id = this._ids.next();\n\n  overlay = _.extend({}, this._overlayDefaults, overlay, {\n    id: id,\n    type: type,\n    element: element,\n    html: $(overlay.html)\n  });\n\n  this._addOverlay(overlay);\n\n  return id;\n};\n\n\n/**\n * Remove an overlay with the given id or all overlays matching the given filter.\n *\n * @see Overlays#get for filter options.\n *\n * @param {String} [id]\n * @param {Object} [filter]\n */\nOverlays.prototype.remove = function(filter) {\n\n  var overlays = this.get(filter) || [];\n\n  if (!_.isArray(overlays)) {\n    overlays = [ overlays ];\n  }\n\n  var self = this;\n\n  _.forEach(overlays, function(overlay) {\n\n    var container = self._getOverlayContainer(overlay.element, true);\n\n    if (overlay) {\n      overlay.html.remove();\n      overlay.htmlContainer.remove();\n\n      delete overlay.htmlContainer;\n      delete overlay.element;\n\n      delete self._overlays[overlay.id];\n    }\n\n    if (container) {\n      var idx = container.overlays.indexOf(overlay);\n      if (idx !== -1) {\n        container.overlays.splice(idx, 1);\n      }\n    }\n  });\n\n};\n\n\nOverlays.prototype.show = function() {\n  this._overlayRoot.show();\n};\n\n\nOverlays.prototype.hide = function() {\n  this._overlayRoot.hide();\n};\n\n\nOverlays.prototype._updateOverlayContainer = function(container) {\n  var element = container.element,\n      html = container.html;\n\n  // update container left,top according to the elements x,y coordinates\n  // this ensures we can attach child elements relative to this container\n\n  // TODO(nre): update according to element bbox (for connections)\n  html.css({ left: element.x, top: element.y });\n};\n\n\nOverlays.prototype._updateOverlay = function(overlay) {\n\n  var position = overlay.position,\n      htmlContainer = overlay.htmlContainer,\n      element = overlay.element;\n\n  // update overlay html relative to shape because\n  // it is already positioned on the element\n\n  // update relative\n  var left = position.left,\n      top = position.top;\n\n  if (position.right !== undefined) {\n    left = position.right * -1 + element.width;\n  }\n\n  if (position.bottom !== undefined) {\n    top = position.bottom * -1 + element.height;\n  }\n\n  htmlContainer.css({ left: left || 0, top: top || 0 });\n};\n\n\nOverlays.prototype._createOverlayContainer = function(element) {\n  var html = $('<div />')\n                .addClass('djs-overlays')\n                .addClass('djs-overlays-' + element.id)\n                .css({ position: 'absolute' });\n\n  html.appendTo(this._overlayRoot);\n\n  var container = {\n    html: html,\n    element: element,\n    overlays: []\n  };\n\n  this._updateOverlayContainer(container);\n\n  return container;\n};\n\n\nOverlays.prototype._updateRoot = function(viewbox) {\n  var a = viewbox.scale || 1;\n  var d = viewbox.scale || 1;\n  var e = viewbox.x || 0;\n  var f = viewbox.y || 0;\n\n  var matrix = 'matrix(' + a + ',0,0,' + d + ',' + (-1 * viewbox.x * a) + ',' + (-1 * viewbox.y * d) + ')';\n\n  this._overlayRoot.css('transform', matrix);\n};\n\n\nOverlays.prototype._getOverlayContainer = function(element, raw) {\n  var id = (element && element.id) || element;\n\n  var container = this._overlayContainers[id];\n  if (!container && !raw) {\n    container = this._overlayContainers[id] = this._createOverlayContainer(element);\n  }\n\n  return container;\n};\n\n\nOverlays.prototype._addOverlay = function(overlay) {\n\n  var id = overlay.id,\n      element = overlay.element;\n\n  var container = this._getOverlayContainer(element);\n\n  var htmlContainer = $('<div>', {\n    id: id,\n    className: 'djs-overlay'\n  }).css({ position: 'absolute' }).append(overlay.html);\n\n  if (overlay.type) {\n    htmlContainer.addClass('djs-overlay-' + overlay.type);\n  }\n\n  overlay.htmlContainer = htmlContainer;\n\n  container.overlays.push(overlay);\n  container.html.append(htmlContainer);\n\n  this._overlays[id] = overlay;\n\n  this._updateOverlay(overlay);\n};\n\nOverlays.prototype._updateOverlayVisibilty = function(viewbox) {\n\n  _.forEach(this._overlays, function(overlay) {\n    if (overlay.show) {\n      if (overlay.show.minZoom > viewbox.scale ||\n          overlay.show.maxZoom < viewbox.scale) {\n        overlay.htmlContainer.hide();\n      } else {\n        overlay.htmlContainer.show();\n      }\n    }\n  });\n};\n\nOverlays.prototype._init = function(config) {\n\n  var eventBus = this._eventBus;\n\n  var self = this;\n\n\n  // scroll/zoom integration\n\n  var updateViewbox = function(viewbox) {\n    self._updateRoot(viewbox);\n    self._updateOverlayVisibilty(viewbox);\n\n    self.show();\n  };\n\n  if (!config || config.deferUpdate !== false) {\n    updateViewbox = _.debounce(updateViewbox, 300);\n  }\n\n  eventBus.on('canvas.viewbox.changed', function(event) {\n    self.hide();\n    updateViewbox(event.viewbox);\n  });\n\n\n  // remove integration\n\n  eventBus.on([ 'shape.remove', 'connection.remove' ], function(e) {\n    var overlays = self.get({ element: e.element });\n\n    _.forEach(overlays, function(o) {\n      self.remove(o.id);\n    });\n  });\n\n\n  // move integration\n\n  eventBus.on([\n    'commandStack.shape.move.executed',\n    'commandStack.shape.move.reverted'\n  ], function(e) {\n    var element = e.context.shape;\n\n    var container = self._getOverlayContainer(element, true);\n    if (container) {\n      self._updateOverlayContainer(container);\n    }\n  });\n\n\n  // marker integration, simply add them on the overlays as classes, too.\n\n  eventBus.on('element.marker.update', function(e) {\n    var container = self._getOverlayContainer(e.element, true);\n    if (container) {\n      container.html[e.add ? 'addClass' : 'removeClass'](e.marker);\n    }\n  });\n};\n},{\"../../util/IdGenerator\":57}],50:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = {\n  __init__: [ 'overlays' ],\n  overlays: [ 'type', _dereq_('./Overlays') ]\n};\n},{\"./Overlays\":49}],51:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\n\n/**\n * A service that offers the current selection in a diagram.\n * Offers the api to control the selection, too.\n *\n * @class\n *\n * @param {EventBus} eventBus the event bus\n */\nfunction Selection(eventBus) {\n\n  this._eventBus = eventBus;\n\n  this._selectedElements = [];\n\n  var self = this;\n\n  eventBus.on([ 'shape.remove', 'connection.remove' ], function(e) {\n    var element = e.element;\n    self.deselect(element);\n  });\n}\n\nSelection.$inject = [ 'eventBus' ];\n\nmodule.exports = Selection;\n\n\nSelection.prototype.deselect = function(element) {\n  var selectedElements = this._selectedElements;\n\n  var idx = selectedElements.indexOf(element);\n\n  if (idx !== -1) {\n    var oldSelection = selectedElements.slice();\n\n    selectedElements.splice(idx, 1);\n\n    this._eventBus.fire('selection.changed', { oldSelection: oldSelection, newSelection: selectedElements });\n  }\n};\n\n\nSelection.prototype.get = function() {\n  return this._selectedElements;\n};\n\nSelection.prototype.isSelected = function(element) {\n  return this._selectedElements.indexOf(element) !== -1;\n};\n\n\n/**\n * This method selects one or more elements on the diagram.\n *\n * By passing an additional add parameter you can decide whether or not the element(s)\n * should be added to the already existing selection or not.\n *\n * @method Selection#select\n *\n * @param  {Object|Object[]} elements element or array of elements to be selected\n * @param  {boolean} [add] whether the element(s) should be appended to the current selection, defaults to false\n */\nSelection.prototype.select = function(elements, add) {\n  var selectedElements = this._selectedElements,\n      oldSelection = selectedElements.slice();\n\n  if (!_.isArray(elements)) {\n    elements = elements ? [ elements ] : [];\n  }\n\n  var self = this;\n\n  // selection may be cleared by passing an empty array or null\n  // to the method\n  if (elements.length && add) {\n    _.forEach(elements, function(element) {\n      if (selectedElements.indexOf(element) !== -1) {\n        // already selected\n        return;\n      } else {\n        selectedElements.push(element);\n      }\n    });\n  } else {\n    this._selectedElements = selectedElements = elements.slice();\n  }\n\n  this._eventBus.fire('selection.changed', { oldSelection: oldSelection, newSelection: selectedElements });\n};\n},{}],52:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\n\nfunction originalEvent(e) {\n  return e.srcEvent || e;\n}\n\n\nvar MARKER_HOVER = 'hover',\n    MARKER_SELECTED = 'selected';\n\n\n/**\n * A plugin that adds a visible selection UI to shapes and connections\n * by appending the <code>hover</code> and <code>selected</code> classes to them.\n *\n * @class\n *\n * Makes elements selectable, too.\n *\n * @param {EventBus} events\n * @param {SelectionService} selection\n * @param {Canvas} canvas\n */\nfunction SelectionVisuals(events, selection, canvas) {\n\n  function addMarker(e, cls) {\n    canvas.addMarker(e, cls);\n  }\n\n  function removeMarker(e, cls) {\n    canvas.removeMarker(e, cls);\n  }\n\n  /**\n   * Wire click on shape to select the shape\n   *\n   * @param  {Object} event the fired event\n   */\n  events.on('shape.click', function(event) {\n    var add = originalEvent(event).shiftKey;\n    selection.select(event.element, add);\n  });\n\n  events.on('shape.hover', function(event) {\n    addMarker(event.element, MARKER_HOVER);\n  });\n\n  events.on('shape.out', function(event) {\n    removeMarker(event.element, MARKER_HOVER);\n  });\n\n  events.on('selection.changed', function(event) {\n\n    function deselect(s) {\n      removeMarker(s, MARKER_SELECTED);\n    }\n\n    function select(s) {\n      addMarker(s, MARKER_SELECTED);\n    }\n\n    var oldSelection = event.oldSelection,\n        newSelection = event.newSelection;\n\n    _.forEach(oldSelection, function(e) {\n      if (newSelection.indexOf(e) === -1) {\n        deselect(e);\n      }\n    });\n\n    _.forEach(newSelection, function(e) {\n      if (oldSelection.indexOf(e) === -1) {\n        select(e);\n      }\n    });\n  });\n\n  // deselect all selected shapes on canvas click\n  events.on('canvas.click', function(event) {\n    if (originalEvent(event).srcElement === event.root.paper.node) {\n      selection.select(null);\n    }\n  });\n}\n\nSelectionVisuals.$inject = [\n  'eventBus',\n  'selection',\n  'canvas'\n];\n\nmodule.exports = SelectionVisuals;\n},{}],53:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = {\n  __init__: [ 'selectionVisuals' ],\n  __depends__: [\n    _dereq_('../interaction-events'),\n    _dereq_('../outline')\n  ],\n  selection: [ 'type', _dereq_('./Selection') ],\n  selectionVisuals: [ 'type', _dereq_('./SelectionVisuals') ]\n};\n},{\"../interaction-events\":46,\"../outline\":48,\"./Selection\":51,\"./SelectionVisuals\":52}],54:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Refs = _dereq_('object-refs');\n\nvar parentRefs = new Refs({ name: 'children', enumerable: true, collection: true }, { name: 'parent' }),\n    labelRefs = new Refs({ name: 'label', enumerable: true }, { name: 'labelTarget' }),\n    outgoingRefs = new Refs({ name: 'outgoing', collection: true }, { name: 'source' }),\n    incomingRefs = new Refs({ name: 'incoming', collection: true }, { name: 'target' });\n\n/**\n * @namespace djs.model\n */\n\n/**\n * @memberOf djs.model\n */\n\n/**\n * The basic graphical representation\n *\n * @class\n *\n * @abstract\n */\nfunction Base() {\n\n  /**\n   * The object that backs up the shape\n   *\n   * @name Base#businessObject\n   * @type Object\n   */\n  Object.defineProperty(this, 'businessObject', {\n    writable: true\n  });\n\n  /**\n   * The parent shape\n   *\n   * @name Base#parent\n   * @type Shape\n   */\n  parentRefs.bind(this, 'parent');\n\n  /**\n   * @name Base#label\n   * @type Label\n   */\n  labelRefs.bind(this, 'label');\n\n  /**\n   * The list of outgoing connections\n   *\n   * @name Base#outgoing\n   * @type Array<Connection>\n   */\n  outgoingRefs.bind(this, 'outgoing');\n\n  /**\n   * The list of outgoing connections\n   *\n   * @name Base#incoming\n   * @type Array<Connection>\n   */\n  incomingRefs.bind(this, 'incoming');\n}\n\n\n/**\n * A graphical object\n *\n * @class\n * @constructor\n *\n * @extends Base\n */\nfunction Shape() {\n  Base.call(this);\n\n  /**\n   * The list of children\n   *\n   * @name Shape#children\n   * @type Array<Base>\n   */\n  parentRefs.bind(this, 'children');\n}\n\nShape.prototype = Object.create(Base.prototype);\n\n\n/**\n * A root graphical object\n *\n * @class\n * @constructor\n *\n * @extends Shape\n */\nfunction Root() {\n  Shape.call(this);\n}\n\nRoot.prototype = Object.create(Shape.prototype);\n\n\n/**\n * A label for an element\n *\n * @class\n * @constructor\n *\n * @extends Shape\n */\nfunction Label() {\n  Shape.call(this);\n\n  /**\n   * The labeled element\n   *\n   * @name Label#labelTarget\n   * @type Base\n   */\n  labelRefs.bind(this, 'labelTarget');\n}\n\nLabel.prototype = Object.create(Shape.prototype);\n\n\n/**\n * A connection between two elements\n *\n * @class\n * @constructor\n *\n * @extends Base\n */\nfunction Connection() {\n  Base.call(this);\n\n  /**\n   * The element this connection originates from\n   *\n   * @name Connection#source\n   * @type Base\n   */\n  outgoingRefs.bind(this, 'source');\n\n  /**\n   * The element this connection points to\n   *\n   * @name Connection#target\n   * @type Base\n   */\n  incomingRefs.bind(this, 'target');\n}\n\nConnection.prototype = Object.create(Base.prototype);\n\n\nvar types = {\n  connection: Connection,\n  shape: Shape,\n  label: Label,\n  root: Root\n};\n\n/**\n * Creates a new model element of the specified type\n *\n * @method create\n *\n * @example\n *\n * var shape1 = Model.create('shape', { x: 10, y: 10, width: 100, height: 100 });\n * var shape2 = Model.create('shape', { x: 210, y: 210, width: 100, height: 100 });\n *\n * var connection = Model.create('connection', { waypoints: [ { x: 110, y: 55 }, {x: 210, y: 55 } ] });\n *\n * @param  {String} type lower-cased model name\n * @param  {Object} attrs attributes to initialize the new model instance with\n *\n * @return {Base} the new model instance\n */\nmodule.exports.create = function(type, attrs) {\n  var Type = types[type];\n  if (!Type) {\n    throw new Error('unknown type: <' + type + '>');\n  }\n  return _.extend(new Type(), attrs);\n};\n\n\nmodule.exports.Root = Root;\nmodule.exports.Shape = Shape;\nmodule.exports.Connection = Connection;\nmodule.exports.Label = Label;\n},{\"object-refs\":63}],55:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Failsafe remove an element from a collection\n *\n * @param  {Array<Object>} [collection]\n * @param  {Object} [element]\n *\n * @return {Object} the element that got removed or undefined\n */\nmodule.exports.remove = function(collection, element) {\n\n  if (!collection || !element) {\n    return;\n  }\n\n  var idx = collection.indexOf(element);\n  if (idx === -1) {\n    return;\n  }\n\n  collection.splice(idx, 1);\n\n  return element;\n};\n},{}],56:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * @module util/GraphicsUtil\n */\n\nfunction is(e, cls) {\n  return e.hasClass(cls);\n}\n\n\n/**\n *\n * A note on how SVG elements are structured:\n *\n * Shape layout:\n *\n * [group.djs-group.djs-shape]\n *  |-> [rect.djs-hit]\n *  |-> [rect.djs-visual]\n *  |-> [rect.djs-outline]\n *  ...\n *\n * [group.djs-group.djs-connection]\n *  |-> [polyline.djs-hit]\n *  |-> [polyline.djs-visual]\n *  |-> [polyline.djs-outline]\n *  ...\n *\n */\n\n/**\n * Returns the visual part of a diagram element\n *\n * @param  {snapsvg.Element} gfx\n * @return {snapsvg.Element}\n */\nfunction getVisual(gfx) {\n  return gfx.select('.djs-visual');\n}\n\n/**\n * Returns the visual bbox of an element\n *\n * @param  {snapsvg.Element} gfx\n * @return {snapsvg.Element}\n */\nfunction getBBox(gfx) {\n  return getVisual(gfx).select('*').getBBox();\n}\n\n\nmodule.exports.getBBox = getBBox;\nmodule.exports.getVisual = getVisual;\n},{}],57:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Util that provides unique IDs.\n *\n * @class djs.util.IdGenerator\n * @memberOf djs.util\n *\n * @constructor\n *\n * The ids can be customized via a given prefix and contain a random value to avoid collisions.\n *\n * @param {String} prefix a prefix to prepend to generated ids (for better readability)\n */\nfunction IdGenerator(prefix) {\n\n  this._counter = 0;\n  this._prefix = (prefix ? prefix + '-' : '') + Math.floor(Math.random() * 1000000000) + '-';\n}\n\nmodule.exports = IdGenerator;\n\n/**\n * Returns a next unique ID.\n *\n * @method djs.util.IdGenerator#next\n *\n * @returns {String} the id\n */\nIdGenerator.prototype.next = function() {\n  return this._prefix + (++this._counter);\n};\n\n},{}],58:[function(_dereq_,module,exports){\n'use strict';\n\nvar Snap = (window.Snap);\nvar _ = (window._);\n\nvar DEFAULT_BOX_PADDING = 0;\n\nvar DEFAULT_LABEL_SIZE = {\n  width: 150,\n  height: 50\n};\n\n\nfunction parseAlign(align) {\n\n  var parts = align.split('-');\n\n  return {\n    horizontal: parts[0] || 'center',\n    vertical: parts[1] || 'top'\n  };\n}\n\nfunction parsePadding(padding) {\n\n  if (_.isObject(padding)) {\n    return _.extend({ top: 0, left: 0, right: 0, bottom: 0 }, padding);\n  } else {\n    return {\n      top: padding,\n      left: padding,\n      right: padding,\n      bottom: padding\n    };\n  }\n}\n\n\n/**\n * Creates a new label utility\n *\n * @param {Object} config\n * @param {Dimensions} config.size\n * @param {Number} config.padding\n * @param {Object} config.style\n * @param {String} config.align\n */\nfunction Text(config) {\n\n  this._config = _.extend({}, {\n    size: DEFAULT_LABEL_SIZE,\n    padding: DEFAULT_BOX_PADDING,\n    style: {},\n    align: 'center-top'\n  }, config || {});\n}\n\n/**\n * Create a label in the parent node.\n *\n * @method Text#createText\n *\n * @param {SVGElement} parent the parent to draw the label on\n * @param {String} text the text to render on the label\n * @param {Object} options\n * @param {String} options.align how to align in the bounding box.\n *                             Any of { 'center-middle', 'center-top' }, defaults to 'center-top'.\n * @param {String} options.style style to be applied to the text\n *\n * @return {SVGText} the text element created\n */\nText.prototype.createText = function(parent, text, options) {\n\n  var box = _.merge({}, this._config.size, options.box || {}),\n      style = _.merge({}, this._config.style, options.style || {}),\n      align = parseAlign(options.align || this._config.align),\n      padding = parsePadding(options.padding !== undefined ? options.padding : this._config.padding);\n\n  var lines = text.split(/\\r?\\n/g),\n      layouted = [];\n\n  var maxWidth = box.width - padding.left - padding.right;\n\n  var fakeText = parent.text(0, 0, '').attr(style).node;\n  // FF regression: ensure text is shown during rendering\n  // by attaching it directly to the body\n  fakeText.ownerSVGElement.appendChild(fakeText);\n\n  /**\n   * Layout the next line and return the layouted element.\n   *\n   * Alters the lines passed.\n   *\n   * @param  {Array<String>} lines\n   * @return {Object} the line descriptor, an object { width, height, text }\n   */\n  function layoutNext(lines) {\n\n    var originalLine = lines.shift(),\n        fitLine = originalLine;\n\n    var textBBox;\n\n    function fit() {\n      if (fitLine.length < originalLine.length) {\n        var nextLine = lines[0] || '',\n            remainder = originalLine.slice(fitLine.length);\n\n        if (/-\\s*$/.test(remainder)) {\n          nextLine = remainder.replace(/-\\s*$/, '') + nextLine.replace(/^\\s+/, '');\n        } else {\n          nextLine = remainder + ' ' + nextLine;\n        }\n\n        lines[0] = nextLine;\n      }\n      return { width: textBBox.width, height: textBBox.height, text: fitLine };\n    }\n\n    function getTextBBox(text) {\n      fakeText.textContent = text;\n      return fakeText.getBBox();\n    }\n\n    /**\n     * Shortens a line based on spacing and hyphens.\n     * Returns the shortened result on success.\n     *\n     * @param  {String} line\n     * @param  {Number} maxLength the maximum characters of the string\n     * @return {String} the shortened string\n     */\n    function semanticShorten(line, maxLength) {\n      var parts = line.split(/(\\s|-)/g),\n          part,\n          shortenedParts = [],\n          length = 0;\n\n      // try to shorten via spaces + hyphens\n      if (parts.length > 1) {\n        while ((part = parts.shift())) {\n\n          if (part.length + length < maxLength) {\n            shortenedParts.push(part);\n            length += part.length;\n          } else {\n            // remove previous part, too if hyphen does not fit anymore\n            if (part === '-') {\n              shortenedParts.pop();\n            }\n\n            break;\n          }\n        }\n      }\n\n      return shortenedParts.join('');\n    }\n\n    function shortenLine(line, width, maxWidth) {\n      var length = line.length * (maxWidth / width);\n\n      // try to shorten semantically (i.e. based on spaces and hyphens)\n      var shortenedLine = semanticShorten(line, length);\n\n      if (!shortenedLine) {\n\n        // force shorten by cutting the long word\n        shortenedLine = line.slice(0, Math.floor(length - 1));\n      }\n\n      return shortenedLine;\n    }\n\n\n    while (true) {\n\n      textBBox = getTextBBox(fitLine);\n\n      // try to fit\n      if (textBBox.width < maxWidth) {\n        return fit();\n      }\n\n      fitLine = shortenLine(fitLine, textBBox.width, maxWidth);\n    }\n  }\n\n  while (lines.length) {\n    layouted.push(layoutNext(lines));\n  }\n\n  var totalHeight = _.reduce(layouted, function(sum, line, idx) {\n    return sum + line.height;\n  }, 0);\n\n\n  // the center x position to align against\n  var cx = box.width / 2;\n\n  // the y position of the next line\n  var y, x;\n\n  switch (align.vertical) {\n    case 'middle':\n      y = (box.height - totalHeight) / 2 - layouted[0].height / 4;\n      break;\n\n    default:\n      y = padding.top;\n  }\n\n  var textElement = parent.text().attr(style);\n\n  _.forEach(layouted, function(line) {\n    y += line.height;\n\n    switch (align.horizontal) {\n      case 'left':\n        x = padding.left;\n        break;\n\n      case 'right':\n        x = (maxWidth - padding.right - line.width);\n        break;\n\n      default:\n        // aka center\n        x = (maxWidth - line.width) / 2 + padding.left;\n    }\n\n\n    var tspan = Snap.create('tspan', { x: x, y: y }).node;\n    tspan.textContent = line.text;\n\n    textElement.append(tspan);\n  });\n\n  // remove fake text\n  fakeText.parentNode.removeChild(fakeText);\n\n  return textElement;\n};\n\n\nmodule.exports = Text;\n},{}],59:[function(_dereq_,module,exports){\n\r\nvar isArray = function(obj) {\r\n  return Object.prototype.toString.call(obj) === '[object Array]';\r\n};\r\n\r\nvar annotate = function() {\r\n  var args = Array.prototype.slice.call(arguments);\r\n  \r\n  if (args.length === 1 && isArray(args[0])) {\r\n    args = args[0];\r\n  }\r\n\r\n  var fn = args.pop();\r\n\r\n  fn.$inject = args;\r\n\r\n  return fn;\r\n};\r\n\r\n\r\n// Current limitations:\r\n// - can't put into \"function arg\" comments\r\n// function /* (no parenthesis like this) */ (){}\r\n// function abc( /* xx (no parenthesis like this) */ a, b) {}\r\n//\r\n// Just put the comment before function or inside:\r\n// /* (((this is fine))) */ function(a, b) {}\r\n// function abc(a) { /* (((this is fine))) */}\r\n\r\nvar FN_ARGS = /^function\\s*[^\\(]*\\(\\s*([^\\)]*)\\)/m;\r\nvar FN_ARG = /\\/\\*([^\\*]*)\\*\\//m;\r\n\r\nvar parse = function(fn) {\r\n  if (typeof fn !== 'function') {\r\n    throw new Error('Cannot annotate \"' + fn + '\". Expected a function!');\r\n  }\r\n\r\n  var match = fn.toString().match(FN_ARGS);\r\n  return match[1] && match[1].split(',').map(function(arg) {\r\n    match = arg.match(FN_ARG);\r\n    return match ? match[1].trim() : arg.trim();\r\n  }) || [];\r\n};\r\n\r\n\r\nexports.annotate = annotate;\r\nexports.parse = parse;\r\nexports.isArray = isArray;\r\n\n},{}],60:[function(_dereq_,module,exports){\nmodule.exports = {\r\n  annotate: _dereq_('./annotation').annotate,\r\n  Module: _dereq_('./module'),\r\n  Injector: _dereq_('./injector')\r\n};\r\n\n},{\"./annotation\":59,\"./injector\":61,\"./module\":62}],61:[function(_dereq_,module,exports){\nvar Module = _dereq_('./module');\r\nvar autoAnnotate = _dereq_('./annotation').parse;\r\nvar annotate = _dereq_('./annotation').annotate;\r\nvar isArray = _dereq_('./annotation').isArray;\r\n\r\n\r\nvar Injector = function(modules, parent) {\r\n  parent = parent || {\r\n    get: function(name) {\r\n      currentlyResolving.push(name);\r\n      throw error('No provider for \"' + name + '\"!');\r\n    }\r\n  };\r\n\r\n  var currentlyResolving = [];\r\n  var providers = this._providers = Object.create(parent._providers || null);\r\n  var instances = this._instances = Object.create(null);\r\n\r\n  var self = instances.injector = this;\r\n\r\n  var error = function(msg) {\r\n    var stack = currentlyResolving.join(' -> ');\r\n    currentlyResolving.length = 0;\r\n    return new Error(stack ? msg + ' (Resolving: ' + stack + ')' : msg);\r\n  };\r\n\r\n  var get = function(name) {\r\n    if (!providers[name] && name.indexOf('.') !== -1) {\r\n      var parts = name.split('.');\r\n      var pivot = get(parts.shift());\r\n\r\n      while(parts.length) {\r\n        pivot = pivot[parts.shift()];\r\n      }\r\n\r\n      return pivot;\r\n    }\r\n\r\n    if (Object.hasOwnProperty.call(instances, name)) {\r\n      return instances[name];\r\n    }\r\n\r\n    if (Object.hasOwnProperty.call(providers, name)) {\r\n      if (currentlyResolving.indexOf(name) !== -1) {\r\n        currentlyResolving.push(name);\r\n        throw error('Cannot resolve circular dependency!');\r\n      }\r\n\r\n      currentlyResolving.push(name);\r\n      instances[name] = providers[name][0](providers[name][1]);\r\n      currentlyResolving.pop();\r\n\r\n      return instances[name];\r\n    }\r\n\r\n    return parent.get(name);\r\n  };\r\n\r\n  var instantiate = function(Type) {\r\n    var instance = Object.create(Type.prototype);\r\n    var returned = invoke(Type, instance);\r\n\r\n    return typeof returned === 'object' ? returned : instance;\r\n  };\r\n\r\n  var invoke = function(fn, context) {\r\n    if (typeof fn !== 'function') {\r\n      if (isArray(fn)) {\r\n        fn = annotate(fn.slice());\r\n      } else {\r\n        throw new Error('Cannot invoke \"' + fn + '\". Expected a function!');\r\n      }\r\n    }\r\n\r\n    var inject = fn.$inject && fn.$inject || autoAnnotate(fn);\r\n    var dependencies = inject.map(function(dep) {\r\n      return get(dep);\r\n    });\r\n\r\n    // TODO(vojta): optimize without apply\r\n    return fn.apply(context, dependencies);\r\n  };\r\n\r\n\r\n  var createPrivateInjectorFactory = function(privateChildInjector) {\r\n    return annotate(function(key) {\r\n      return privateChildInjector.get(key);\r\n    });\r\n  };\r\n\r\n  var createChild = function(modules, forceNewInstances) {\r\n    if (forceNewInstances && forceNewInstances.length) {\r\n      var fromParentModule = Object.create(null);\r\n      var matchedScopes = Object.create(null);\r\n\r\n      var privateInjectorsCache = [];\r\n      var privateChildInjectors = [];\r\n      var privateChildFactories = [];\r\n\r\n      var provider;\r\n      var cacheIdx;\r\n      var privateChildInjector;\r\n      var privateChildInjectorFactory;\r\n      for (var name in providers) {\r\n        provider = providers[name];\r\n\r\n        if (forceNewInstances.indexOf(name) !== -1) {\r\n          if (provider[2] === 'private') {\r\n            cacheIdx = privateInjectorsCache.indexOf(provider[3]);\r\n            if (cacheIdx === -1) {\r\n              privateChildInjector = provider[3].createChild([], forceNewInstances);\r\n              privateChildInjectorFactory = createPrivateInjectorFactory(privateChildInjector);\r\n              privateInjectorsCache.push(provider[3]);\r\n              privateChildInjectors.push(privateChildInjector);\r\n              privateChildFactories.push(privateChildInjectorFactory);\r\n              fromParentModule[name] = [privateChildInjectorFactory, name, 'private', privateChildInjector];\r\n            } else {\r\n              fromParentModule[name] = [privateChildFactories[cacheIdx], name, 'private', privateChildInjectors[cacheIdx]];\r\n            }\r\n          } else {\r\n            fromParentModule[name] = [provider[2], provider[1]];\r\n          }\r\n          matchedScopes[name] = true;\r\n        }\r\n\r\n        if ((provider[2] === 'factory' || provider[2] === 'type') && provider[1].$scope) {\r\n          forceNewInstances.forEach(function(scope) {\r\n            if (provider[1].$scope.indexOf(scope) !== -1) {\r\n              fromParentModule[name] = [provider[2], provider[1]];\r\n              matchedScopes[scope] = true;\r\n            }\r\n          });\r\n        }\r\n      }\r\n\r\n      forceNewInstances.forEach(function(scope) {\r\n        if (!matchedScopes[scope]) {\r\n          throw new Error('No provider for \"' + scope + '\". Cannot use provider from the parent!');\r\n        }\r\n      });\r\n\r\n      modules.unshift(fromParentModule);\r\n    }\r\n\r\n    return new Injector(modules, self);\r\n  };\r\n\r\n  var factoryMap = {\r\n    factory: invoke,\r\n    type: instantiate,\r\n    value: function(value) {\r\n      return value;\r\n    }\r\n  };\r\n\r\n  modules.forEach(function(module) {\r\n\r\n    function arrayUnwrap(type, value) {\r\n      if (type !== 'value' && isArray(value)) {\r\n        value = annotate(value.slice());\r\n      }\r\n\r\n      return value;\r\n    }\r\n\r\n    // TODO(vojta): handle wrong inputs (modules)\r\n    if (module instanceof Module) {\r\n      module.forEach(function(provider) {\r\n        var name = provider[0];\r\n        var type = provider[1];\r\n        var value = provider[2];\r\n\r\n        providers[name] = [factoryMap[type], arrayUnwrap(type, value), type];\r\n      });\r\n    } else if (typeof module === 'object') {\r\n      if (module.__exports__) {\r\n        var clonedModule = Object.keys(module).reduce(function(m, key) {\r\n          if (key.substring(0, 2) !== '__') {\r\n            m[key] = module[key];\r\n          }\r\n          return m;\r\n        }, Object.create(null));\r\n\r\n        var privateInjector = new Injector((module.__modules__ || []).concat([clonedModule]), self);\r\n        var getFromPrivateInjector = annotate(function(key) {\r\n          return privateInjector.get(key);\r\n        });\r\n        module.__exports__.forEach(function(key) {\r\n          providers[key] = [getFromPrivateInjector, key, 'private', privateInjector];\r\n        });\r\n      } else {\r\n        Object.keys(module).forEach(function(name) {\r\n          if (module[name][2] === 'private') {\r\n            providers[name] = module[name];\r\n            return;\r\n          }\r\n\r\n          var type = module[name][0];\r\n          var value = module[name][1];\r\n\r\n          providers[name] = [factoryMap[type], arrayUnwrap(type, value), type];\r\n        });\r\n      }\r\n    }\r\n  });\r\n\r\n  // public API\r\n  this.get = get;\r\n  this.invoke = invoke;\r\n  this.instantiate = instantiate;\r\n  this.createChild = createChild;\r\n};\r\n\r\nmodule.exports = Injector;\r\n\n},{\"./annotation\":59,\"./module\":62}],62:[function(_dereq_,module,exports){\nvar Module = function() {\r\n  var providers = [];\r\n\r\n  this.factory = function(name, factory) {\r\n    providers.push([name, 'factory', factory]);\r\n    return this;\r\n  };\r\n\r\n  this.value = function(name, value) {\r\n    providers.push([name, 'value', value]);\r\n    return this;\r\n  };\r\n\r\n  this.type = function(name, type) {\r\n    providers.push([name, 'type', type]);\r\n    return this;\r\n  };\r\n\r\n  this.forEach = function(iterator) {\r\n    providers.forEach(iterator);\r\n  };\r\n};\r\n\r\nmodule.exports = Module;\r\n\n},{}],63:[function(_dereq_,module,exports){\nmodule.exports = _dereq_('./lib/refs');\r\n\r\nmodule.exports.Collection = _dereq_('./lib/collection');\n},{\"./lib/collection\":64,\"./lib/refs\":65}],64:[function(_dereq_,module,exports){\n'use strict';\r\n\r\n/**\r\n * An empty collection stub. Use {@link RefsCollection.extend} to extend a\r\n * collection with ref semantics.\r\n *\r\n * @classdesc A change and inverse-reference aware collection with set semantics.\r\n *\r\n * @class RefsCollection\r\n */\r\nfunction RefsCollection() { }\r\n\r\n/**\r\n * Extends a collection with {@link Refs} aware methods\r\n *\r\n * @memberof RefsCollection\r\n * @static\r\n *\r\n * @param  {Array<Object>} collection\r\n * @param  {Refs} refs instance\r\n * @param  {Object} property represented by the collection\r\n * @param  {Object} target object the collection is attached to\r\n *\r\n * @return {RefsCollection<Object>} the extended array\r\n */\r\nfunction extend(collection, refs, property, target) {\r\n\r\n  var inverseProperty = property.inverse;\r\n\r\n  /**\r\n   * Removes the given element from the array and returns it.\r\n   *\r\n   * @method RefsCollection#remove\r\n   *\r\n   * @param {Object} element the element to remove\r\n   */\r\n  collection.remove = function(element) {\r\n    var idx = this.indexOf(element);\r\n    if (idx !== -1) {\r\n      this.splice(idx, 1);\r\n\r\n      // unset inverse\r\n      refs.unset(element, inverseProperty, target);\r\n    }\r\n\r\n    return element;\r\n  };\r\n\r\n  /**\r\n   * Returns true if the collection contains the given element\r\n   *\r\n   * @method RefsCollection#contains\r\n   *\r\n   * @param {Object} element the element to check for\r\n   */\r\n  collection.contains = function(element) {\r\n    return this.indexOf(element) !== -1;\r\n  };\r\n\r\n  /**\r\n   * Adds an element to the array, unless it exists already (set semantics).\r\n   *\r\n   * @method RefsCollection#add\r\n   *\r\n   * @param {Object} element the element to add\r\n   */\r\n  collection.add = function(element) {\r\n\r\n    if (!this.contains(element)) {\r\n      this.push(element);\r\n\r\n      // set inverse\r\n      refs.set(element, inverseProperty, target);\r\n    }\r\n  };\r\n\r\n  return collection;\r\n}\r\n\r\n\r\nmodule.exports.extend = extend;\n},{}],65:[function(_dereq_,module,exports){\n'use strict';\r\n\r\nvar Collection = _dereq_('./collection');\r\n\r\nfunction hasOwnProperty(e, property) {\r\n  return Object.prototype.hasOwnProperty.call(e, property.name || property);\r\n}\r\n\r\n\r\nfunction defineCollectionProperty(ref, property, target) {\r\n  Object.defineProperty(target, property.name, {\r\n    enumerable: property.enumerable,\r\n    value: Collection.extend(target[property.name] || [], ref, property, target)\r\n  });\r\n}\r\n\r\n\r\nfunction defineProperty(ref, property, target) {\r\n\r\n  var inverseProperty = property.inverse;\r\n\r\n  var _value = target[property.name];\r\n\r\n  Object.defineProperty(target, property.name, {\r\n    enumerable: property.enumerable,\r\n\r\n    get: function() {\r\n      return _value;\r\n    },\r\n\r\n    set: function(value) {\r\n\r\n      // return if we already performed all changes\r\n      if (value === _value) {\r\n        return;\r\n      }\r\n\r\n      var old = _value;\r\n\r\n      // temporary set null\r\n      _value = null;\r\n\r\n      if (old) {\r\n        ref.unset(old, inverseProperty, target);\r\n      }\r\n\r\n      // set new value\r\n      _value = value;\r\n\r\n      // set inverse value\r\n      ref.set(_value, inverseProperty, target);\r\n    }\r\n  });\r\n\r\n}\r\n\r\n/**\r\n * Creates a new references object defining two inversly related\r\n * attribute descriptors a and b.\r\n *\r\n * <p>\r\n *   When bound to an object using {@link Refs#bind} the references\r\n *   get activated and ensure that add and remove operations are applied\r\n *   reversely, too.\r\n * </p>\r\n *\r\n * <p>\r\n *   For attributes represented as collections {@link Refs} provides the\r\n *   {@link RefsCollection#add}, {@link RefsCollection#remove} and {@link RefsCollection#contains} extensions\r\n *   that must be used to properly hook into the inverse change mechanism.\r\n * </p>\r\n *\r\n * @class Refs\r\n *\r\n * @classdesc A bi-directional reference between two attributes.\r\n *\r\n * @param {Refs.AttributeDescriptor} a property descriptor\r\n * @param {Refs.AttributeDescriptor} b property descriptor\r\n *\r\n * @example\r\n *\r\n * var refs = Refs({ name: 'wheels', collection: true, enumerable: true }, { name: 'car' });\r\n *\r\n * var car = { name: 'toyota' };\r\n * var wheels = [{ pos: 'front-left' }, { pos: 'front-right' }];\r\n *\r\n * refs.bind(car, 'wheels');\r\n *\r\n * car.wheels // []\r\n * car.wheels.add(wheels[0]);\r\n * car.wheels.add(wheels[1]);\r\n *\r\n * car.wheels // [{ pos: 'front-left' }, { pos: 'front-right' }]\r\n *\r\n * wheels[0].car // { name: 'toyota' };\r\n * car.wheels.remove(wheels[0]);\r\n *\r\n * wheels[0].car // undefined\r\n */\r\nfunction Refs(a, b) {\r\n\r\n  if (!(this instanceof Refs)) {\r\n    return new Refs(a, b);\r\n  }\r\n\r\n  // link\r\n  a.inverse = b;\r\n  b.inverse = a;\r\n\r\n  this.props = {};\r\n  this.props[a.name] = a;\r\n  this.props[b.name] = b;\r\n}\r\n\r\n/**\r\n * Binds one side of a bi-directional reference to a\r\n * target object.\r\n *\r\n * @memberOf Refs\r\n *\r\n * @param  {Object} target\r\n * @param  {String} property\r\n */\r\nRefs.prototype.bind = function(target, property) {\r\n  if (typeof property === 'string') {\r\n    if (!this.props[property]) {\r\n      throw new Error('no property <' + property + '> in ref');\r\n    }\r\n    property = this.props[property];\r\n  }\r\n\r\n  if (property.collection) {\r\n    defineCollectionProperty(this, property, target);\r\n  } else {\r\n    defineProperty(this, property, target);\r\n  }\r\n};\r\n\r\nRefs.prototype.ensureBound = function(target, property) {\r\n  if (!hasOwnProperty(target, property)) {\r\n    this.bind(target, property);\r\n  }\r\n};\r\n\r\nRefs.prototype.unset = function(target, property, value) {\r\n\r\n  if (target) {\r\n    this.ensureBound(target, property);\r\n\r\n    if (property.collection) {\r\n      target[property.name].remove(value);\r\n    } else {\r\n      target[property.name] = undefined;\r\n    }\r\n  }\r\n};\r\n\r\nRefs.prototype.set = function(target, property, value) {\r\n\r\n  if (target) {\r\n    this.ensureBound(target, property);\r\n\r\n    if (property.collection) {\r\n      target[property.name].add(value);\r\n    } else {\r\n      target[property.name] = value;\r\n    }\r\n  }\r\n};\r\n\r\nmodule.exports = Refs;\r\n\r\n\r\n/**\r\n * An attribute descriptor to be used specify an attribute in a {@link Refs} instance\r\n *\r\n * @typedef {Object} Refs.AttributeDescriptor\r\n * @property {String} name\r\n * @property {boolean} [collection=false]\r\n * @property {boolean} [enumerable=false]\r\n */\n},{\"./collection\":64}]},{},[1])\n(1)\n});"]}